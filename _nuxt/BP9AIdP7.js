import{i as e,o as l,c as t,a,A as s,z as r,t as o,F as n,p as i,l as d,B as u,q as c,v as p,y as v,s as g,d as x,r as b}from"./DH083wp6.js";import{s as m}from"./C7-50Fh1.js";import{_ as f}from"./BCo6x5W8.js";const y={id:"format-converter",class:"mb-6"},h={class:"bg-white rounded-xl shadow-sm"},w={class:"p-4"},k={class:"flex flex-col items-center justify-center space-y-3"},P={class:"text-xs text-gray-500 mt-0.5"},D=["accept"],F={key:0,class:"mt-4"},j={class:"flex items-center justify-between bg-gray-100 p-2 rounded-lg mb-2"},M={class:"flex items-center space-x-2"},C={class:"text-xs font-medium"},L={class:"space-y-1"},B={class:"text-xs truncate"},G={class:"text-xs text-gray-500"},I=["onClick"],W={key:1,class:"mt-3"},_={class:"w-full bg-gray-200 rounded-full h-1.5"},q={class:"text-xs text-gray-500 mt-0.5 text-center"},V={key:0,class:"space-y-4"},T={class:"bg-gray-50 p-3 rounded-lg"},z={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1.5"},A=["value"],E={class:"text-xs"},R={class:"text-xs text-gray-500"},H={key:0,class:"bg-gray-50 p-3 rounded-lg"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},U={key:0},N={key:1},J={class:"text-xs text-gray-500 text-center"},X={class:"flex space-x-3"},Y=["disabled"],$={key:0},K={key:1,class:"flex items-center justify-center"},O={key:1,class:"mt-4"},Z={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-3"},Q={class:"mt-1 text-sm text-green-700"},ee={class:"mt-2 space-y-1.5"},le=["href","download"],te={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-3"},ae={class:"mt-1 text-sm text-red-700"},se={key:0,class:"mt-1 text-xs text-gray-600"},re=f({__name:"FormatConverter",setup(f){const re=b([".pdf",".doc",".docx",".xls",".xlsx",".jpg",".jpeg",".png",".gif",".webp"]),oe=b(null),ne=b([]),ie=b(!1),de=b(!1),ue=b(0),ce=b(""),pe=b(""),ve=b(!1),ge=b(null),xe=b({processMode:"standard",quality:80,pageRange:"",preserveLayout:!0,includeImages:!0}),be=b([]),me={pdf:[{value:"docx",label:"Word (.docx)",description:"适合编辑文本内容"},{value:"txt",label:"文本 (.txt)",description:"纯文本格式"},{value:"html",label:"HTML (.html)",description:"网页格式"},{value:"jpg",label:"图片 (.jpg)",description:"将PDF转换为图片"}],doc:[{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"},{value:"docx",label:"Word (.docx)",description:"更新的Word格式"},{value:"txt",label:"文本 (.txt)",description:"纯文本格式"},{value:"html",label:"HTML (.html)",description:"网页格式"}],docx:[{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"},{value:"doc",label:"Word (.doc)",description:"兼容旧版本Word"},{value:"txt",label:"文本 (.txt)",description:"纯文本格式"},{value:"html",label:"HTML (.html)",description:"网页格式"}],xls:[{value:"xlsx",label:"Excel (.xlsx)",description:"更新的Excel格式"},{value:"csv",label:"CSV (.csv)",description:"逗号分隔值"},{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"}],xlsx:[{value:"xls",label:"Excel (.xls)",description:"兼容旧版本Excel"},{value:"csv",label:"CSV (.csv)",description:"逗号分隔值"},{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"}],ppt:[{value:"pptx",label:"PowerPoint (.pptx)",description:"更新的PowerPoint格式"},{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"}],pptx:[{value:"ppt",label:"PowerPoint (.ppt)",description:"兼容旧版本PowerPoint"},{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"}],txt:[{value:"pdf",label:"PDF (.pdf)",description:"适合共享和打印"},{value:"docx",label:"Word (.docx)",description:"适合编辑文本内容"},{value:"html",label:"HTML (.html)",description:"网页格式"},{value:"md",label:"Markdown (.md)",description:"Markdown格式"}],jpg:[{value:"png",label:"PNG (.png)",description:"无损压缩格式"},{value:"webp",label:"WebP (.webp)",description:"现代网页图片格式"},{value:"gif",label:"GIF (.gif)",description:"支持动画的图片格式"},{value:"pdf",label:"PDF (.pdf)",description:"将图片转换为PDF"}],jpeg:[{value:"png",label:"PNG (.png)",description:"无损压缩格式"},{value:"webp",label:"WebP (.webp)",description:"现代网页图片格式"},{value:"gif",label:"GIF (.gif)",description:"支持动画的图片格式"},{value:"pdf",label:"PDF (.pdf)",description:"将图片转换为PDF"}],png:[{value:"jpg",label:"JPG (.jpg)",description:"有损压缩格式"},{value:"webp",label:"WebP (.webp)",description:"现代网页图片格式"},{value:"gif",label:"GIF (.gif)",description:"支持动画的图片格式"},{value:"pdf",label:"PDF (.pdf)",description:"将图片转换为PDF"}],webp:[{value:"jpg",label:"JPG (.jpg)",description:"通用图片格式"},{value:"png",label:"PNG (.png)",description:"无损压缩格式"},{value:"gif",label:"GIF (.gif)",description:"支持动画的图片格式"},{value:"pdf",label:"PDF (.pdf)",description:"将图片转换为PDF"}]},fe=e=>{e.preventDefault(),ie.value=!0},ye=e=>{e.preventDefault(),ie.value=!0},he=e=>{e.preventDefault();const l=e.currentTarget.getBoundingClientRect();(e.clientX<l.left||e.clientX>=l.right||e.clientY<l.top||e.clientY>=l.bottom)&&(ie.value=!1)},we=e=>{e.preventDefault(),ie.value=!1;const l=Array.from(e.dataTransfer.files);Pe(l)},ke=e=>{const l=Array.from(e.target.files);Pe(l)},Pe=e=>{if(0===e.length)return;const l=e.map(e=>{const l=e.name.split(".");return l.length>1?l.pop().toLowerCase():""}),t=[...new Set(l)];if(t.length>1)return void alert("仅允许上传相同后缀名的文件");const a=t[0];ce.value=a,Fe(a),De(e)},De=e=>{de.value=!0,ue.value=0;const l=m(()=>{ue.value+=10,ue.value>=100&&(clearInterval(l),setTimeout(()=>{de.value=!1,ne.value=e},500))},200)},Fe=e=>{be.value=me[e]||[],be.value.length>0?pe.value=be.value[0].value:pe.value=""},je=()=>{ne.value=[],ce.value="",pe.value="",be.value=[],ge.value=null,xe.value={processMode:"standard",quality:80,pageRange:"",preserveLayout:!0,includeImages:!0},oe.value&&(oe.value.value="")},Me=async()=>{if(pe.value){ve.value=!0,ge.value=null;try{const e=new FormData;ne.value.forEach(l=>{e.append("files",l)}),e.append("source_format",ce.value),e.append("target_format",pe.value),e.append("process_mode",xe.value.processMode),e.append("quality",xe.value.quality.toString()),e.append("page_range",xe.value.pageRange);const l=await fetch("http://localhost:8000/api/format-convert",{method:"POST",body:e}),t=await l.json();ge.value=t}catch(e){ge.value={success:!1,message:`转换失败：${e.message||"未知错误"}`,suggestion:"请检查文件是否损坏，或尝试使用其他文件"}}finally{ve.value=!1}}else alert("请选择目标格式")},Ce=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]};return e(()=>{}),(e,b)=>(l(),t("section",y,[a("div",h,[b[18]||(b[18]=a("div",{class:"border-b border-gray-200 px-4 py-3"},[a("h2",{class:"text-lg font-bold text-gray-800"},"格式转换"),a("p",{class:"text-xs text-gray-500 mt-0.5"},"支持PDF、Word、Excel和图片格式的相互转换")],-1)),a("div",w,[a("div",{class:r(["border-2 border-dashed border-gray-300 rounded-lg p-4 text-center transition-all duration-300 mb-4",{"border-blue-500 bg-blue-50":ie.value}]),onDragover:s(fe,["prevent"]),onDragenter:s(ye,["prevent"]),onDragleave:s(he,["prevent"]),onDrop:s(we,["prevent"])},[a("div",k,[b[7]||(b[7]=a("svg",{class:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),a("div",null,[b[5]||(b[5]=a("h3",{class:"text-sm font-medium text-gray-700"},"选择文件",-1)),a("p",P," 拖拽文件到此处或点击选择，支持："+o(re.value.join(", ")),1),b[6]||(b[6]=a("p",{class:"text-xs text-gray-400 mt-0.5"}," 提示：仅允许上传相同后缀名的文件 ",-1))]),a("input",{type:"file",ref_key:"fileInput",ref:oe,onChange:ke,accept:re.value.join(","),multiple:"",class:"hidden"},null,40,D),a("button",{onClick:b[0]||(b[0]=l=>e.$refs.fileInput.click()),class:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"}," 选择文件 ")]),ne.value.length>0?(l(),t("div",F,[a("div",j,[a("div",M,[b[8]||(b[8]=a("svg",{class:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V4z","clip-rule":"evenodd"})],-1)),a("span",C,o(ne.value.length)+" 个文件已选择 ",1)]),a("button",{onClick:je,class:"text-red-500 hover:text-red-700 text-xs"}," 清空 ")]),a("div",L,[(l(!0),t(n,null,i(ne.value,(e,s)=>(l(),t("div",{key:s,class:"flex items-center justify-between bg-gray-50 p-1.5 rounded"},[a("span",B,o(e.name),1),a("span",G,o(Ce(e.size)),1),a("button",{onClick:e=>(e=>{ne.value.splice(e,1),0===ne.value.length&&(ce.value="",pe.value="",be.value=[],ge.value=null)})(s),class:"text-red-500 hover:text-red-700 text-xs ml-2"}," × ",8,I)]))),128))])])):d("",!0),de.value?(l(),t("div",W,[a("div",_,[a("div",{class:"bg-blue-600 h-1.5 rounded-full",style:u({width:ue.value+"%"})},null,4)]),a("p",q,"上传中... "+o(ue.value)+"%",1)])):d("",!0)],34),ne.value.length>0&&ce.value?(l(),t("div",V,[a("div",T,[b[9]||(b[9]=a("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"目标格式",-1)),a("div",z,[(l(!0),t(n,null,i(be.value,e=>(l(),t("label",{key:e.value,class:r(["flex items-center space-x-1.5 cursor-pointer p-1.5 border rounded-md hover:bg-gray-100 transition-colors",{"border-blue-500 bg-blue-50":pe.value===e.value}])},[c(a("input",{type:"radio","onUpdate:modelValue":b[1]||(b[1]=e=>pe.value=e),value:e.value,class:"w-2.5 h-2.5 text-blue-600"},null,8,A),[[p,pe.value]]),a("div",null,[a("div",E,o(e.label),1),a("div",R,o(e.description),1)])],2))),128))])]),pe.value?(l(),t("div",H,[b[14]||(b[14]=a("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"操作参数",-1)),a("div",S,[a("div",null,[b[11]||(b[11]=a("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"处理方式",-1)),c(a("select",{"onUpdate:modelValue":b[2]||(b[2]=e=>xe.value.processMode=e),class:"w-full px-2 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},[...b[10]||(b[10]=[a("option",{value:"standard"},"标准处理",-1),a("option",{value:"high-quality"},"高质量处理",-1),a("option",{value:"fast"},"快速处理",-1)])],512),[[v,xe.value.processMode]])]),["pdf","docx","doc"].includes(ce.value)?(l(),t("div",U,[b[12]||(b[12]=a("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"页面范围",-1)),c(a("input",{"onUpdate:modelValue":b[3]||(b[3]=e=>xe.value.pageRange=e),type:"text",placeholder:"例如：1-5, 7, 9-12（留空表示全部）",class:"w-full px-2 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[g,xe.value.pageRange]])])):d("",!0),["jpg","jpeg","png","webp"].includes(ce.value)?(l(),t("div",N,[b[13]||(b[13]=a("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"图片质量",-1)),c(a("input",{"onUpdate:modelValue":b[4]||(b[4]=e=>xe.value.quality=e),type:"range",min:"1",max:"100",class:"w-full"},null,512),[[g,xe.value.quality,void 0,{number:!0}]]),a("p",J,o(xe.value.quality)+"%",1)])):d("",!0)])])):d("",!0),a("div",X,[a("button",{onClick:Me,disabled:!pe.value||ve.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm"},[ve.value?(l(),t("span",K,[...b[15]||(b[15]=[a("svg",{class:"animate-spin -ml-1 mr-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" 处理中... ",-1)])])):(l(),t("span",$,"开始转换"))],8,Y),a("button",{onClick:je,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm"}," 重置 ")])])):d("",!0),ge.value?(l(),t("div",O,[ge.value.success?(l(),t("div",Z,[b[16]||(b[16]=a("div",{class:"flex items-center"},[a("svg",{class:"w-4 h-4 text-green-500 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),a("h4",{class:"font-semibold text-green-800"},"转换成功")],-1)),a("p",Q,o(ge.value.message),1),a("div",ee,[(l(!0),t(n,null,i(ge.value.downloadLinks,(e,a)=>(l(),t("a",{key:a,href:e.url,download:e.filename,class:"block px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-center text-sm"}," 下载转换结果 "+o(a+1),9,le))),128))])])):(l(),t("div",te,[b[17]||(b[17]=a("div",{class:"flex items-center"},[a("svg",{class:"w-4 h-4 text-red-500 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),a("h4",{class:"font-semibold text-red-800"},"转换失败")],-1)),a("p",ae,o(ge.value.message),1),ge.value.suggestion?(l(),t("p",se,"建议："+o(ge.value.suggestion),1)):d("",!0)]))])):d("",!0)])])]))}},[["__scopeId","data-v-557bf5f0"]]);export{re as default};
