import{_ as e}from"./BM3HdAYC.js";import{m as l,n as a,p as t,x as s,F as r,u as n,D as o,H as u,E as i,k as d,_ as c,w as v,q as p,z as f,a7 as m,J as g,v as b}from"./DFWWPSrV.js";import{_ as x}from"./C1jkWaCi.js";import{P as y}from"./CSCFOOKZ.js";import{_ as h}from"./nEzmyvu1.js";import"./CdYbPlRr.js";import"./DUMejLMI.js";const w={class:"flex flex-col items-center justify-center"},k={class:"text-sm font-medium mb-1"},_={class:"text-xs text-gray-500 mb-2"},D=["accept","multiple"],C={key:0,class:"mt-2"},F={class:"flex items-center space-x-2"},j={class:"text-xs font-medium truncate max-w-[200px]"},P=["onClick"],U=h({__name:"ToolCommonFileUploader",props:{title:{type:String,default:"选择文件"},description:{type:String,default:"支持单个文件上传"},accept:{type:String,default:"*"},multiple:{type:Boolean,default:!1}},emits:["file-selected","file-removed","files-changed"],setup(e,{expose:c,emit:v}){const p=e,f=v,m=d(null),g=d([]),b=d(!1),x=e=>{e.preventDefault(),b.value=!0},y=e=>{e.preventDefault(),b.value=!0},h=e=>{e.preventDefault();const l=e.currentTarget.getBoundingClientRect();(e.clientX<l.left||e.clientX>=l.right||e.clientY<l.top||e.clientY>=l.bottom)&&(b.value=!1)},U=e=>{e.preventDefault(),b.value=!1;const l=Array.from(e.dataTransfer.files);R(l)},A=e=>{const l=Array.from(e.target.files);R(l)},R=e=>{0!==e.length&&(p.multiple?(g.value=e,f("file-selected",e)):(g.value=[e[0]],f("file-selected",e[0])),f("files-changed",g.value))},S=e=>{const l=g.value[e];g.value.splice(e,1),f("file-removed",l),f("files-changed",g.value),m.value&&(m.value.value="")};return c({files:g,clearFiles:()=>{g.value=[],f("files-changed",[]),m.value&&(m.value.value="")},removeFile:S}),(d,c)=>(l(),a("div",{class:i(["border-2 border-dashed border-red-500 rounded-lg p-3 text-center transition-all duration-300",{"border-blue-500 bg-blue-50":b.value}]),onDragover:u(x,["prevent"]),onDragenter:u(y,["prevent"]),onDragleave:u(h,["prevent"]),onDrop:u(U,["prevent"])},[t("div",w,[c[1]||(c[1]=t("svg",{class:"w-10 h-10 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),t("h3",k,s(e.title||"选择文件"),1),t("p",_,s(e.description||"支持单个文件上传"),1),t("input",{type:"file",ref_key:"fileInput",ref:m,onChange:A,accept:e.accept,multiple:e.multiple,class:"hidden"},null,40,D),t("button",{onClick:c[0]||(c[0]=e=>d.$refs.fileInput.click()),class:"px-4 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"}," 选择文件 ")]),g.value.length>0?(l(),a("div",C,[(l(!0),a(r,null,n(g.value,(e,r)=>(l(),a("div",{key:r,class:"flex items-center justify-between bg-gray-100 p-2 rounded mb-1"},[t("div",F,[c[2]||(c[2]=t("svg",{class:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zM2 12a1 1 0 110-2 1 1 0 010 2zm14 0a1 1 0 110-2 1 1 0 010 2z","clip-rule":"evenodd"})],-1)),t("span",j,s(e.name),1)]),t("button",{onClick:e=>S(r),class:"text-red-500 hover:text-red-700 text-xs"}," 移除 ",8,P)]))),128))])):o("",!0)],34))}},[["__scopeId","data-v-ce1e4a42"]]),A={class:"space-y-6"},R={class:"bg-white p-4 rounded-lg shadow"},S={class:"space-y-3"},z={class:"flex space-x-4"},B={class:"flex-1"},I={key:0,class:"flex-1"},M={key:0,class:"mt-6"},E=["disabled"],T={key:0,class:"mr-2 animate-spin"},L={key:1,class:"mt-4"},V={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},$={class:"space-y-2 text-sm text-green-700"},H={key:0},O=h({__name:"split",setup(r){let n=null;const u=d(null),i=d([]),h=d("range"),w=d(""),k=d(!1),_=d(0),D=d(null),C=d(null),F=d(0),j=d(0),P=async e=>{if(e){const l=await(e=>new Promise(l=>{const a=new FileReader;a.onload=e=>{const a=e.target.result,t=new Uint8Array(a);let s=0;for(let l=0;l<t.length-100;l++)if(47===t[l]&&67===t[l+1]&&111===t[l+2]&&117===t[l+3]&&110===t[l+4]&&116===t[l+5]){let e=l+6;for(;e<t.length&&(t[e]<48||t[e]>57);)e++;let a="";for(;e<t.length&&t[e]>=48&&t[e]<=57;)a+=String.fromCharCode(t[e]),e++;if(a){s=parseInt(a);break}}l(s)},a.onerror=()=>{l(0)},a.readAsArrayBuffer(e)}))(e);j.value=l}},O=()=>{j.value=0},X=e=>{i.value=e},Y=async()=>{if(0!==i.value.length){k.value=!0,_.value=0,D.value=null,C.value=null,F.value=0;try{const l=await(async()=>(n||(n=(await e(async()=>{const{default:e}=await import("./CAdd_UJG.js");return{default:e}},[],import.meta.url)).default),n))();_.value=30;const a=await l.pdfSplit({file:i.value[0],splitMode:h.value,pageRange:w.value});_.value=100,setTimeout(()=>{k.value=!1;const e=a,l=URL.createObjectURL(e);if(C.value=l,"range"===h.value){const e=w.value.split(/[,，\s]+/).filter(e=>""!==e.trim());let l=0;e.forEach(e=>{if(e.includes("-")){const[a,t]=e.split("-").map(Number);l+=t-a+1}else l+=1}),F.value=1}else F.value=j.value||0;q(),F.value},500)}catch(l){k.value=!1,D.value=l.message,l.message}}},q=()=>{if(!C.value)return;const e="range"===h.value?`split_${w.value}.pdf`:"split_each.zip",l=document.createElement("a");l.href=C.value,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l)};return(e,r)=>(l(),c(x,{title:"PDF拆分",description:"将PDF文件按页面范围或每页单独拆分","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择拆分方式：","   • 指定页面范围：输入要拆分的页面范围（例如：1-3,5-7）","   • 每页单独拆分：将PDF的每一页拆分为单独的文件","4. 页面范围输入说明：","   • 支持单个页码：如 '5'","   • 支持页码范围：如 '1-3'","   • 支持多个范围：如 '1-3,5-7'","   • 支持中英文逗号和空格作为分隔符","5. 点击'开始拆分'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看拆分结果信息，包括成功拆分的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:v(()=>[t("div",A,[p(U,{ref_key:"fileUploader",ref:u,title:"选择PDF文件",description:"支持单个PDF文件，最大100MB",accept:".pdf",multiple:!1,onFileSelected:P,onFileRemoved:O,onFilesChanged:X},null,512),t("div",R,[r[5]||(r[5]=t("h3",{class:"font-semibold mb-3"},"拆分设置",-1)),t("div",S,[t("div",z,[t("div",B,[r[3]||(r[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分方式",-1)),f(t("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>h.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...r[2]||(r[2]=[t("option",{value:"range"},"指定页面范围",-1),t("option",{value:"each"},"每页单独拆分",-1)])],512),[[m,h.value]])]),"range"===h.value?(l(),a("div",I,[r[4]||(r[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面范围 (例如: 1-3,5-7)",-1)),f(t("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>w.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入页面范围"},null,512),[[g,w.value]])])):o("",!0)])])]),i.value.length>0?(l(),a("div",M,[t("button",{onClick:Y,disabled:k.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[k.value?(l(),a("span",T,"⏳")):o("",!0),b(" "+s(k.value?"处理中...":"开始拆分"),1)],8,E)])):o("",!0),k.value?(l(),a("div",L,[p(y,{progress:_.value,label:`处理进度: ${_.value}%`,error:D.value},null,8,["progress","label","error"])])):o("",!0),C.value?(l(),a("div",V,[r[7]||(r[7]=t("h3",{class:"font-semibold text-green-700 mb-2"},"拆分成功",-1)),t("div",$,[t("p",null,"成功拆分："+s(F.value)+" 个文件",1),t("p",null,"拆分方式："+s("range"===h.value?"指定页面范围":"每页单独拆分"),1),"range"===h.value?(l(),a("p",H,"页面范围："+s(w.value),1)):o("",!0),r[6]||(r[6]=t("p",null,"文件已自动开始下载",-1))])])):o("",!0)])]),_:1}))}},[["__scopeId","data-v-a59d65f9"]]);export{O as default};
