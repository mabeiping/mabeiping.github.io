import{i as J,w as Q,o,a as e,c as n,F as B,r as V,j as g,v as X,t as i,b as Y,f as c,p as T,y as F,d as Z,x as ee,l as r,m as te}from"./-R7zUpUx.js";import{_ as le}from"./1SagYtif.js";import{G as se}from"./zseaTYbb.js";import{s as oe}from"./CI8PMl9t.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const ne={class:"space-y-6"},ae={class:"bg-gray-50 p-4 rounded-lg"},re={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},ie=["value"],ue={class:"font-medium"},de={class:"text-sm text-gray-500"},ce={key:0,class:"bg-gray-50 p-4 rounded-lg"},ve={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},pe={class:"flex justify-center mb-3"},me=["src"],ge={key:1,class:"w-16 h-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={key:2,class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fe={class:"text-center"},xe={class:"font-medium truncate"},ye={class:"text-sm text-gray-500"},he=["onClick"],we={key:1,class:"space-y-4"},ke={class:"bg-gray-50 p-4 rounded-lg"},_e={class:"space-y-3"},Ce={class:"flex items-center space-x-2"},Fe={class:"flex items-center space-x-2"},Oe={class:"flex items-center space-x-2"},Re={key:0,class:"bg-gray-50 p-4 rounded-lg"},Be={class:"space-y-3"},Ve={key:0},Te={key:1},je={key:2},ze={class:"flex items-center space-x-2"},Le={class:"flex space-x-4"},Me=["disabled"],Ue={key:0},Pe={key:1,class:"flex items-center justify-center"},De={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ee={class:"flex items-center justify-between mb-2"},Ie={class:"text-blue-700"},Se={class:"w-full bg-gray-200 rounded-full h-2.5"},He={class:"mt-2 text-sm text-blue-700"},$e={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Ne={class:"mt-2 text-green-700"},We={class:"mt-3 space-y-2"},Ae=["href","download"],Ge={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ke={class:"mt-2 text-red-700"},qe={key:0,class:"mt-2 text-sm text-gray-600"},Je={key:5,class:"bg-gray-50 p-4 rounded-lg"},Qe={class:"bg-white p-4 rounded-lg border max-h-96 overflow-auto"},Xe={class:"whitespace-pre-wrap"},at={__name:"index",setup(Ye){const j=[{value:"general",label:"通用文字识别",description:"识别图片中的文字内容"},{value:"idcard",label:"身份证识别",description:"识别身份证正反面信息"},{value:"invoice",label:"发票识别",description:"识别各类发票信息"},{value:"table",label:"表格识别",description:"识别表格并转换为Excel"},{value:"pdf",label:"PDF识别",description:"识别扫描PDF中的文字"},{value:"ofd",label:"OFD识别",description:"识别OFD文件中的文字"}],u=r(""),d=r({outputFormat:"text",enableBatch:!0,optimizeLayout:!0,includeImage:!1}),p=r({idcardType:"front",invoiceType:"vat",includeHeaders:!0}),b=r([]),m=te(()=>b.value),w=r(!1),k=r(!1),_=r(!1),O=r(""),v=r(""),y=r(""),h=r(0),f=r(""),x=r([]),C=r(""),U=["1. 选择OCR类型：通用文字识别、身份证识别、发票识别等","2. 上传文件：支持图片、扫描PDF、OFD格式","3. 设置OCR选项：输出格式、批量识别等","4. 对于专项识别，设置相应的专项选项",'5. 点击"开始识别"按钮进行处理',"6. 等待识别完成，系统会自动下载识别结果","7. 查看识别结果，确保内容的准确性"],P=s=>s.split(".").pop().toLowerCase(),D=s=>{if(s===0)return"0 B";const t=1024,l=["B","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,a)).toFixed(2))+" "+l[a]},E=s=>{const t=[".png",".jpg",".jpeg",".webp",".gif"],l=s.toLowerCase();return t.some(a=>l.endsWith(a))},I=s=>s.toLowerCase().endsWith(".pdf"),z=s=>["idcard","invoice","table"].includes(s),S=s=>{b.value.splice(s,1),b.value.length===0&&M()},H=s=>{b.value=s,v.value="",k.value=!1,_.value=!1},$=s=>{v.value=s,y.value=L(s)},L=s=>s.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":s.includes("文件类型")?"请确保上传的文件格式受支持":s.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否清晰，或尝试使用其他文件",N=()=>new Promise(s=>{let t=0;const l=oe(()=>{t+=Math.floor(Math.random()*10)+5,t>100&&(t=100),h.value=t,t<30?f.value="正在分析文件...":t<70?f.value="正在识别文字...":t<90?f.value="正在优化排版...":f.value="正在生成结果...",t===100&&(clearInterval(l),setTimeout(s,500))},500)}),W=async()=>{if(m.length===0){v.value="请选择文件";return}if(!u.value){v.value="请选择OCR类型";return}w.value=!0,v.value="",y.value="",k.value=!1,_.value=!1,h.value=0,f.value="准备识别...",x.value=[],C.value="";try{await N();let s={ocrType:u.value,files:m.value,options:d.value};z(u.value)&&(s.specialOptions=p.value),console.log("OCR参数:",s);const t=j.find(l=>l.value===u.value);O.value=`成功${t.label} ${m.length} 个文件！`,k.value=!0,C.value=`这是模拟的OCR识别结果示例

识别内容：
- 测试文字识别
- 表格内容识别
- 身份证信息识别
- 发票信息识别

识别完成时间：2026-02-05`,_.value=!0,m.forEach((l,a)=>{const R=d.value.outputFormat,G=new Blob(["模拟OCR识别结果内容"],{type:A(R)}),K=URL.createObjectURL(G),q=`ocr_result_${a+1}.${R}`;x.value.push({url:K,filename:q})}),x.value.length>0&&setTimeout(()=>{const l=document.createElement("a");l.href=x.value[0].url,l.download=x.value[0].filename,document.body.appendChild(l),l.click(),document.body.removeChild(l)},1e3)}catch(s){v.value=`识别失败：${s.message||"未知错误"}`,y.value=L(v.value)}finally{w.value=!1}},A=s=>({text:"text/plain",excel:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",word:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",html:"text/html"})[s]||"application/octet-stream",M=()=>{b.value=[],u.value="",d.value={outputFormat:"text",enableBatch:!0,optimizeLayout:!0,includeImage:!1},p.value={idcardType:"front",invoiceType:"vat",includeHeaders:!0},v.value="",y.value="",k.value=!1,_.value=!1,O.value="",h.value=0,f.value="",x.value=[],C.value=""};return(s,t)=>(o(),J(le,{title:"OCR文字识别",description:"集成腾讯云OCR API，支持图片/扫描PDF/OFD转文字/Excel/Word",tips:U},{default:Q(()=>[e("div",ne,[e("div",ae,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold mb-4"},"选择OCR类型",-1)),e("div",re,[(o(),n(B,null,V(j,l=>e("label",{key:l.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[g(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),value:l.value,class:"w-4 h-4 text-blue-600"},null,8,ie),[[X,u.value]]),e("div",null,[e("div",ue,i(l.label),1),e("div",de,i(l.description),1)])])),64))])]),Y(se,{multiple:!0,accept:[".png",".jpg",".jpeg",".pdf",".ofd"],"max-size":100*1024*1024,modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=l=>b.value=l),onFilesChanged:H,onError:$},null,8,["modelValue"]),m.value.length>0?(o(),n("div",ce,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),e("div",ve,[(o(!0),n(B,null,V(m.value,(l,a)=>(o(),n("div",{key:a,class:"bg-white rounded border p-3"},[e("div",pe,[E(l.name)?(o(),n("img",{key:0,src:s.URL.createObjectURL(l),class:"max-h-32 object-contain",alt:"Preview"},null,8,me)):I(l.name)?(o(),n("svg",ge,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):(o(),n("svg",be,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))]),e("div",fe,[e("div",xe,i(l.name),1),e("div",ye,i(P(l.name))+" • "+i(D(l.size)),1)]),e("button",{onClick:R=>S(a),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,he)]))),128))])])):c("",!0),m.value.length>0?(o(),n("div",we,[e("div",ke,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold mb-3"},"OCR选项",-1)),e("div",_e,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"输出格式",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>d.value.outputFormat=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[13]||(t[13]=[e("option",{value:"text"},"纯文本",-1),e("option",{value:"excel"},"Excel",-1),e("option",{value:"word"},"Word",-1),e("option",{value:"html"},"HTML",-1)])],512),[[T,d.value.outputFormat]])]),e("div",null,[e("label",Ce,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>d.value.enableBatch=l),class:"w-4 h-4 text-blue-600"},null,512),[[F,d.value.enableBatch]]),t[15]||(t[15]=e("span",null,"启用批量识别",-1))])]),e("div",null,[e("label",Fe,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>d.value.optimizeLayout=l),class:"w-4 h-4 text-blue-600"},null,512),[[F,d.value.optimizeLayout]]),t[16]||(t[16]=e("span",null,"优化识别结果排版",-1))])]),e("div",null,[e("label",Oe,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>d.value.includeImage=l),class:"w-4 h-4 text-blue-600"},null,512),[[F,d.value.includeImage]]),t[17]||(t[17]=e("span",null,"保留图片内容",-1))])])])]),z(u.value)?(o(),n("div",Re,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold mb-3"},"专项识别选项",-1)),e("div",Be,[u.value==="idcard"?(o(),n("div",Ve,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"身份证类型",-1)),g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>p.value.idcardType=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[19]||(t[19]=[e("option",{value:"front"},"正面",-1),e("option",{value:"back"},"背面",-1),e("option",{value:"both"},"正反面",-1)])],512),[[T,p.value.idcardType]])])):c("",!0),u.value==="invoice"?(o(),n("div",Te,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"发票类型",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>p.value.invoiceType=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[21]||(t[21]=[e("option",{value:"vat"},"增值税发票",-1),e("option",{value:"normal"},"普通发票",-1),e("option",{value:"transport"},"运输发票",-1),e("option",{value:"other"},"其他发票",-1)])],512),[[T,p.value.invoiceType]])])):c("",!0),u.value==="table"?(o(),n("div",je,[e("label",ze,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>p.value.includeHeaders=l),class:"w-4 h-4 text-blue-600"},null,512),[[F,p.value.includeHeaders]]),t[23]||(t[23]=e("span",null,"识别表头",-1))])])):c("",!0)])])):c("",!0)])):c("",!0),e("div",Le,[e("button",{onClick:W,disabled:!m.value.length||!u.value||w.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[w.value?(o(),n("span",Pe,[t[25]||(t[25]=e("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Z(" 识别中... "+i(h.value)+"% ",1)])):(o(),n("span",Ue,"开始识别"))],8,Me),e("button",{onClick:M,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),w.value?(o(),n("div",De,[e("div",Ee,[t[26]||(t[26]=e("h4",{class:"font-semibold text-blue-800"},"识别进度",-1)),e("span",Ie,i(h.value)+"%",1)]),e("div",Se,[e("div",{class:"bg-blue-600 h-2.5 rounded-full",style:ee({width:h.value+"%"})},null,4)]),e("p",He,i(f.value),1)])):c("",!0),k.value?(o(),n("div",$e,[t[27]||(t[27]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h4",{class:"font-semibold text-green-800"},"识别成功")],-1)),e("p",Ne,i(O.value),1),e("div",We,[(o(!0),n(B,null,V(x.value,(l,a)=>(o(),n("a",{key:a,href:l.url,download:l.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载识别结果 "+i(a+1),9,Ae))),128))])])):c("",!0),v.value?(o(),n("div",Ge,[t[28]||(t[28]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("h4",{class:"font-semibold text-red-800"},"识别失败")],-1)),e("p",Ke,i(v.value),1),y.value?(o(),n("p",qe,"建议："+i(y.value),1)):c("",!0)])):c("",!0),_.value&&C.value?(o(),n("div",Je,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold mb-3"},"识别结果预览",-1)),e("div",Qe,[e("pre",Xe,i(C.value),1)])])):c("",!0)])]),_:1}))}};export{at as default};
