import{n as e,p as l,x as a,D as t,F as s,u,z as o,K as n,J as r,a8 as i,H as d,L as v,l as m,k as p,m as c,E as b,I as y}from"./DwDdtX2U.js";import{s as g}from"./Ta3x3s_8.js";import{_ as x}from"./DwL8tNwU.js";import"./DFiMgQNB.js";const f={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},h={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},k=["accept"],w={key:0,class:"mt-4 p-3 bg-gray-50 rounded"},V={class:"font-medium"},z={class:"text-gray-500 ml-2"},M={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},U=["value"],C={class:"group"},Q={class:"mt-3 p-4 border rounded-lg"},I={key:0},F={class:"space-y-3"},_={class:"text-right text-sm text-gray-500"},j={key:1},B={class:"space-y-3"},P={class:"text-right text-sm text-gray-500"},W={class:"mt-4"},A={class:"space-y-3"},H={class:"flex items-center"},R={class:"flex items-center"},$=["disabled"],K={key:0,class:"mt-6"},S={class:"w-full bg-gray-200 rounded-full h-2.5"},D={class:"text-center mt-2 text-gray-600"},E={key:1,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},G={class:"text-green-600 mb-4"},J=["href"],L={key:2,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},N={class:"text-red-600"},O=x({__name:"index",setup(x){const O=p(null),T=p(null),q=p("mp3"),X=p(!1),Y=p(0),Z=p(null),ee=p(null),le=p({audioQuality:80,videoQuality:80,sampleRate:"44100",resolution:"720p",optimizeForWeb:!1,enableCompression:!0}),ae=m(()=>".mp3,.mp4,.wav,.avi,.mov,.flv,.wmv,.mkv,.aac,.ogg"),te=[{value:"mp3",label:"MP3 (音频)",type:"audio"},{value:"mp4",label:"MP4 (视频)",type:"video"},{value:"wav",label:"WAV (音频)",type:"audio"},{value:"avi",label:"AVI (视频)",type:"video"}],se=m(()=>{const e=te.find(e=>e.value===q.value);return e&&"audio"===e.type}),ue=m(()=>{const e=te.find(e=>e.value===q.value);return e&&"video"===e.type}),oe=e=>{const l=e.target.files[0];l&&(T.value=l,ee.value=null)},ne=()=>{T.value=null,O.value.value=""},re=e=>{if(0===e)return"0 Bytes";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB"][l]},ie=e=>{const l=te.find(l=>l.value===e);return l?l.label:e},de=async()=>{if(T.value){X.value=!0,Y.value=0,ee.value=null;try{await new Promise(e=>{const l=g(()=>{Y.value+=5,Y.value>=100&&(clearInterval(l),setTimeout(e,500))},200)}),Z.value={downloadUrl:"#",fileName:T.value.name.replace(/\.[^/.]+$/,`.${q.value}`),fileSize:T.value.size}}catch(e){ee.value="转换失败，请重试"}finally{X.value=!1}}else ee.value="请选择要转换的文件"},ve=()=>{T.value=null,O.value.value="",q.value="mp3",Z.value=null,Y.value=0,ee.value=null};return(m,p)=>(c(),e("div",f,[p[24]||(p[24]=l("h1",{class:"text-2xl font-bold mb-6 text-center"},"音视频格式转换",-1)),p[25]||(p[25]=l("div",{class:"mb-8"},[l("p",{class:"text-gray-600 mb-4"},"支持音视频格式转换、压缩、切割，操作简单快捷")],-1)),l("form",{onSubmit:d(de,["prevent"]),class:"space-y-6"},[l("div",h,[l("input",{type:"file",ref_key:"fileInput",ref:O,class:"hidden",accept:ae.value,onChange:oe},null,40,k),l("button",{type:"button",onClick:p[0]||(p[0]=e=>m.$refs.fileInput.click()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"}," 选择文件 "),p[9]||(p[9]=l("p",{class:"text-gray-500 mt-2"},"支持 MP3、MP4、WAV、AVI、MOV 等格式",-1)),T.value?(c(),e("div",w,[l("span",V,a(T.value.name),1),l("span",z,"("+a(re(T.value.size))+")",1),l("button",{type:"button",onClick:ne,class:"ml-2 text-red-500 hover:text-red-700"}," 移除 ")])):t("",!0)]),l("div",null,[p[10]||(p[10]=l("label",{class:"block text-gray-700 font-medium mb-2"},"转换为",-1)),l("div",M,[(c(),e(s,null,u(te,e=>l("label",{key:e.value,class:b(["flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500 transition duration-200",{"border-blue-500 bg-blue-50":q.value===e.value}])},[o(l("input",{type:"radio",value:e.value,"onUpdate:modelValue":p[1]||(p[1]=e=>q.value=e),class:"mr-2"},null,8,U),[[y,q.value]]),l("span",null,a(e.label),1)],2)),64))])]),l("div",null,[l("details",C,[p[22]||(p[22]=l("summary",{class:"cursor-pointer list-none flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[l("span",{class:"font-medium"},"高级选项"),l("span",{class:"transition-transform duration-300 group-open:rotate-180"},"▼")],-1)),l("div",Q,[se.value?(c(),e("div",I,[p[14]||(p[14]=l("h4",{class:"font-medium mb-3"},"音频设置",-1)),l("div",F,[l("div",null,[p[11]||(p[11]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"音频质量",-1)),o(l("input",{"onUpdate:modelValue":p[2]||(p[2]=e=>le.value.audioQuality=e),type:"range",min:"10",max:"100",class:"w-full"},null,512),[[n,le.value.audioQuality,void 0,{number:!0}]]),l("div",_,a(le.value.audioQuality)+"%",1)]),l("div",null,[p[13]||(p[13]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"采样率",-1)),o(l("select",{"onUpdate:modelValue":p[3]||(p[3]=e=>le.value.sampleRate=e),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...p[12]||(p[12]=[l("option",{value:"44100"},"44.1 kHz (标准)",-1),l("option",{value:"48000"},"48 kHz (高清)",-1),l("option",{value:"22050"},"22.05 kHz (低质量)",-1)])],512),[[r,le.value.sampleRate]])])])])):t("",!0),ue.value?(c(),e("div",j,[p[18]||(p[18]=l("h4",{class:"font-medium mb-3"},"视频设置",-1)),l("div",B,[l("div",null,[p[15]||(p[15]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"视频质量",-1)),o(l("input",{"onUpdate:modelValue":p[4]||(p[4]=e=>le.value.videoQuality=e),type:"range",min:"10",max:"100",class:"w-full"},null,512),[[n,le.value.videoQuality,void 0,{number:!0}]]),l("div",P,a(le.value.videoQuality)+"%",1)]),l("div",null,[p[17]||(p[17]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"分辨率",-1)),o(l("select",{"onUpdate:modelValue":p[5]||(p[5]=e=>le.value.resolution=e),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...p[16]||(p[16]=[l("option",{value:"1080p"},"1080p (高清)",-1),l("option",{value:"720p"},"720p (标清)",-1),l("option",{value:"480p"},"480p (低清)",-1)])],512),[[r,le.value.resolution]])])])])):t("",!0),l("div",W,[p[21]||(p[21]=l("h4",{class:"font-medium mb-3"},"通用设置",-1)),l("div",A,[l("label",H,[o(l("input",{type:"checkbox","onUpdate:modelValue":p[6]||(p[6]=e=>le.value.optimizeForWeb=e),class:"mr-2"},null,512),[[i,le.value.optimizeForWeb]]),p[19]||(p[19]=l("span",null,"优化为web使用",-1))]),l("label",R,[o(l("input",{type:"checkbox","onUpdate:modelValue":p[7]||(p[7]=e=>le.value.enableCompression=e),class:"mr-2"},null,512),[[i,le.value.enableCompression]]),p[20]||(p[20]=l("span",null,"启用压缩",-1))])])])])])]),l("button",{type:"submit",disabled:!T.value||X.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},a(X.value?"转换中...":"开始转换"),9,$)],32),X.value?(c(),e("div",K,[l("div",S,[l("div",{class:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:v({width:Y.value+"%"})},null,4)]),l("p",D,a(Y.value)+"%",1)])):t("",!0),Z.value?(c(),e("div",E,[p[23]||(p[23]=l("h3",{class:"font-semibold text-green-700 mb-2"},"转换成功",-1)),l("p",G,"文件已成功转换为 "+a(ie(q.value))+" 格式",1),l("a",{href:Z.value.downloadUrl,class:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300",download:""}," 下载文件 ",8,J),l("button",{onClick:ve,class:"ml-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-300"}," 再次转换 ")])):t("",!0),ee.value?(c(),e("div",L,[l("p",N,a(ee.value),1),l("button",{onClick:p[8]||(p[8]=e=>ee.value=null),class:"mt-2 text-red-600 hover:text-red-800 text-sm"}," 关闭 ")])):t("",!0)]))}},[["__scopeId","data-v-cba78580"]]);export{O as default};
