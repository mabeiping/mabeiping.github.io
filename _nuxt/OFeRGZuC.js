import{_ as C}from"./BABs0YC5.js";import{D as V,w as L,o as v,a as e,c as g,i as b,h as r,u as l,t as x,p,q as c,v as w,s as k}from"./CONUlYrd.js";import{u as R}from"./8Q1XjmlR.js";import"./Bu46YPbD.js";import"./Df9yIBho.js";const _={class:"space-y-6"},B={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors"},z={class:"space-y-4"},E={key:0,class:"text-sm text-text-secondary"},N={class:"space-y-4"},S={class:"grid grid-cols-2 gap-4"},T=["disabled"],j={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},A={__name:"encrypt",setup(I){const y=r(null),n=r(null),a=r(""),i=r(""),m=r("128"),f=r("none"),u=r(!1),d=r(null),h=()=>{y.value?.click()},D=o=>{const t=o.target.files[0];t&&t.type==="application/pdf"&&(n.value=t)},F=async()=>{if(!n.value){alert("请先选择PDF文件");return}if(!a.value){alert("请输入密码");return}if(a.value!==i.value){alert("两次输入的密码不一致");return}u.value=!0;try{await new Promise(o=>setTimeout(o,2e3)),d.value={fileName:`encrypted_${n.value.name}`,originalSize:n.value.size}}catch(o){console.error("Encryption error:",o),alert("加密失败，请重试")}finally{u.value=!1}},P=()=>{if(!d.value||!n.value)return;const o=document.createElement("a");o.href=URL.createObjectURL(n.value),o.download=d.value.fileName,o.click(),URL.revokeObjectURL(o.href)};return R({title:"PDF加密 - Office Tools",meta:[{name:"description",content:"为PDF文件添加密码保护"}]}),(o,t)=>{const U=C;return v(),V(U,{title:"PDF加密",description:"为PDF文件添加密码保护"},{default:L(()=>[e("div",_,[e("div",B,[e("input",{ref_key:"fileInput",ref:y,type:"file",accept:".pdf",class:"hidden",onChange:D},null,544),e("div",z,[t[4]||(t[4]=e("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),e("button",{onClick:h,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors"}," 选择PDF文件 "),l(n)?(v(),g("p",E,x(l(n).name),1)):b("",!0)])]),e("div",N,[t[11]||(t[11]=e("h3",{class:"text-lg font-bold text-text-primary"},"加密设置",-1)),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"密码",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c(a)?a.value=s:null),type:"password",placeholder:"请输入密码",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[w,l(a)]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"确认密码",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c(i)?i.value=s:null),type:"password",placeholder:"请再次输入密码",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[w,l(i)]])]),e("div",S,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"加密级别",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>c(m)?m.value=s:null),class:"w-full px-3 py-2 border rounded-lg focus:outline-none"},[...t[7]||(t[7]=[e("option",{value:"128"},"128位（标准）",-1),e("option",{value:"256"},"256位（高安全）",-1)])],512),[[k,l(m)]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"权限",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>c(f)?f.value=s:null),class:"w-full px-3 py-2 border rounded-lg focus:outline-none"},[...t[9]||(t[9]=[e("option",{value:"none"},"无限制",-1),e("option",{value:"print"},"允许打印",-1),e("option",{value:"copy"},"允许复制",-1),e("option",{value:"all"},"全部允许",-1)])],512),[[k,l(f)]])])]),e("button",{onClick:F,disabled:l(u)||!l(n),class:"w-full py-3 bg-gradient-to-r from-primary to-primary-light text-white rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},x(l(u)?"加密中...":"开始加密"),9,T)]),l(d)?(v(),g("div",j,[t[12]||(t[12]=e("h3",{class:"font-bold text-green-800 mb-2"},"加密成功！",-1)),e("button",{onClick:P,class:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," 下载加密后的文件 ")])):b("",!0)])]),_:1})}}};export{A as default};
