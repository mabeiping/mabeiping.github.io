import{i as N,w as U,o as d,a as t,c as p,t as x,f as v,j as B,p as z,k as I,d as $,b as A,l as n}from"./-R7zUpUx.js";import{_ as E}from"./1SagYtif.js";import{P as L,a as T}from"./CPH4GR76.js";import{_ as H}from"./DlAUqK2U.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./Dh5_xY7C.js";const O={class:"space-y-6"},q={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"},G={class:"flex flex-col items-center justify-center"},J={key:0,class:"mt-4"},K={class:"flex items-center justify-between bg-gray-100 p-3 rounded"},Q={class:"flex items-center space-x-3"},W={class:"text-sm font-medium"},X={class:"bg-white p-4 rounded-lg shadow"},Y={class:"space-y-3"},Z={class:"flex space-x-4"},ee={class:"flex-1"},te={key:0,class:"flex-1"},le={key:0,class:"mt-6"},se=["disabled"],oe={key:0,class:"mr-2 animate-spin"},ae={key:1,class:"mt-4"},ne={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},re={class:"space-y-2 text-sm text-green-700"},ie={key:0},ue={__name:"split",setup(de){const i=n([]),w=n(null),u=n("range"),f=n(""),c=n(!1),m=n(0),k=n(null),g=n(null),b=n(0),y=n(0),M=s=>new Promise(e=>{const o=new FileReader;o.onload=C=>{const h=C.target.result,l=new Uint8Array(h);let _=0;for(let a=0;a<l.length-100;a++)if(l[a]===47&&l[a+1]===67&&l[a+2]===111&&l[a+3]===117&&l[a+4]===110&&l[a+5]===116){let r=a+6;for(;r<l.length&&(l[r]<48||l[r]>57);)r++;let P="";for(;r<l.length&&l[r]>=48&&l[r]<=57;)P+=String.fromCharCode(l[r]),r++;if(P){_=parseInt(P);break}}e(_)},o.onerror=()=>{e(0)},o.readAsArrayBuffer(s)}),D=async s=>{const e=s.target.files[0];if(e){i.value=[e];const o=await M(e);y.value=o}else i.value=[],y.value=0},S=()=>{i.value=[],y.value=0,w.value&&(w.value.value="")},j=()=>{console.log("处理开始")},F=s=>{console.log("处理结束:",s)},R=async()=>{if(i.value.length!==0){c.value=!0,m.value=0,k.value=null,g.value=null,b.value=0,j();try{m.value=30;const s=await T.pdfSplit({file:i.value[0],splitMode:u.value,pageRange:f.value});m.value=100,setTimeout(()=>{c.value=!1;const e=s,o=URL.createObjectURL(e);if(g.value=o,u.value==="range"){const C=f.value.split(/[,，\s]+/).filter(l=>l.trim()!=="");let h=0;C.forEach(l=>{if(l.includes("-")){const[_,a]=l.split("-").map(Number);h+=a-_+1}else h+=1}),b.value=1}else b.value=y.value||0;V(),F({success:!0,url:o,fileCount:b.value})},500)}catch(s){c.value=!1,k.value=s.message,F({success:!1,error:s.message})}}},V=()=>{if(!g.value)return;const s=u.value==="range"?`split_${f.value}.pdf`:"split_each.zip",e=document.createElement("a");e.href=g.value,e.download=s,document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(s,e)=>(d(),N(E,{title:"PDF拆分",description:"将PDF文件按页面范围或每页单独拆分","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择拆分方式：","   • 指定页面范围：输入要拆分的页面范围（例如：1-3,5-7）","   • 每页单独拆分：将PDF的每一页拆分为单独的文件","4. 页面范围输入说明：","   • 支持单个页码：如 '5'","   • 支持页码范围：如 '1-3'","   • 支持多个范围：如 '1-3,5-7'","   • 支持中英文逗号和空格作为分隔符","5. 点击'开始拆分'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看拆分结果信息，包括成功拆分的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:U(()=>[t("div",O,[t("div",q,[t("div",G,[e[3]||(e[3]=t("svg",{class:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e[4]||(e[4]=t("h3",{class:"text-lg font-medium mb-2"},"选择PDF文件",-1)),e[5]||(e[5]=t("p",{class:"text-gray-500 mb-4"},"支持单个PDF文件，最大100MB",-1)),t("input",{type:"file",ref_key:"fileInput",ref:w,onChange:D,accept:".pdf",class:"hidden"},null,544),t("button",{onClick:e[0]||(e[0]=o=>s.$refs.fileInput.click()),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 选择文件 ")]),i.value.length>0?(d(),p("div",J,[t("div",K,[t("div",Q,[e[6]||(e[6]=t("svg",{class:"w-6 h-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zM2 12a1 1 0 110-2 1 1 0 010 2zm14 0a1 1 0 110-2 1 1 0 010 2z","clip-rule":"evenodd"})],-1)),t("span",W,x(i.value[0].name),1)]),t("button",{onClick:S,class:"text-red-500 hover:text-red-700 text-sm"}," 移除 ")])])):v("",!0)]),t("div",X,[e[10]||(e[10]=t("h3",{class:"font-semibold mb-3"},"拆分设置",-1)),t("div",Y,[t("div",Z,[t("div",ee,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分方式",-1)),B(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[7]||(e[7]=[t("option",{value:"range"},"指定页面范围",-1),t("option",{value:"each"},"每页单独拆分",-1)])],512),[[z,u.value]])]),u.value==="range"?(d(),p("div",te,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面范围 (例如: 1-3,5-7)",-1)),B(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入页面范围"},null,512),[[I,f.value]])])):v("",!0)])])]),i.value.length>0?(d(),p("div",le,[t("button",{onClick:R,disabled:c.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[c.value?(d(),p("span",oe,"⏳")):v("",!0),$(" "+x(c.value?"处理中...":"开始拆分"),1)],8,se)])):v("",!0),c.value?(d(),p("div",ae,[A(L,{progress:m.value,label:`处理进度: ${m.value}%`,error:k.value},null,8,["progress","label","error"])])):v("",!0),g.value?(d(),p("div",ne,[e[12]||(e[12]=t("h3",{class:"font-semibold text-green-700 mb-2"},"拆分成功",-1)),t("div",re,[t("p",null,"成功拆分："+x(b.value)+" 个文件",1),t("p",null,"拆分方式："+x(u.value==="range"?"指定页面范围":"每页单独拆分"),1),u.value==="range"?(d(),p("p",ie,"页面范围："+x(f.value),1)):v("",!0),e[11]||(e[11]=t("p",null,"文件已自动开始下载",-1))])])):v("",!0)])]),_:1}))}},xe=H(ue,[["__scopeId","data-v-ad781289"]]);export{xe as default};
