import{$ as e,w as l,m as a,p as s,q as t,z as o,I as n,K as r,x as u,a8 as i,n as d,v as c,D as m,k as p,l as v}from"./DwDdtX2U.js";import{_ as g}from"./CFdA-A2g.js";import{G as x}from"./CiXH2Qpk.js";import"./C3WxCecE.js";import"./Dq87FbFi.js";import"./B7n04RKk.js";import"./DgXBCkKa.js";const b={class:"space-y-6"},h={class:"bg-gray-50 p-4 rounded-lg"},f={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},y={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},w={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},k={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},M={class:"space-y-4"},j={class:"flex justify-between text-sm text-gray-500 mt-1"},U={class:"space-y-2"},V={class:"flex items-center space-x-2"},z={class:"flex items-center space-x-2"},F={class:"flex items-center space-x-2"},C={class:"flex items-center space-x-2"},B={class:"flex space-x-4"},D=["disabled"],P={key:0},L={key:1,class:"flex items-center justify-center"},$={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},_={class:"mt-2 text-green-700"},R={key:0,class:"mt-1 text-green-700 text-sm"},S={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},E={class:"mt-2 text-red-700"},G={__name:"compress",setup(G){const K=p("medium"),O=p(70),T=p({images:!0,fonts:!0,content:!0,removeMetadata:!0}),q=p([]),A=v(()=>q.value[0]||null),H=p(!1),I=p(!1),J=p(""),N=p(""),Q=p(null),W=["1. 选择压缩级别：低压缩、中压缩或高压缩","2. 调整图片质量滑块，设置图片压缩程度","3. 选择需要的压缩选项：压缩图片、优化字体、压缩内容、移除元数据",'4. 点击"选择文件"按钮上传PDF文件','5. 点击"开始压缩"按钮进行处理',"6. 处理完成后，系统会自动下载压缩后的PDF文件"],X=e=>{if(0===e)return"0 Bytes";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB"][l]},Y=e=>{},Z=e=>{N.value=e},ee=async()=>{if(A.value){H.value=!0,N.value="",I.value=!1,Q.value=null;try{await new Promise(e=>setTimeout(e,2e3));const e=A.value.size,l="low"===K.value?.8:"medium"===K.value?.6:.4,a=Math.round(e*l),s=Math.round(100*(1-l));Q.value={originalSize:e,compressedSize:a,savings:s},J.value=`PDF文件压缩成功！文件大小从 ${X(e)} 减小到 ${X(a)}，节省了 ${s}% 的空间。`,I.value=!0,setTimeout(()=>{const e=new Blob(["模拟压缩后的PDF文件内容"],{type:"application/pdf"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=`compressed_${A.value.name}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},1e3)}catch(e){N.value=`压缩失败：${e.message||"未知错误"}`}finally{H.value=!1}}else N.value="请选择PDF文件"},le=()=>{K.value="medium",O.value=70,T.value={images:!0,fonts:!0,content:!0,removeMetadata:!0},removeFile(),N.value="",I.value=!1,J.value="",Q.value=null};return(p,v)=>(a(),e(g,{title:"PDF压缩",description:"减小PDF文件大小，便于传输和存储",tips:W},{default:l(()=>[s("div",b,[t(x,{multiple:!1,accept:".pdf","max-size":104857600,modelValue:q.value,"onUpdate:modelValue":v[0]||(v[0]=e=>q.value=e),onFilesChanged:Y,onError:Z},null,8,["modelValue"]),s("div",h,[v[12]||(v[12]=s("h3",{class:"text-lg font-semibold mb-4"},"压缩级别",-1)),s("div",f,[s("label",y,[o(s("input",{type:"radio","onUpdate:modelValue":v[1]||(v[1]=e=>K.value=e),value:"low",class:"w-4 h-4 text-blue-600"},null,512),[[n,K.value]]),v[9]||(v[9]=s("div",null,[s("div",{class:"font-medium"},"低压缩"),s("div",{class:"text-sm text-gray-500"},"文件质量高，压缩效果小")],-1))]),s("label",w,[o(s("input",{type:"radio","onUpdate:modelValue":v[2]||(v[2]=e=>K.value=e),value:"medium",class:"w-4 h-4 text-blue-600"},null,512),[[n,K.value]]),v[10]||(v[10]=s("div",null,[s("div",{class:"font-medium"},"中压缩"),s("div",{class:"text-sm text-gray-500"},"平衡质量和压缩效果")],-1))]),s("label",k,[o(s("input",{type:"radio","onUpdate:modelValue":v[3]||(v[3]=e=>K.value=e),value:"high",class:"w-4 h-4 text-blue-600"},null,512),[[n,K.value]]),v[11]||(v[11]=s("div",null,[s("div",{class:"font-medium"},"高压缩"),s("div",{class:"text-sm text-gray-500"},"文件质量降低，压缩效果明显")],-1))])])]),s("div",M,[s("div",null,[v[15]||(v[15]=s("h3",{class:"text-lg font-semibold mb-2"},"图片质量",-1)),o(s("input",{"onUpdate:modelValue":v[4]||(v[4]=e=>O.value=e),type:"range",min:"10",max:"100",step:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[r,O.value]]),s("div",j,[v[13]||(v[13]=s("span",null,"低质量 (10%)",-1)),s("span",null,"当前: "+u(O.value)+"%",1),v[14]||(v[14]=s("span",null,"高质量 (100%)",-1))])]),s("div",null,[v[20]||(v[20]=s("h3",{class:"text-lg font-semibold mb-2"},"压缩选项",-1)),s("div",U,[s("label",V,[o(s("input",{type:"checkbox","onUpdate:modelValue":v[5]||(v[5]=e=>T.value.images=e),class:"w-4 h-4 text-blue-600"},null,512),[[i,T.value.images]]),v[16]||(v[16]=s("span",null,"压缩图片",-1))]),s("label",z,[o(s("input",{type:"checkbox","onUpdate:modelValue":v[6]||(v[6]=e=>T.value.fonts=e),class:"w-4 h-4 text-blue-600"},null,512),[[i,T.value.fonts]]),v[17]||(v[17]=s("span",null,"优化字体",-1))]),s("label",F,[o(s("input",{type:"checkbox","onUpdate:modelValue":v[7]||(v[7]=e=>T.value.content=e),class:"w-4 h-4 text-blue-600"},null,512),[[i,T.value.content]]),v[18]||(v[18]=s("span",null,"压缩内容",-1))]),s("label",C,[o(s("input",{type:"checkbox","onUpdate:modelValue":v[8]||(v[8]=e=>T.value.removeMetadata=e),class:"w-4 h-4 text-blue-600"},null,512),[[i,T.value.removeMetadata]]),v[19]||(v[19]=s("span",null,"移除元数据",-1))])])])]),s("div",B,[s("button",{onClick:ee,disabled:!A.value||H.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[H.value?(a(),d("span",L,[...v[21]||(v[21]=[s("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" 处理中... ",-1)])])):(a(),d("span",P,"开始压缩"))],8,D),s("button",{onClick:le,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),I.value?(a(),d("div",$,[v[22]||(v[22]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),s("h4",{class:"font-semibold text-green-800"},"压缩成功")],-1)),s("p",_,u(J.value),1),Q.value?(a(),d("p",R," 原始大小: "+u(X(Q.value.originalSize))+" → 压缩后: "+u(X(Q.value.compressedSize))+" (节省 "+u(Q.value.savings)+"%) ",1)):m("",!0)])):m("",!0),N.value?(a(),d("div",S,[v[23]||(v[23]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),s("h4",{class:"font-semibold text-red-800"},"压缩失败")],-1)),s("p",E,u(N.value),1)])):m("",!0)])]),_:1}))}};export{G as default};
