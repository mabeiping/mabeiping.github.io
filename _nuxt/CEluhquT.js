import{n as e,p as l,x as a,D as t,F as s,u as n,z as r,a8 as u,K as o,H as d,L as i,l as c,k as v,m,E as b,I as p}from"./DwDdtX2U.js";import{s as g}from"./Ta3x3s_8.js";import{_ as y}from"./DwL8tNwU.js";import"./DFiMgQNB.js";const x={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},f={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},h=["accept"],k={key:0,class:"mt-4 p-3 bg-gray-50 rounded"},w={class:"font-medium"},M={class:"text-gray-500 ml-2"},S={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},j=["value"],C={class:"group"},z={class:"mt-3 p-4 border rounded-lg"},L={class:"space-y-3"},P={class:"flex items-center"},U={key:0},_={class:"flex items-center"},B=["disabled"],I={key:0,class:"mt-6"},J={class:"w-full bg-gray-200 rounded-full h-2.5"},N={class:"text-center mt-2 text-gray-600"},V={key:1,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},A={class:"text-green-600 mb-4"},F=["href"],O={key:2,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},X={class:"text-red-600"},Y=y({__name:"index",setup(y){const Y=v(null),$=v(null),K=v("json"),D=v(!1),E=v(0),G=v(null),H=v(null),T=v({prettyPrint:!0,indentSize:2,includeComments:!0}),q=c(()=>".yaml,.yml,.json,.xml"),Q=[{value:"json",label:"JSON",description:"JavaScript对象表示法"},{value:"yaml",label:"YAML",description:"人类友好的数据序列化格式"},{value:"xml",label:"XML",description:"可扩展标记语言"}],R=e=>{const l=e.target.files[0];l&&($.value=l,H.value=null)},W=()=>{$.value=null,Y.value.value=""},Z=e=>{if(0===e)return"0 Bytes";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB"][l]},ee=e=>{const l=Q.find(l=>l.value===e);return l?l.label:e},le=async()=>{if($.value){D.value=!0,E.value=0,H.value=null;try{await new Promise(e=>{const l=g(()=>{E.value+=5,E.value>=100&&(clearInterval(l),setTimeout(e,500))},200)}),G.value={downloadUrl:"#",fileName:$.value.name.replace(/\.[^/.]+$/,`.${K.value}`),fileSize:$.value.size}}catch(e){H.value="转换失败，请重试"}finally{D.value=!1}}else H.value="请选择要转换的文件"},ae=()=>{$.value=null,Y.value.value="",K.value="json",G.value=null,E.value=0,H.value=null,T.value={prettyPrint:!0,indentSize:2,includeComments:!0}};return(c,v)=>(m(),e("div",x,[v[13]||(v[13]=l("h1",{class:"text-2xl font-bold mb-6 text-center"},"配置文件格式转换",-1)),v[14]||(v[14]=l("div",{class:"mb-8"},[l("p",{class:"text-gray-600 mb-4"},"支持YAML/JSON/XML等配置格式互转，操作简单快捷")],-1)),l("form",{onSubmit:d(le,["prevent"]),class:"space-y-6"},[l("div",f,[l("input",{type:"file",ref_key:"fileInput",ref:Y,class:"hidden",accept:q.value,onChange:R},null,40,h),l("button",{type:"button",onClick:v[0]||(v[0]=e=>c.$refs.fileInput.click()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"}," 选择文件 "),v[6]||(v[6]=l("p",{class:"text-gray-500 mt-2"},"支持 YAML、JSON、XML 等格式",-1)),$.value?(m(),e("div",k,[l("span",w,a($.value.name),1),l("span",M,"("+a(Z($.value.size))+")",1),l("button",{type:"button",onClick:W,class:"ml-2 text-red-500 hover:text-red-700"}," 移除 ")])):t("",!0)]),l("div",null,[v[7]||(v[7]=l("label",{class:"block text-gray-700 font-medium mb-2"},"转换为",-1)),l("div",S,[(m(),e(s,null,n(Q,e=>l("label",{key:e.value,class:b(["flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500 transition duration-200",{"border-blue-500 bg-blue-50":K.value===e.value}])},[r(l("input",{type:"radio",value:e.value,"onUpdate:modelValue":v[1]||(v[1]=e=>K.value=e),class:"mr-2"},null,8,j),[[p,K.value]]),l("span",null,a(e.label),1)],2)),64))])]),l("div",null,[l("details",C,[v[11]||(v[11]=l("summary",{class:"cursor-pointer list-none flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[l("span",{class:"font-medium"},"高级选项"),l("span",{class:"transition-transform duration-300 group-open:rotate-180"},"▼")],-1)),l("div",z,[l("div",L,[l("label",P,[r(l("input",{type:"checkbox","onUpdate:modelValue":v[2]||(v[2]=e=>T.value.prettyPrint=e),class:"mr-2"},null,512),[[u,T.value.prettyPrint]]),v[8]||(v[8]=l("span",null,"美化输出",-1))]),T.value.prettyPrint?(m(),e("div",U,[v[9]||(v[9]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"缩进空格数",-1)),r(l("input",{"onUpdate:modelValue":v[3]||(v[3]=e=>T.value.indentSize=e),type:"number",min:"2",max:"8",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[o,T.value.indentSize,void 0,{number:!0}]])])):t("",!0),l("label",_,[r(l("input",{type:"checkbox","onUpdate:modelValue":v[4]||(v[4]=e=>T.value.includeComments=e),class:"mr-2"},null,512),[[u,T.value.includeComments]]),v[10]||(v[10]=l("span",null,"包含注释",-1))])])])])]),l("button",{type:"submit",disabled:!$.value||D.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},a(D.value?"转换中...":"开始转换"),9,B)],32),D.value?(m(),e("div",I,[l("div",J,[l("div",{class:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:i({width:E.value+"%"})},null,4)]),l("p",N,a(E.value)+"%",1)])):t("",!0),G.value?(m(),e("div",V,[v[12]||(v[12]=l("h3",{class:"font-semibold text-green-700 mb-2"},"转换成功",-1)),l("p",A,"文件已成功转换为 "+a(ee(K.value))+" 格式",1),l("a",{href:G.value.downloadUrl,class:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300",download:""}," 下载文件 ",8,F),l("button",{onClick:ae,class:"ml-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-300"}," 再次转换 ")])):t("",!0),H.value?(m(),e("div",O,[l("p",X,a(H.value),1),l("button",{onClick:v[5]||(v[5]=e=>H.value=null),class:"mt-2 text-red-600 hover:text-red-800 text-sm"}," 关闭 ")])):t("",!0)]))}},[["__scopeId","data-v-1d0c5929"]]);export{Y as default};
