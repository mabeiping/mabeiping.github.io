import{$ as e,w as l,m as a,p as t,q as s,n as o,F as u,u as r,x as n,D as i,z as d,J as c,K as v,a8 as m,v as p,L as g,k as b,l as x}from"./DwDdtX2U.js";import{_ as h}from"./CFdA-A2g.js";import{G as f}from"./CiXH2Qpk.js";import{s as y}from"./vp7J0J8P.js";import"./C3WxCecE.js";import"./Dq87FbFi.js";import"./B7n04RKk.js";import"./DgXBCkKa.js";const w={class:"space-y-6"},k={key:0,class:"bg-gray-50 p-4 rounded-lg"},j={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},U={class:"flex justify-center mb-3"},C=["src"],V={class:"text-center"},L={class:"font-medium truncate"},M={class:"text-sm text-gray-500"},R={key:0,class:"text-sm text-gray-500"},B=["onClick"],P={key:1,class:"space-y-4"},z={class:"bg-gray-50 p-4 rounded-lg"},$={class:"space-y-3"},q={key:0,class:"space-y-2"},G={class:"grid grid-cols-2 gap-2"},A={class:"flex items-center space-x-2"},F={key:1},_={class:"text-right text-sm text-gray-500"},D={key:2},E={class:"bg-gray-50 p-4 rounded-lg"},H={class:"space-y-3"},J={key:0},O={class:"text-right text-sm text-gray-500"},I={class:"flex space-x-4"},K=["disabled"],N={key:0},T={key:1,class:"flex items-center justify-center"},W={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Q={class:"flex items-center justify-between mb-2"},S={class:"text-blue-700"},X={class:"w-full bg-gray-200 rounded-full h-2.5"},Y={class:"mt-2 text-sm text-blue-700"},Z={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ee={class:"mt-2 text-green-700"},le={class:"mt-3 space-y-2"},ae=["href","download"],te={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},se={class:"mt-2 text-red-700"},oe={key:0,class:"mt-2 text-sm text-gray-600"},ue={__name:"index",setup(ue){const re=b({mode:"pixels",width:800,height:600,maintainAspectRatio:!0,percentage:100,preset:"1920x1080"}),ne=b({format:"same",quality:90}),ie=b([]),de=x(()=>ie.value),ce=b([]),ve=b(!1),me=b(!1),pe=b(""),ge=b(""),be=b(""),xe=b(0),he=b(""),fe=b([]),ye=["1. 上传图片：支持PNG、JPG和WebP格式，可批量上传","2. 选择调整模式：按像素、按百分比或预设尺寸","3. 设置调整参数：根据选择的模式设置相应的参数","4. 配置输出设置：选择输出格式和质量",'5. 点击"开始调整"按钮进行处理',"6. 等待处理完成，下载调整后的图片"],we=e=>e.split(".").pop().toLowerCase(),ke=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},je=e=>new Promise(l=>{const a=new Image;a.onload=()=>{l({width:a.width,height:a.height})},a.onerror=()=>{l({width:0,height:0})},a.src=URL.createObjectURL(e)}),Ue=async e=>{ie.value=e,ce.value=[];for(const l of e){const e=await je(l);ce.value.push(e)}ge.value="",me.value=!1},Ce=e=>{ge.value=e,be.value=Ve(e)},Ve=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Le=async()=>{if(0!==de.length){ve.value=!0,ge.value="",be.value="",me.value=!1,xe.value=0,he.value="准备处理...",fe.value=[];try{await new Promise(e=>{let l=0;const a=y(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),xe.value=l,he.value=l<30?"正在分析图片...":l<60?"正在计算新尺寸...":l<90?"正在调整图片大小...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});de.value,re.value,ne.value;pe.value=`成功调整 ${de.length} 个图片的尺寸！`,me.value=!0,de.forEach((e,l)=>{const a=we(e.name),t="same"===ne.value.format?a:ne.value.format,s=new Blob(["模拟调整尺寸后的图片内容"],{type:`image/${t}`}),o=URL.createObjectURL(s),u=`resized_${e.name.replace(/\.[^/.]+$/,`.${t}`)}`;fe.value.push({url:o,filename:u})}),fe.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=fe.value[0].url,e.download=fe.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){ge.value=`处理失败：${e.message||"未知错误"}`,be.value=Ve(ge.value)}finally{ve.value=!1}}else ge.value="请选择文件"},Me=()=>{ie.value=[],ce.value=[],re.value={mode:"pixels",width:800,height:600,maintainAspectRatio:!0,percentage:100,preset:"1920x1080"},ne.value={format:"same",quality:90},ge.value="",be.value="",me.value=!1,pe.value="",xe.value=0,he.value="",fe.value=[]};return(b,x)=>(a(),e(h,{title:"图片尺寸调整",description:"调整图片大小，保持或改变宽高比",tips:ye},{default:l(()=>[t("div",w,[s(f,{multiple:!0,accept:[".png",".jpg",".jpeg",".webp"],"max-size":104857600,modelValue:ie.value,"onUpdate:modelValue":x[0]||(x[0]=e=>ie.value=e),onFilesChanged:Ue,onError:Ce},null,8,["modelValue"]),de.value.length>0?(a(),o("div",k,[x[9]||(x[9]=t("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),t("div",j,[(a(!0),o(u,null,r(de.value,(e,l)=>(a(),o("div",{key:l,class:"bg-white rounded border p-3"},[t("div",U,[t("img",{src:b.URL.createObjectURL(e),class:"max-h-32 object-contain",alt:"Preview"},null,8,C)]),t("div",V,[t("div",L,n(e.name),1),t("div",M,n(we(e.name))+" • "+n(ke(e.size)),1),ce.value[l]?(a(),o("div",R,n(ce.value[l].width)+"x"+n(ce.value[l].height)+"px ",1)):i("",!0)]),t("button",{onClick:e=>(e=>{ie.value.splice(e,1),ce.value.splice(e,1),0===ie.value.length&&Me()})(l),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,B)]))),128))])])):i("",!0),de.value.length>0?(a(),o("div",P,[t("div",z,[x[15]||(x[15]=t("h3",{class:"text-lg font-semibold mb-3"},"调整设置",-1)),t("div",$,[t("div",null,[x[11]||(x[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"调整模式",-1)),d(t("select",{"onUpdate:modelValue":x[1]||(x[1]=e=>re.value.mode=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[10]||(x[10]=[t("option",{value:"pixels"},"按像素调整",-1),t("option",{value:"percentage"},"按百分比调整",-1),t("option",{value:"preset"},"预设尺寸",-1)])],512),[[c,re.value.mode]])]),"pixels"===re.value.mode?(a(),o("div",q,[t("div",G,[d(t("input",{"onUpdate:modelValue":x[2]||(x[2]=e=>re.value.width=e),type:"number",placeholder:"宽度 (px)",class:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,re.value.width,void 0,{number:!0}]]),d(t("input",{"onUpdate:modelValue":x[3]||(x[3]=e=>re.value.height=e),type:"number",placeholder:"高度 (px)",class:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,re.value.height,void 0,{number:!0}]])]),t("div",null,[t("label",A,[d(t("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=e=>re.value.maintainAspectRatio=e),class:"w-4 h-4 text-blue-600"},null,512),[[m,re.value.maintainAspectRatio]]),x[12]||(x[12]=t("span",null,"保持宽高比",-1))])])])):i("",!0),"percentage"===re.value.mode?(a(),o("div",F,[d(t("input",{"onUpdate:modelValue":x[5]||(x[5]=e=>re.value.percentage=e),type:"range",min:"10",max:"200",class:"w-full"},null,512),[[v,re.value.percentage,void 0,{number:!0}]]),t("div",_,n(re.value.percentage)+"%",1)])):i("",!0),"preset"===re.value.mode?(a(),o("div",D,[x[14]||(x[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"预设尺寸",-1)),d(t("select",{"onUpdate:modelValue":x[6]||(x[6]=e=>re.value.preset=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[13]||(x[13]=[t("option",{value:"1920x1080"},"1920x1080 (Full HD)",-1),t("option",{value:"1280x720"},"1280x720 (HD)",-1),t("option",{value:"800x600"},"800x600 (标准)",-1),t("option",{value:"600x600"},"600x600 (正方形)",-1),t("option",{value:"400x400"},"400x400 (小正方形)",-1),t("option",{value:"300x300"},"300x300 (缩略图)",-1),t("option",{value:"1080x1920"},"1080x1920 (竖屏)",-1)])],512),[[c,re.value.preset]])])):i("",!0)])]),t("div",E,[x[19]||(x[19]=t("h3",{class:"text-lg font-semibold mb-3"},"输出设置",-1)),t("div",H,[t("div",null,[x[17]||(x[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"输出格式",-1)),d(t("select",{"onUpdate:modelValue":x[7]||(x[7]=e=>ne.value.format=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[16]||(x[16]=[t("option",{value:"same"},"保持原格式",-1),t("option",{value:"png"},"PNG",-1),t("option",{value:"jpg"},"JPG",-1),t("option",{value:"webp"},"WebP",-1)])],512),[[c,ne.value.format]])]),"jpg"===ne.value.format||"webp"===ne.value.format?(a(),o("div",J,[x[18]||(x[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"输出质量",-1)),d(t("input",{"onUpdate:modelValue":x[8]||(x[8]=e=>ne.value.quality=e),type:"range",min:"10",max:"100",class:"w-full"},null,512),[[v,ne.value.quality,void 0,{number:!0}]]),t("div",O,n(ne.value.quality)+"%",1)])):i("",!0)])])])):i("",!0),t("div",I,[t("button",{onClick:Le,disabled:!de.value.length||ve.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[ve.value?(a(),o("span",T,[x[20]||(x[20]=t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),p(" 处理中... "+n(xe.value)+"% ",1)])):(a(),o("span",N,"开始调整"))],8,K),t("button",{onClick:Me,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),ve.value?(a(),o("div",W,[t("div",Q,[x[21]||(x[21]=t("h4",{class:"font-semibold text-blue-800"},"处理进度",-1)),t("span",S,n(xe.value)+"%",1)]),t("div",X,[t("div",{class:"bg-blue-600 h-2.5 rounded-full",style:g({width:xe.value+"%"})},null,4)]),t("p",Y,n(he.value),1)])):i("",!0),me.value?(a(),o("div",Z,[x[22]||(x[22]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"处理成功")],-1)),t("p",ee,n(pe.value),1),t("div",le,[(a(!0),o(u,null,r(fe.value,(e,l)=>(a(),o("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载调整结果 "+n(l+1),9,ae))),128))])])):i("",!0),ge.value?(a(),o("div",te,[x[23]||(x[23]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"处理失败")],-1)),t("p",se,n(ge.value),1),be.value?(a(),o("p",oe,"建议："+n(be.value),1)):i("",!0)])):i("",!0)])]),_:1}))}};export{ue as default};
