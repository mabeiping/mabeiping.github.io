import{$ as e,w as l,m as a,p as t,q as s,E as u,n as o,z as r,J as n,a8 as d,D as i,v as c,x as m,k as v}from"./DwDdtX2U.js";import{_ as b}from"./CFdA-A2g.js";import{P as p}from"./DU5cCt65.js";import{G as g}from"./CiXH2Qpk.js";import x from"./CAdd_UJG.js";import{_ as y}from"./Dq87FbFi.js";import"./C3WxCecE.js";import"./B7n04RKk.js";import"./DgXBCkKa.js";const f={class:"space-y-6"},h={class:"bg-white p-4 rounded-lg shadow"},k={class:"space-y-3"},w={class:"grid grid-cols-2 gap-2"},C={key:0,class:"bg-gray-50 p-3 rounded-md border border-gray-200"},j={class:"space-y-2"},U={class:"space-y-1"},V={class:"flex items-center"},D={class:"flex items-center"},P={key:1,class:"bg-gray-50 p-3 rounded-md border border-gray-200"},F={class:"space-y-2"},_={class:"space-y-1"},E={class:"flex items-center"},S={class:"flex items-center"},z={key:0,class:"mt-6"},G=["disabled"],O={key:0,class:"mr-2 animate-spin"},I={key:1,class:"mt-4"},$={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},H={class:"space-y-2 text-sm text-green-700"},J={key:0},L={key:1},N=y({__name:"extract",setup(y){const N=v([]),R=v(null),q=v("image"),T=v("png"),A=v("xlsx"),B=v({includeHiddenImages:!1,preserveOriginalSize:!0,mergedCells:!0,headerDetection:!0}),K=v(!1),M=v(0),Q=v(null),W=v(null),X=v(0),Y=e=>{R.value=e.length>0?e[0]:null,Q.value=""},Z=e=>{Q.value=e,R.value=null},ee=e=>{q.value=e},le=async()=>{if(R.value){K.value=!0,M.value=0,Q.value=null,W.value=null,X.value=0;try{const e={file:R.value,extractFeature:q.value,imageFormat:"image"===q.value?T.value:"",tableFormat:"table"===q.value?A.value:"",extractOptions:B.value};M.value=30;const l=await x.pdfExtract(e);M.value=100,setTimeout(()=>{K.value=!1;const e=l,a=URL.createObjectURL(e);W.value=a;const t=`extracted_${Date.now()}.${"image"===q.value?T.value:A.value}`,s=document.createElement("a");s.href=a,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),X.value="image"===q.value?5:2},500)}catch(e){K.value=!1,Q.value=e.message,e.message}}};return(v,x)=>(a(),e(b,{title:"PDF提取",description:"从PDF文档中提取图片和表格数据","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择提取功能类型：","   • 图片提取：从PDF中提取所有图片，保持原始质量","   • 表格提取：从PDF中识别并提取表格数据","4. 选择提取选项：","   • 图片提取：选择图片格式（PNG/JPG）","   • 表格提取：选择导出格式（Excel/CSV）","5. 点击'开始提取'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看提取结果信息，包括成功提取的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:l(()=>[t("div",f,[s(g,{multiple:!1,accept:".pdf",maxSize:104857600,modelValue:N.value,"onUpdate:modelValue":x[0]||(x[0]=e=>N.value=e),onFilesChanged:Y,onError:Z},null,8,["modelValue"]),t("div",h,[x[22]||(x[22]=t("h3",{class:"font-semibold mb-3"},"提取设置",-1)),t("div",k,[t("div",null,[x[9]||(x[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"提取功能",-1)),t("div",w,[t("button",{onClick:x[1]||(x[1]=e=>ee("image")),class:u(["py-2 px-4 rounded-md transition-all duration-300 text-sm font-medium","image"===q.value?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"])}," 图片提取 ",2),t("button",{onClick:x[2]||(x[2]=e=>ee("table")),class:u(["py-2 px-4 rounded-md transition-all duration-300 text-sm font-medium","table"===q.value?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"])}," 表格提取 ",2)])]),"image"===q.value?(a(),o("div",C,[x[15]||(x[15]=t("h4",{class:"font-medium text-sm mb-2"},"图片提取设置",-1)),t("div",j,[t("div",null,[x[11]||(x[11]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"图片格式",-1)),r(t("select",{"onUpdate:modelValue":x[3]||(x[3]=e=>T.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[10]||(x[10]=[t("option",{value:"png"},"PNG（无损压缩，质量最佳）",-1),t("option",{value:"jpg"},"JPG（有损压缩，文件较小）",-1)])],512),[[n,T.value]])]),t("div",null,[x[14]||(x[14]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"提取选项",-1)),t("div",U,[t("label",V,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=e=>B.value.includeHiddenImages=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[d,B.value.includeHiddenImages]]),x[12]||(x[12]=t("span",{class:"ml-2 text-xs text-gray-700"},"包含隐藏图片",-1))]),t("label",D,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=e=>B.value.preserveOriginalSize=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[d,B.value.preserveOriginalSize]]),x[13]||(x[13]=t("span",{class:"ml-2 text-xs text-gray-700"},"保持原始尺寸",-1))])])])])])):i("",!0),"table"===q.value?(a(),o("div",P,[x[21]||(x[21]=t("h4",{class:"font-medium text-sm mb-2"},"表格提取设置",-1)),t("div",F,[t("div",null,[x[17]||(x[17]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"导出格式",-1)),r(t("select",{"onUpdate:modelValue":x[6]||(x[6]=e=>A.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[16]||(x[16]=[t("option",{value:"xlsx"},"Excel (.xlsx)",-1),t("option",{value:"csv"},"CSV (.csv)",-1)])],512),[[n,A.value]])]),t("div",null,[x[20]||(x[20]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"提取选项",-1)),t("div",_,[t("label",E,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[7]||(x[7]=e=>B.value.mergedCells=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[d,B.value.mergedCells]]),x[18]||(x[18]=t("span",{class:"ml-2 text-xs text-gray-700"},"保留合并单元格",-1))]),t("label",S,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[8]||(x[8]=e=>B.value.headerDetection=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[d,B.value.headerDetection]]),x[19]||(x[19]=t("span",{class:"ml-2 text-xs text-gray-700"},"自动检测表头",-1))])])])])])):i("",!0)])]),R.value?(a(),o("div",z,[t("button",{onClick:le,disabled:K.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[K.value?(a(),o("span",O,"⏳")):i("",!0),c(" "+m(K.value?"处理中...":"开始提取"),1)],8,G)])):i("",!0),K.value?(a(),o("div",I,[s(p,{progress:M.value,label:`处理进度: ${M.value}%`,error:Q.value},null,8,["progress","label","error"])])):i("",!0),W.value?(a(),o("div",$,[x[24]||(x[24]=t("h3",{class:"font-semibold text-green-700 mb-2"},"提取成功",-1)),t("div",H,[t("p",null,"成功提取："+m(X.value)+" 个文件",1),t("p",null,"提取类型："+m("image"===q.value?"图片提取":"表格提取"),1),"image"===q.value?(a(),o("p",J,"图片格式："+m(T.value.toUpperCase()),1)):i("",!0),"table"===q.value?(a(),o("p",L,"导出格式："+m(A.value.toUpperCase()),1)):i("",!0),x[23]||(x[23]=t("p",null,"文件已自动开始下载",-1))])])):i("",!0)])]),_:1}))}},[["__scopeId","data-v-8e007acd"]]);export{N as default};
