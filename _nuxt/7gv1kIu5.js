import{c as r,a as e,t as i,l as m,F as B,p as I,q as b,C as w,y as R,s as S,A as U,B as V,x as L,r as u,o as d,z as Z,v as A}from"./5KiIeb3O.js";import{s as $}from"./CkncbWtC.js";import{_ as N}from"./DlAUqK2U.js";const T={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},j={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},D=["accept"],q={key:0,class:"mt-4 p-3 bg-gray-50 rounded"},E={class:"font-medium"},G={class:"text-gray-500 ml-2"},K={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},O=["value"],H={class:"group"},J={class:"mt-3 p-4 border rounded-lg"},Q={class:"space-y-3"},W={class:"flex items-center"},X={key:0},Y={class:"flex items-center"},ee={key:1},le=["disabled"],te={key:0,class:"mt-6"},se={class:"w-full bg-gray-200 rounded-full h-2.5"},oe={class:"text-center mt-2 text-gray-600"},ae={key:1,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},ne={class:"text-green-600 mb-4"},re=["href"],ue={key:2,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},de={class:"text-red-600"},ie={__name:"index",setup(pe){const x=u(null),a=u(null),p=u("zip"),c=u(!1),v=u(0),g=u(null),n=u(null),o=u({enableCompression:!0,compressionLevel:"normal",includePassword:!1,password:""}),h=L(()=>".zip,.rar,.7z,.tar,.gz"),y=[{value:"zip",label:"ZIP",description:"最通用的压缩格式"},{value:"rar",label:"RAR",description:"高压缩率格式"},{value:"7z",label:"7Z",description:"极高压缩率格式"},{value:"tar",label:"TAR",description:"归档格式"}],_=s=>{const l=s.target.files[0];l&&(a.value=l,n.value=null)},k=()=>{a.value=null,x.value.value=""},z=s=>{if(s===0)return"0 Bytes";const l=1024,t=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,f)).toFixed(2))+" "+t[f]},C=s=>{const l=y.find(t=>t.value===s);return l?l.label:s},F=()=>new Promise(s=>{const l=$(()=>{v.value+=5,v.value>=100&&(clearInterval(l),setTimeout(s,500))},200)}),P=async()=>{if(!a.value){n.value="请选择要转换的文件";return}c.value=!0,v.value=0,n.value=null;try{await F(),g.value={downloadUrl:"#",fileName:a.value.name.replace(/\.[^/.]+$/,`.${p.value}`),fileSize:a.value.size}}catch{n.value="转换失败，请重试"}finally{c.value=!1}},M=()=>{a.value=null,x.value.value="",p.value="zip",g.value=null,v.value=0,n.value=null,o.value={enableCompression:!0,compressionLevel:"normal",includePassword:!1,password:""}};return(s,l)=>(d(),r("div",T,[l[16]||(l[16]=e("h1",{class:"text-2xl font-bold mb-6 text-center"},"压缩包格式转换",-1)),l[17]||(l[17]=e("div",{class:"mb-8"},[e("p",{class:"text-gray-600 mb-4"},"支持ZIP/RAR/7Z等压缩格式互转，操作简单快捷")],-1)),e("form",{onSubmit:U(P,["prevent"]),class:"space-y-6"},[e("div",j,[e("input",{type:"file",ref_key:"fileInput",ref:x,class:"hidden",accept:h.value,onChange:_},null,40,D),e("button",{type:"button",onClick:l[0]||(l[0]=t=>s.$refs.fileInput.click()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"}," 选择文件 "),l[7]||(l[7]=e("p",{class:"text-gray-500 mt-2"},"支持 ZIP、RAR、7Z 等格式",-1)),a.value?(d(),r("div",q,[e("span",E,i(a.value.name),1),e("span",G,"("+i(z(a.value.size))+")",1),e("button",{type:"button",onClick:k,class:"ml-2 text-red-500 hover:text-red-700"}," 移除 ")])):m("",!0)]),e("div",null,[l[8]||(l[8]=e("label",{class:"block text-gray-700 font-medium mb-2"},"转换为",-1)),e("div",K,[(d(),r(B,null,I(y,t=>e("label",{key:t.value,class:Z(["flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500 transition duration-200",{"border-blue-500 bg-blue-50":p.value===t.value}])},[b(e("input",{type:"radio",value:t.value,"onUpdate:modelValue":l[1]||(l[1]=f=>p.value=f),class:"mr-2"},null,8,O),[[A,p.value]]),e("span",null,i(t.label),1)],2)),64))])]),e("div",null,[e("details",H,[l[14]||(l[14]=e("summary",{class:"cursor-pointer list-none flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("span",{class:"font-medium"},"高级选项"),e("span",{class:"transition-transform duration-300 group-open:rotate-180"},"▼")],-1)),e("div",J,[e("div",Q,[e("label",W,[b(e("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=t=>o.value.enableCompression=t),class:"mr-2"},null,512),[[w,o.value.enableCompression]]),l[9]||(l[9]=e("span",null,"启用压缩",-1))]),o.value.enableCompression?(d(),r("div",X,[l[11]||(l[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"压缩级别",-1)),b(e("select",{"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.compressionLevel=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...l[10]||(l[10]=[e("option",{value:"store"},"无压缩",-1),e("option",{value:"fast"},"快速压缩",-1),e("option",{value:"normal"},"标准压缩",-1),e("option",{value:"maximum"},"最大压缩",-1)])],512),[[R,o.value.compressionLevel]])])):m("",!0),e("label",Y,[b(e("input",{type:"checkbox","onUpdate:modelValue":l[4]||(l[4]=t=>o.value.includePassword=t),class:"mr-2"},null,512),[[w,o.value.includePassword]]),l[12]||(l[12]=e("span",null,"添加密码保护",-1))]),o.value.includePassword?(d(),r("div",ee,[l[13]||(l[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"密码",-1)),b(e("input",{"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.password=t),type:"password",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"请输入密码"},null,512),[[S,o.value.password]])])):m("",!0)])])])]),e("button",{type:"submit",disabled:!a.value||c.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},i(c.value?"转换中...":"开始转换"),9,le)],32),c.value?(d(),r("div",te,[e("div",se,[e("div",{class:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:V({width:v.value+"%"})},null,4)]),e("p",oe,i(v.value)+"%",1)])):m("",!0),g.value?(d(),r("div",ae,[l[15]||(l[15]=e("h3",{class:"font-semibold text-green-700 mb-2"},"转换成功",-1)),e("p",ne,"文件已成功转换为 "+i(C(p.value))+" 格式",1),e("a",{href:g.value.downloadUrl,class:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300",download:""}," 下载文件 ",8,re),e("button",{onClick:M,class:"ml-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-300"}," 再次转换 ")])):m("",!0),n.value?(d(),r("div",ue,[e("p",de,i(n.value),1),e("button",{onClick:l[6]||(l[6]=t=>n.value=null),class:"mt-2 text-red-600 hover:text-red-800 text-sm"}," 关闭 ")])):m("",!0)]))}},be=N(ie,[["__scopeId","data-v-0ddb270c"]]);export{be as default};
