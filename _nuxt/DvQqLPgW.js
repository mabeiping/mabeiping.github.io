import{_ as y}from"./1SagYtif.js";import{P as k,a as F}from"./CPH4GR76.js";import{G as w}from"./zseaTYbb.js";import{_ as B}from"./DlAUqK2U.js";import{i as P,w as C,o as a,a as e,b,c as n,F as D,r as V,t as p,f as c,d as E,l as m}from"./-R7zUpUx.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./Dh5_xY7C.js";const M={class:"space-y-6"},N={class:"bg-white p-4 rounded-lg shadow"},U={class:"space-y-3"},z={class:"bg-gray-50 p-3 rounded-md border border-gray-200"},L={class:"space-y-2"},S={class:"text-sm truncate"},$={class:"text-xs text-gray-500"},j={key:0,class:"text-sm text-gray-500 italic"},G={key:0,class:"mt-6"},R=["disabled"],T={key:0,class:"mr-2 animate-spin"},I={key:1,class:"mt-4"},K={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},O={class:"space-y-2 text-sm text-green-700"},q={__name:"merge",setup(A){const l=m([]),r=m(!1),i=m(0),g=m(null),v=m(null),_=()=>{console.log("处理开始")},f=t=>{console.log("处理结束:",t)},h=t=>{if(t===0)return"0 B";const s=1024,o=["B","KB","MB","GB"],d=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,d)).toFixed(2))+" "+o[d]},x=async()=>{if(!(l.value.length<2)){r.value=!0,i.value=0,g.value=null,v.value=null,_();try{i.value=30;const t=await F.pdfMerge({files:l.value});i.value=100,setTimeout(()=>{r.value=!1;const s=t,o=URL.createObjectURL(s);v.value=o;const d=`merged_${Date.now()}.pdf`,u=document.createElement("a");u.href=o,u.download=d,document.body.appendChild(u),u.click(),document.body.removeChild(u),f({success:!0,url:o})},500)}catch(t){r.value=!1,g.value=t.message,f({success:!1,error:t.message})}}};return(t,s)=>(a(),P(y,{title:"PDF合并",description:"将多个PDF文件按顺序合并为一个文件","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽多个PDF文件到上传区域","2. 等待文件上传完成","3. 查看已选择的文件列表，确认文件顺序","4. 可以通过以下方式管理文件：","   • 拖拽文件：改变文件的合并顺序","   • 删除文件：点击文件旁边的删除按钮移除不需要的文件","   • 清空文件：点击'清空文件'按钮移除所有文件","5. 确保至少选择了2个PDF文件","6. 点击'开始合并'按钮","7. 等待处理完成后，文件会自动开始下载","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:C(()=>[e("div",M,[b(w,{multiple:!0,accept:".pdf","max-size":100*1024*1024,modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value=o),onFilesChanged:t.handleFilesChanged,onError:t.handleError},null,8,["modelValue","onFilesChanged","onError"]),e("div",N,[s[3]||(s[3]=e("h3",{class:"font-semibold mb-3"},"合并设置",-1)),e("div",U,[s[2]||(s[2]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"合并顺序"),e("p",{class:"text-sm text-gray-500"}," 提示：文件将按照上传顺序合并 ")],-1)),e("div",null,[s[1]||(s[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"已选择文件",-1)),e("div",z,[e("ul",L,[(a(!0),n(D,null,V(l.value,(o,d)=>(a(),n("li",{key:d,class:"flex items-center justify-between"},[e("span",S,p(o.name),1),e("span",$,p(h(o.size)),1)]))),128)),l.value.length===0?(a(),n("li",j," 请选择要合并的PDF文件 ")):c("",!0)])])])])]),l.value.length>0?(a(),n("div",G,[e("button",{onClick:x,disabled:r.value||l.value.length<2,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[r.value?(a(),n("span",T,"⏳")):c("",!0),E(" "+p(r.value?"处理中...":`开始合并 (${l.value.length}个文件)`),1)],8,R)])):c("",!0),r.value?(a(),n("div",I,[b(k,{progress:i.value,label:`处理进度: ${i.value}%`,error:g.value},null,8,["progress","label","error"])])):c("",!0),v.value?(a(),n("div",K,[s[5]||(s[5]=e("h3",{class:"font-semibold text-green-700 mb-2"},"合并成功",-1)),e("div",O,[e("p",null,"成功合并："+p(l.value.length)+" 个文件",1),s[4]||(s[4]=e("p",null,"文件已自动开始下载",-1))])])):c("",!0)])]),_:1}))}},se=B(q,[["__scopeId","data-v-68866e98"]]);export{se as default};
