import{G as e,$ as l,w as a,m as s,p as t,q as u,n as o,z as r,I as n,K as i,D as c,F as d,u as v,E as p,x as m,v as g,k as b}from"./DwDdtX2U.js";import{_ as f}from"./CFdA-A2g.js";import{G as x}from"./CiXH2Qpk.js";import"./C3WxCecE.js";import"./Dq87FbFi.js";import"./B7n04RKk.js";import"./DgXBCkKa.js";const h={class:"space-y-6"},y={key:0,class:"space-y-4"},w={class:"flex space-x-4"},k={class:"flex items-center space-x-2 cursor-pointer"},j={class:"flex items-center space-x-2 cursor-pointer"},C={class:"flex items-center space-x-2 cursor-pointer"},F={key:0},U={key:1},D={key:2,class:"bg-gray-50 p-4 rounded-lg"},P={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3"},V=["onClick"],z={class:"flex items-center justify-center w-full h-16 bg-white rounded mb-1"},L={class:"text-gray-500"},N={class:"text-xs"},_={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},M={class:"text-blue-700"},$={key:0,class:"text-red-500 text-sm mt-1"},B={class:"flex space-x-4"},E=["disabled"],I={key:0},R={key:1,class:"flex items-center justify-center"},O={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},G={class:"mt-2 text-green-700"},S={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},T={class:"mt-2 text-red-700"},q={__name:"remove",setup(q){const A=b([]),H=b(null),K=b(0),J=b("specific"),Q=b(""),W=b(""),X=b([]),Y=b(!1),Z=b(!1),ee=b(""),le=b(""),ae=['1. 点击"选择文件"按钮上传PDF文件',"2. 选择删除模式：指定页面、页面范围或全部页面","3. 根据选择模式输入相应的页面信息","4. 或在页面预览中点击选择要删除的页面",'5. 点击"删除页面"按钮进行处理',"6. 处理完成后，系统会自动下载处理后的PDF文件"];e([J,Q,W],()=>{se()});const se=()=>{const e=[];if("specific"===J.value&&Q.value){const l=Q.value.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e)&&e>0&&e<=K.value);e.push(...l)}else if("range"===J.value&&W.value){W.value.split(",").forEach(l=>{const a=l.trim();if(a.includes("-")){const[l,s]=a.split("-").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e));if(l&&s&&l<=s)for(let a=l;a<=s;a++)a>0&&a<=K.value&&e.push(a)}else{const l=parseInt(a);!isNaN(l)&&l>0&&l<=K.value&&e.push(l)}})}else if("all"===J.value&&K.value>0)for(let l=1;l<=K.value;l++)e.push(l);X.value=[...new Set(e)].sort((e,l)=>e-l)},te=e=>{H.value=e.length>0?e[0]:null,le.value="",H.value?(K.value=Math.floor(20*Math.random())+1,se()):K.value=0},ue=e=>{le.value=e,H.value=null,K.value=0},oe=async()=>{if(H.value)if(0!==X.value.length)if(X.value.length!==K.value){Y.value=!0,le.value="",Z.value=!1;try{await new Promise(e=>setTimeout(e,2e3)),ee.value=`成功删除 ${X.value.length} 个页面，剩余 ${K.value-X.value.length} 个页面。`,Z.value=!0,setTimeout(()=>{const e=new Blob(["模拟删除页面后的PDF文件内容"],{type:"application/pdf"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=`removed_pages_${H.value.name}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},1e3)}catch(e){le.value=`删除失败：${e.message||"未知错误"}`}finally{Y.value=!1}}else le.value="不能删除所有页面，PDF文件至少需要保留一页";else le.value="请选择要删除的页面";else le.value="请选择PDF文件"},re=()=>{J.value="specific",Q.value="",W.value="",X.value=[],le.value="",Z.value=!1,ee.value=""};return(e,b)=>(s(),l(f,{title:"PDF页面删除",description:"删除PDF文件中不需要的页面",tips:ae},{default:a(()=>[t("div",h,[u(x,{multiple:!1,accept:".pdf",maxSize:104857600,modelValue:A.value,"onUpdate:modelValue":b[0]||(b[0]=e=>A.value=e),onFilesChanged:te,onError:ue},null,8,["modelValue"]),H.value&&K.value?(s(),o("div",y,[t("div",null,[b[9]||(b[9]=t("h3",{class:"text-lg font-semibold mb-2"},"选择模式",-1)),t("div",w,[t("label",k,[r(t("input",{type:"radio","onUpdate:modelValue":b[1]||(b[1]=e=>J.value=e),value:"specific",class:"w-4 h-4 text-blue-600"},null,512),[[n,J.value]]),b[6]||(b[6]=t("span",null,"指定页面",-1))]),t("label",j,[r(t("input",{type:"radio","onUpdate:modelValue":b[2]||(b[2]=e=>J.value=e),value:"range",class:"w-4 h-4 text-blue-600"},null,512),[[n,J.value]]),b[7]||(b[7]=t("span",null,"页面范围",-1))]),t("label",C,[r(t("input",{type:"radio","onUpdate:modelValue":b[3]||(b[3]=e=>J.value=e),value:"all",class:"w-4 h-4 text-blue-600"},null,512),[[n,J.value]]),b[8]||(b[8]=t("span",null,"全部页面",-1))])])]),"specific"===J.value?(s(),o("div",F,[b[10]||(b[10]=t("h3",{class:"text-lg font-semibold mb-2"},"指定页面",-1)),r(t("input",{"onUpdate:modelValue":b[4]||(b[4]=e=>Q.value=e),type:"text",placeholder:"例如：1, 3, 5, 7",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,Q.value]]),b[11]||(b[11]=t("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码，如：1, 3, 5, 7",-1))])):"range"===J.value?(s(),o("div",U,[b[12]||(b[12]=t("h3",{class:"text-lg font-semibold mb-2"},"页面范围",-1)),r(t("input",{"onUpdate:modelValue":b[5]||(b[5]=e=>W.value=e),type:"text",placeholder:"例如：1-5, 7-10, 12",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,W.value]]),b[13]||(b[13]=t("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码范围，如：1-5, 7-10, 12",-1))])):c("",!0),K.value>0?(s(),o("div",D,[b[14]||(b[14]=t("h3",{class:"text-lg font-semibold mb-3"},"页面预览",-1)),t("div",P,[(s(!0),o(d,null,v(K.value,e=>(s(),o("div",{key:e,class:p(["border rounded-lg p-2 text-center cursor-pointer transition-colors",{"border-blue-500 bg-blue-50":X.value.includes(e)}]),onClick:l=>(e=>{const l=X.value.indexOf(e);l>-1?X.value.splice(l,1):X.value.push(e)})(e)},[t("div",z,[t("span",L,m(e),1)]),t("span",N,m(e)+"页",1)],10,V))),128))])])):c("",!0),X.value.length>0?(s(),o("div",_,[t("p",M,[b[15]||(b[15]=g(" 已选择 ",-1)),t("strong",null,m(X.value.length),1),b[16]||(b[16]=g(" 个页面进行删除 ",-1))]),X.value.length===K.value?(s(),o("p",$," 警告：您选择了所有页面，删除后PDF将为空 ")):c("",!0)])):c("",!0)])):c("",!0),t("div",B,[t("button",{onClick:oe,disabled:!H.value||Y.value||0===X.value.length,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[Y.value?(s(),o("span",R,[...b[17]||(b[17]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" 处理中... ",-1)])])):(s(),o("span",I,"删除页面"))],8,E),t("button",{onClick:re,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),Z.value?(s(),o("div",O,[b[18]||(b[18]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"删除成功")],-1)),t("p",G,m(ee.value),1)])):c("",!0),le.value?(s(),o("div",S,[b[19]||(b[19]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"删除失败")],-1)),t("p",T,m(le.value),1)])):c("",!0)])]),_:1}))}};export{q as default};
