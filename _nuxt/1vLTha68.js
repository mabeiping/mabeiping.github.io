import{z as X,w as Y,o as n,a as e,c as i,k as c,j as l,C as P,t as u,F as $,h as E,q as a,x as M,v as g,E as V,l as U,n as Z}from"./ht_AtOyM.js";import{_ as ee}from"./Cbwpa6-V.js";import"./B-T4dYXf.js";import"./Cy7Cg-KN.js";const te={class:"space-y-6"},se={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors"},oe={key:0,class:"space-y-4"},le={class:"flex items-center justify-between"},re={class:"text-lg font-semibold text-text-primary"},ne={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[300px] overflow-y-auto"},ae=["src"],ie=["onClick"],de={class:"space-y-4"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={key:0,class:"grid grid-cols-2 gap-4"},ce={key:1,class:"grid grid-cols-2 gap-4"},ge={key:2,class:"grid grid-cols-2 gap-4"},me={key:3,class:"grid grid-cols-2 gap-4"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},be={class:"flex items-center gap-2"},ye={class:"flex items-center gap-2"},fe={class:"flex items-center gap-2"},we={key:4,class:"space-y-2"},ke=["disabled"],he={key:1,class:"space-y-4"},Fe={class:"flex items-center justify-between"},Me={class:"text-lg font-semibold text-text-primary"},Ve={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[300px] overflow-y-auto"},Ue=["src"],ze={class:"absolute bottom-0 left-0 right-0 bg-green-500 text-white text-xs p-1 rounded-b-lg"},Ce={class:"p-4 bg-green-50 rounded-lg"},Be={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center"},je={class:"text-2xl font-bold text-primary"},Te={class:"text-2xl font-bold text-green-500"},We={class:"text-2xl font-bold text-green-500"},Ae={class:"text-2xl font-bold text-blue-500"},$e={__name:"image-batch-processor",setup(Ge){const z=l(null),r=l([]),p=l([]),m=l("none"),f=l(80),C=l(50),B=l(800),j=l(600),T=l(800),W=l(600),v=l("original"),w=l(""),A=l(!0),k=l(!1),G=l(""),L=l(!1),x=l(!1),b=l(""),S=l("success"),h=U(()=>r.value.reduce((o,t)=>o+t.size,0)),_=U(()=>p.value.reduce((o,t)=>o+t.size,0)),H=U(()=>h.value===0?0:((1-_.value/h.value)*100).toFixed(1)),I=()=>{z.value.click()},N=o=>{const t=Array.from(o.target.files);r.value=[...r.value,...t]},O=o=>{const s=Array.from(o.dataTransfer.files).filter(d=>d.type.startsWith("image/"));if(s.length===0){y("请选择图片文件","error");return}r.value=[...r.value,...s]},R=o=>{r.value.splice(o,1)},q=()=>{r.value=[],p.value=[]},D=o=>URL.createObjectURL(o),J=()=>{if(r.value.length===0){y("请先选择文件","error");return}x.value=!0,setTimeout(()=>{p.value=r.value.map(o=>{const t={name:w.value+o.name,size:Math.round(o.size*(f.value/100)),preview:D(o),originalFile:o};if(v.value!=="original"){const s=v.value;t.name=t.name.replace(/\.[^.]+$/,`.${s}`)}return t}),x.value=!1,y(`成功处理 ${r.value.length} 张图片`,"success")},2e3)},K=()=>{p.value.forEach(o=>{Q(o)}),y("已开始下载所有文件","success")},Q=o=>{const t=document.createElement("a");t.href=o.preview,t.download=o.name,t.click()},F=o=>{if(o===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,d)*100)/100+" "+s[d]},y=(o,t)=>{b.value=o,S.value=t,setTimeout(()=>{b.value=""},3e3)};return(o,t)=>(n(),X(ee,{title:"图片批量处理",description:"批量处理多张图片"},{default:Y(()=>[e("div",te,[e("div",se,[e("input",{ref_key:"fileInput",ref:z,type:"file",accept:"image/*",multiple:"",onChange:N,class:"hidden"},null,544),e("div",{onClick:I,onDragover:t[0]||(t[0]=P(()=>{},["prevent"])),onDrop:P(O,["prevent"]),class:"cursor-pointer"},[...t[14]||(t[14]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-primary mb-2"},"点击或拖拽图片到此处",-1),e("p",{class:"text-sm text-text-secondary"},"支持多个文件上传",-1)])],32)]),r.value.length>0?(n(),i("div",oe,[e("div",le,[e("h3",re,"已选择的文件 ("+u(r.value.length)+")",1),e("button",{onClick:q,class:"px-3 py-1.5 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600 transition-colors"}," 清除全部 ")]),e("div",ne,[(n(!0),i($,null,E(r.value,(s,d)=>(n(),i("div",{key:d,class:"relative group"},[e("img",{src:D(s),alt:"",class:"w-full h-24 object-cover rounded-lg border border-gray-200"},null,8,ae),e("button",{onClick:Le=>R(d),class:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...t[15]||(t[15]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ie)]))),128))]),e("div",de,[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold text-text-primary"},"处理选项",-1)),e("div",ue,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"调整尺寸",-1)),a(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[16]||(t[16]=[e("option",{value:"none"},"不调整",-1),e("option",{value:"percentage"},"按百分比",-1),e("option",{value:"width"},"按宽度",-1),e("option",{value:"height"},"按高度",-1),e("option",{value:"custom"},"自定义尺寸",-1)])],512),[[M,m.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"压缩质量",-1)),a(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[18]||(t[18]=[e("option",{value:"100"},"最高质量 (100%)",-1),e("option",{value:"90"},"高质量 (90%)",-1),e("option",{value:"80"},"中高质量 (80%)",-1),e("option",{value:"70"},"中等质量 (70%)",-1),e("option",{value:"60"},"中低质量 (60%)",-1),e("option",{value:"50"},"低质量 (50%)",-1)])],512),[[M,f.value]])])]),m.value==="percentage"?(n(),i("div",pe,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"百分比",-1)),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>C.value=s),type:"number",min:"1",max:"200",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,C.value,void 0,{number:!0}]])])])):c("",!0),m.value==="width"?(n(),i("div",ce,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (px)",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>B.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,B.value,void 0,{number:!0}]])])])):c("",!0),m.value==="height"?(n(),i("div",ge,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (px)",-1)),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>j.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,j.value,void 0,{number:!0}]])])])):c("",!0),m.value==="custom"?(n(),i("div",me,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (px)",-1)),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>T.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,T.value,void 0,{number:!0}]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (px)",-1)),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>W.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,W.value,void 0,{number:!0}]])])])):c("",!0),e("div",ve,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"输出格式",-1)),a(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>v.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[25]||(t[25]=[e("option",{value:"original"},"保持原格式",-1),e("option",{value:"jpg"},"JPG",-1),e("option",{value:"png"},"PNG",-1),e("option",{value:"webp"},"WebP",-1)])],512),[[M,v.value]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"文件名前缀",-1)),a(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>w.value=s),type:"text",placeholder:"例如：processed_",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,w.value]])])]),e("div",xe,[e("div",be,[a(e("input",{id:"maintainAspect","onUpdate:modelValue":t[10]||(t[10]=s=>A.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[V,A.value]]),t[28]||(t[28]=e("label",{for:"maintainAspect",class:"text-sm text-text-secondary"},"保持宽高比",-1))]),e("div",ye,[a(e("input",{id:"addWatermark","onUpdate:modelValue":t[11]||(t[11]=s=>k.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[V,k.value]]),t[29]||(t[29]=e("label",{for:"addWatermark",class:"text-sm text-text-secondary"},"添加水印",-1))]),e("div",fe,[a(e("input",{id:"convertToGrayscale","onUpdate:modelValue":t[12]||(t[12]=s=>L.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[V,L.value]]),t[30]||(t[30]=e("label",{for:"convertToGrayscale",class:"text-sm text-text-secondary"},"转为灰度",-1))])]),k.value?(n(),i("div",we,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"水印文字",-1)),a(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>G.value=s),type:"text",placeholder:"例如：© 2024",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[g,G.value]])])):c("",!0),e("button",{onClick:J,disabled:x.value,class:"w-full py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},u(x.value?"处理中...":"批量处理"),9,ke)])])):c("",!0),p.value.length>0?(n(),i("div",he,[e("div",Fe,[e("h3",Me,"处理结果 ("+u(p.value.length)+")",1),e("button",{onClick:K,class:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors"}," 下载全部 ")]),e("div",Ve,[(n(!0),i($,null,E(p.value,(s,d)=>(n(),i("div",{key:d,class:"relative group"},[e("img",{src:s.preview,alt:"",class:"w-full h-24 object-cover rounded-lg border border-green-200"},null,8,Ue),e("div",ze,u(F(s.size)),1)]))),128))]),e("div",Ce,[e("div",Be,[e("div",null,[e("p",je,u(p.value.length),1),t[33]||(t[33]=e("p",{class:"text-sm text-text-secondary"},"处理文件数",-1))]),e("div",null,[e("p",Te,u(F(h.value)),1),t[34]||(t[34]=e("p",{class:"text-sm text-text-secondary"},"原始大小",-1))]),e("div",null,[e("p",We,u(F(_.value)),1),t[35]||(t[35]=e("p",{class:"text-sm text-text-secondary"},"处理后大小",-1))]),e("div",null,[e("p",Ae,u(H.value)+"%",1),t[36]||(t[36]=e("p",{class:"text-sm text-text-secondary"},"压缩率",-1))])])])])):c("",!0),b.value?(n(),i("div",{key:2,class:Z(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",S.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},u(b.value),3)):c("",!0)])]),_:1}))}};export{$e as default};
