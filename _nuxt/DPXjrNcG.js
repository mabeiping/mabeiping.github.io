import{j as e,w as l,o as a,a as s,b as t,c as o,F as n,p as i,t as u,l as r,q as d,v as c,C as v,y as m,d as p,B as b,r as g,x}from"./CU9sc1yl.js";import{_ as h}from"./KU0exf4c.js";import{G as f}from"./CwQEddwr.js";import{s as y}from"./Uj4zMvJp.js";import"./BaOdEBWl.js";import"./ByWfkjdR.js";import"./CIUYv0cq.js";import"./DKwMAC3i.js";import"./BCo6x5W8.js";const w={class:"space-y-6"},k={key:0,class:"bg-gray-50 p-4 rounded-lg"},M={class:"space-y-2"},j={class:"flex items-center"},B={class:"font-medium"},C={class:"text-sm text-gray-500"},z=["onClick"],L={key:1,class:"bg-gray-50 p-4 rounded-lg"},V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},T=["value"],F={class:"font-medium"},U={class:"text-sm text-gray-500"},S={key:2,class:"space-y-4"},D={class:"space-y-2"},$={class:"flex items-center space-x-2"},H={class:"flex items-center space-x-2"},_={class:"flex items-center space-x-2"},E={key:0,class:"bg-white p-4 rounded-lg border"},A={class:"space-y-2"},G={class:"flex items-center space-x-2"},O={class:"flex space-x-4"},X=["disabled"],J={key:0},P={key:1,class:"flex items-center justify-center"},R={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Y={class:"flex items-center justify-between mb-2"},q={class:"text-blue-700"},I={class:"w-full bg-gray-200 rounded-full h-2.5"},K={class:"mt-2 text-sm text-blue-700"},W={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Z={class:"mt-2 text-green-700"},N={class:"mt-3 space-y-2"},Q=["href","download"],ee={key:5,class:"bg-red-50 border border-red-200 rounded-lg p-4"},le={class:"mt-2 text-red-700"},ae={key:0,class:"mt-2 text-sm text-gray-600"},se={__name:"index",setup(se){const te=[{value:"stl",label:"STL (.stl)",description:"立体光刻格式",extensions:[".stl"]},{value:"obj",label:"OBJ (.obj)",description:"Wavefront对象格式",extensions:[".obj"]},{value:"fbx",label:"FBX (.fbx)",description:"Autodesk FBX格式",extensions:[".fbx"]},{value:"gltf",label:"glTF (.gltf)",description:"GL传输格式",extensions:[".gltf"]},{value:"glb",label:"GLB (.glb)",description:"二进制glTF格式",extensions:[".glb"]},{value:"dae",label:"DAE (.dae)",description:"数字资产交换格式",extensions:[".dae"]},{value:"3ds",label:"3DS (.3ds)",description:"3D Studio格式",extensions:[".3ds"]},{value:"ply",label:"PLY (.ply)",description:"多边形文件格式",extensions:[".ply"]}],oe=g(""),ne=g({includeMaterials:!0,includeTextures:!0,optimizeModel:!1}),ie=g({simplificationLevel:"none",meshCombining:"none",normalizeScale:!1}),ue=g([]),re=x(()=>ue.value),de=g(!1),ce=g(!1),ve=g(""),me=g(""),pe=g(""),be=g(0),ge=g(""),xe=g([]),he=g([]),fe=["1. 上传文件：支持STL、OBJ、FBX等多种3D模型格式，可批量上传","2. 系统自动识别源文件格式","3. 选择目标格式：系统会根据源格式显示可用的目标格式","4. 设置转换选项：是否包含材质、纹理，是否优化模型等",'5. 点击"开始转换"按钮进行处理',"6. 等待处理完成，系统会自动下载处理后的文件","7. 查看处理结果，确保模型格式正确"],ye=e=>e.split(".").pop().toLowerCase(),we=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},ke=e=>{ue.value=e,e.length>0?Me():(he.value=[],oe.value=""),me.value="",ce.value=!1},Me=()=>{if(0===ue.value.length)return void(he.value=[]);const e=ye(ue.value[0].name),l=[];te.forEach(a=>{a.extensions.some(l=>e===l.replace(".",""))||l.push(a)}),he.value=l,l.length>0?oe.value=l[0].value:oe.value=""},je=e=>{me.value=e,pe.value=Be(e)},Be=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Ce=async()=>{if(0!==re.length)if(oe.value){de.value=!0,me.value="",pe.value="",ce.value=!1,be.value=0,ge.value="准备转换...",xe.value=[];try{await new Promise(e=>{let l=0;const a=y(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),be.value=l,ge.value=l<30?"正在分析3D模型...":l<70?"正在转换格式...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});re.value,oe.value,ne.value,ie.value;const e=te.find(e=>e.value===oe.value);ve.value=`成功将 ${re.length} 个文件转换为 ${e.label} 格式！`,ce.value=!0,re.forEach((e,l)=>{const a=new Blob(["模拟转换后的3D模型内容"],{type:"application/octet-stream"}),s=URL.createObjectURL(a),t=`converted_${e.name.replace(/\.[^/.]+$/,`.${oe.value}`)}`;xe.value.push({url:s,filename:t})}),xe.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=xe.value[0].url,e.download=xe.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){me.value=`转换失败：${e.message||"未知错误"}`,pe.value=Be(me.value)}finally{de.value=!1}}else me.value="请选择目标格式";else me.value="请选择文件"},ze=()=>{ue.value=[],oe.value="",ne.value={includeMaterials:!0,includeTextures:!0,optimizeModel:!1},ie.value={simplificationLevel:"none",meshCombining:"none",normalizeScale:!1},me.value="",pe.value="",ce.value=!1,ve.value="",be.value=0,ge.value="",xe.value=[],he.value=[]};return(g,x)=>(a(),e(h,{title:"3D模型转换",description:"STL/OBJ/FBX等3D模型格式互转",tips:fe},{default:l(()=>[s("div",w,[t(f,{multiple:!0,accept:[".stl",".obj",".fbx",".gltf",".glb",".dae",".3ds",".ply"],"max-size":524288e3,modelValue:ue.value,"onUpdate:modelValue":x[0]||(x[0]=e=>ue.value=e),onFilesChanged:ke,onError:je},null,8,["modelValue"]),re.value.length>0?(a(),o("div",k,[x[10]||(x[10]=s("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),s("div",M,[(a(!0),o(n,null,i(re.value,(e,l)=>(a(),o("div",{key:l,class:"flex items-center justify-between p-2 bg-white rounded border"},[s("div",j,[x[8]||(x[8]=s("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})],-1)),s("div",null,[s("div",B,u(e.name),1),s("div",C,u(ye(e.name))+" • "+u(we(e.size)),1)])]),s("button",{onClick:e=>(e=>{ue.value.splice(e,1),0===ue.value.length?ze():Me()})(l),class:"text-red-500 hover:text-red-700"},[...x[9]||(x[9]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,z)]))),128))])])):r("",!0),re.value.length>0&&he.value.length>0?(a(),o("div",L,[x[11]||(x[11]=s("h3",{class:"text-lg font-semibold mb-4"},"目标格式",-1)),s("div",V,[(a(!0),o(n,null,i(he.value,e=>(a(),o("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[d(s("input",{type:"radio","onUpdate:modelValue":x[1]||(x[1]=e=>oe.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,T),[[c,oe.value]]),s("div",null,[s("div",F,u(e.label),1),s("div",U,u(e.description),1)])]))),128))])])):r("",!0),re.value.length>0?(a(),o("div",S,[s("div",null,[x[15]||(x[15]=s("h3",{class:"text-lg font-semibold mb-2"},"转换选项",-1)),s("div",D,[s("label",$,[d(s("input",{type:"checkbox","onUpdate:modelValue":x[2]||(x[2]=e=>ne.value.includeMaterials=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ne.value.includeMaterials]]),x[12]||(x[12]=s("span",null,"包含材质",-1))]),s("label",H,[d(s("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=e=>ne.value.includeTextures=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ne.value.includeTextures]]),x[13]||(x[13]=s("span",null,"包含纹理",-1))]),s("label",_,[d(s("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=e=>ne.value.optimizeModel=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ne.value.optimizeModel]]),x[14]||(x[14]=s("span",null,"优化模型",-1))])])]),ne.value.optimizeModel?(a(),o("div",E,[x[21]||(x[21]=s("h3",{class:"text-lg font-semibold mb-3"},"模型优化选项",-1)),s("div",A,[s("div",null,[x[17]||(x[17]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"简化级别",-1)),d(s("select",{"onUpdate:modelValue":x[5]||(x[5]=e=>ie.value.simplificationLevel=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[16]||(x[16]=[s("option",{value:"none"},"不简化",-1),s("option",{value:"low"},"低级别简化",-1),s("option",{value:"medium"},"中级别简化",-1),s("option",{value:"high"},"高级别简化",-1)])],512),[[m,ie.value.simplificationLevel]])]),s("div",null,[x[19]||(x[19]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"网格合并",-1)),d(s("select",{"onUpdate:modelValue":x[6]||(x[6]=e=>ie.value.meshCombining=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[18]||(x[18]=[s("option",{value:"none"},"不合并",-1),s("option",{value:"byMaterial"},"按材质合并",-1),s("option",{value:"all"},"全部合并",-1)])],512),[[m,ie.value.meshCombining]])]),s("div",null,[s("label",G,[d(s("input",{type:"checkbox","onUpdate:modelValue":x[7]||(x[7]=e=>ie.value.normalizeScale=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ie.value.normalizeScale]]),x[20]||(x[20]=s("span",null,"归一化缩放",-1))])])])])):r("",!0)])):r("",!0),s("div",O,[s("button",{onClick:Ce,disabled:!re.value.length||!oe.value||de.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[de.value?(a(),o("span",P,[x[22]||(x[22]=s("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),p(" 处理中... "+u(be.value)+"% ",1)])):(a(),o("span",J,"开始转换"))],8,X),s("button",{onClick:ze,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),de.value?(a(),o("div",R,[s("div",Y,[x[23]||(x[23]=s("h4",{class:"font-semibold text-blue-800"},"转换进度",-1)),s("span",q,u(be.value)+"%",1)]),s("div",I,[s("div",{class:"bg-blue-600 h-2.5 rounded-full",style:b({width:be.value+"%"})},null,4)]),s("p",K,u(ge.value),1)])):r("",!0),ce.value?(a(),o("div",W,[x[24]||(x[24]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),s("h4",{class:"font-semibold text-green-800"},"转换成功")],-1)),s("p",Z,u(ve.value),1),s("div",N,[(a(!0),o(n,null,i(xe.value,(e,l)=>(a(),o("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载转换结果 "+u(l+1),9,Q))),128))])])):r("",!0),me.value?(a(),o("div",ee,[x[25]||(x[25]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),s("h4",{class:"font-semibold text-red-800"},"转换失败")],-1)),s("p",le,u(me.value),1),pe.value?(a(),o("p",ae,"建议："+u(pe.value),1)):r("",!0)])):r("",!0)])]),_:1}))}};export{se as default};
