import{j as e,w as l,o as a,a as s,b as t,q as o,v as n,c as r,s as u,C as c,t as d,d as i,l as p,r as v,x as m}from"./CU9sc1yl.js";import{_ as y}from"./KU0exf4c.js";import{G as b}from"./CwQEddwr.js";import"./BaOdEBWl.js";import"./ByWfkjdR.js";import"./CIUYv0cq.js";import"./DKwMAC3i.js";import"./BCo6x5W8.js";const x={class:"space-y-6"},g={class:"bg-gray-50 p-4 rounded-lg"},f={class:"flex space-x-4"},h={class:"flex items-center space-x-2 cursor-pointer"},w={class:"flex items-center space-x-2 cursor-pointer"},k={key:0,class:"space-y-4"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={class:"flex items-center space-x-2"},D={class:"flex items-center space-x-2"},j={class:"flex items-center space-x-2"},U={class:"flex items-center space-x-2"},V={key:1,class:"space-y-4"},C={class:"flex space-x-4"},_=["disabled"],L={key:0},z={key:1,class:"flex items-center justify-center"},B={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-4"},R={class:"mt-2 text-green-700"},$={key:3,class:"bg-red-50 border border-red-200 rounded-lg p-4"},M={class:"mt-2 text-red-700"},E={__name:"security",setup(E){const O=v("encrypt"),T=v(""),q=v(""),A=v({print:!0,copy:!0,modify:!1,annotate:!1}),G=v(""),H=v([]),Y=m(()=>H.value[0]||null),Z=v(!1),I=v(!1),J=v(""),K=v(""),N=["1. 选择操作类型：加密PDF或解密PDF","2. 加密操作：设置打开密码、权限密码和权限选项","3. 解密操作：输入PDF文件的密码",'4. 点击"选择文件"按钮上传PDF文件','5. 点击"开始加密"或"开始解密"按钮进行处理',"6. 处理完成后，系统会自动下载处理后的PDF文件"],Q=e=>{},S=e=>{K.value=e},W=async()=>{if(Y.value){if("encrypt"===O.value){if(!T.value&&!q.value)return void(K.value="请至少设置一个密码")}else if(!G.value)return void(K.value="请输入PDF密码");Z.value=!0,K.value="",I.value=!1;try{await new Promise(e=>setTimeout(e,2e3)),J.value="encrypt"===O.value?"PDF文件加密成功！已为文件设置密码保护。":"PDF文件解密成功！已移除密码保护。",I.value=!0,setTimeout(()=>{const e=new Blob(["模拟PDF文件内容"],{type:"application/pdf"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download="encrypt"===O.value?`encrypted_${Y.value.name}`:`decrypted_${Y.value.name}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},1e3)}catch(e){K.value=`操作失败：${e.message||"未知错误"}`}finally{Z.value=!1}}else K.value="请选择PDF文件"},X=()=>{O.value="encrypt",T.value="",q.value="",A.value={print:!0,copy:!0,modify:!1,annotate:!1},G.value="",removeFile(),K.value="",I.value=!1,J.value=""};return(v,m)=>(a(),e(y,{title:"PDF加密/解密",description:"为PDF文件设置密码保护或移除密码",tips:N},{default:l(()=>[s("div",x,[t(b,{multiple:!1,accept:".pdf","max-size":104857600,modelValue:H.value,"onUpdate:modelValue":m[0]||(m[0]=e=>H.value=e),onFilesChanged:Q,onError:S},null,8,["modelValue"]),s("div",g,[m[12]||(m[12]=s("h3",{class:"text-lg font-semibold mb-4"},"功能选择",-1)),s("div",f,[s("label",h,[o(s("input",{type:"radio","onUpdate:modelValue":m[1]||(m[1]=e=>O.value=e),value:"encrypt",class:"w-4 h-4 text-blue-600"},null,512),[[n,O.value]]),m[10]||(m[10]=s("span",null,"加密PDF",-1))]),s("label",w,[o(s("input",{type:"radio","onUpdate:modelValue":m[2]||(m[2]=e=>O.value=e),value:"decrypt",class:"w-4 h-4 text-blue-600"},null,512),[[n,O.value]]),m[11]||(m[11]=s("span",null,"解密PDF",-1))])])]),"encrypt"===O.value?(a(),r("div",k,[s("div",null,[m[13]||(m[13]=s("h3",{class:"text-lg font-semibold mb-2"},"打开密码",-1)),o(s("input",{"onUpdate:modelValue":m[3]||(m[3]=e=>T.value=e),type:"password",placeholder:"设置PDF打开密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[u,T.value]]),m[14]||(m[14]=s("p",{class:"text-sm text-gray-500 mt-1"},"设置后，打开PDF需要输入此密码",-1))]),s("div",null,[m[15]||(m[15]=s("h3",{class:"text-lg font-semibold mb-2"},"权限密码",-1)),o(s("input",{"onUpdate:modelValue":m[4]||(m[4]=e=>q.value=e),type:"password",placeholder:"设置PDF权限密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[u,q.value]]),m[16]||(m[16]=s("p",{class:"text-sm text-gray-500 mt-1"},"设置后，修改PDF权限需要输入此密码",-1))]),s("div",null,[m[21]||(m[21]=s("h3",{class:"text-lg font-semibold mb-2"},"权限设置",-1)),s("div",F,[s("label",P,[o(s("input",{type:"checkbox","onUpdate:modelValue":m[5]||(m[5]=e=>A.value.print=e),class:"w-4 h-4 text-blue-600"},null,512),[[c,A.value.print]]),m[17]||(m[17]=s("span",null,"允许打印",-1))]),s("label",D,[o(s("input",{type:"checkbox","onUpdate:modelValue":m[6]||(m[6]=e=>A.value.copy=e),class:"w-4 h-4 text-blue-600"},null,512),[[c,A.value.copy]]),m[18]||(m[18]=s("span",null,"允许复制内容",-1))]),s("label",j,[o(s("input",{type:"checkbox","onUpdate:modelValue":m[7]||(m[7]=e=>A.value.modify=e),class:"w-4 h-4 text-blue-600"},null,512),[[c,A.value.modify]]),m[19]||(m[19]=s("span",null,"允许修改",-1))]),s("label",U,[o(s("input",{type:"checkbox","onUpdate:modelValue":m[8]||(m[8]=e=>A.value.annotate=e),class:"w-4 h-4 text-blue-600"},null,512),[[c,A.value.annotate]]),m[20]||(m[20]=s("span",null,"允许添加注释",-1))])])])])):(a(),r("div",V,[s("div",null,[m[22]||(m[22]=s("h3",{class:"text-lg font-semibold mb-2"},"PDF密码",-1)),o(s("input",{"onUpdate:modelValue":m[9]||(m[9]=e=>G.value=e),type:"password",placeholder:"输入PDF密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[u,G.value]]),m[23]||(m[23]=s("p",{class:"text-sm text-gray-500 mt-1"},"输入PDF的打开密码或权限密码",-1))])])),s("div",C,[s("button",{onClick:W,disabled:!Y.value||Z.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[Z.value?(a(),r("span",z,[...m[24]||(m[24]=[s("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i(" 处理中... ",-1)])])):(a(),r("span",L,"开始"+d("encrypt"===O.value?"加密":"解密"),1))],8,_),s("button",{onClick:X,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),I.value?(a(),r("div",B,[m[25]||(m[25]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),s("h4",{class:"font-semibold text-green-800"},"操作成功")],-1)),s("p",R,d(J.value),1)])):p("",!0),K.value?(a(),r("div",$,[m[26]||(m[26]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),s("h4",{class:"font-semibold text-red-800"},"操作失败")],-1)),s("p",M,d(K.value),1)])):p("",!0)])]),_:1}))}};export{E as default};
