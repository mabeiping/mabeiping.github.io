import{D as E,w as _,o as n,a as e,c as i,j as k,B as h,i as r,F as N,g as R,t as d,q as p,v as F,E as V,x as U,k as H,n as K}from"./Cyl4WCzq.js";import{_ as O}from"./DH2cvNJp.js";import"./D9JWhQ1s.js";import"./D_fA1zd6.js";const W={class:"space-y-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"space-y-4"},X={key:0},Y={key:1,class:"grid grid-cols-3 gap-2"},Z=["src"],ee=["onClick"],te={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs text-center py-0.5 rounded-b"},se={key:0,class:"space-y-4"},oe={class:"grid grid-cols-2 gap-4"},le={class:"flex items-center gap-2"},re={class:"flex items-center gap-2"},ae=["disabled"],ne={class:"space-y-4"},ie={key:0,class:"space-y-4"},de={class:"p-4 bg-gray-50 rounded-lg"},ue={class:"flex justify-center"},pe=["src"],me={class:"grid grid-cols-2 gap-4"},ce={class:"p-4 bg-blue-50 rounded-lg"},ge={class:"text-2xl font-bold text-primary"},ve={class:"p-4 bg-green-50 rounded-lg"},xe={class:"text-2xl font-bold text-primary"},be={class:"p-4 bg-purple-50 rounded-lg"},ye={class:"text-2xl font-bold text-primary"},fe={class:"p-4 bg-yellow-50 rounded-lg"},we={class:"text-2xl font-bold text-primary"},ke={key:1,class:"p-6 bg-gray-50 rounded-lg text-center"},he={key:2,class:"p-4 bg-blue-50 rounded-lg"},Fe={class:"space-y-4"},Me={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ue={__name:"gif-processor",setup(ze){const M=r(null),l=r([]),v=r(null),z=r(""),y=r(400),f=r(400),m=r(200),C=r(0),u=r("medium"),G=r(!0),c=r(!0),x=r(!1),b=r(""),I=r("success"),S=H(()=>l.value.length===0?0:(l.value.length*m.value/1e3).toFixed(1)),j=()=>{M.value.click()},D=o=>{const t=Array.from(o.target.files);l.value=[...l.value,...t]},$=o=>{const s=Array.from(o.dataTransfer.files).filter(a=>a.type.startsWith("image/"));if(s.length===0){g("请选择图片文件","error");return}l.value=[...l.value,...s]},A=o=>{l.value.splice(o,1)},B=o=>URL.createObjectURL(o),L=()=>{if(l.value.length===0){g("请先上传图片","error");return}if(l.value.length===1){g("至少需要2张图片才能生成GIF","error");return}x.value=!0,setTimeout(()=>{v.value=B(l.value[0]),z.value=q(P()),x.value=!1,g("GIF生成成功","success")},2e3)},P=()=>{const s=u.value==="high"?1.5:u.value==="low"?.5:1,a=c.value?.7:1;return(5e4+l.value.length*2e4)*s*a},T=()=>{if(!v.value)return;const o=document.createElement("a");o.href=v.value,o.download=`animated-${Date.now()}.gif`,o.click(),g("GIF已下载","success")},w=o=>{switch(o){case"fast":m.value=100,u.value="low",c.value=!0;break;case"normal":m.value=200,u.value="medium",c.value=!0;break;case"slow":m.value=500,u.value="high",c.value=!1;break}g(`已应用${o==="fast"?"快速":o==="normal"?"标准":"慢速"}动画设置`,"success")},q=o=>{if(o===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,a)*100)/100+" "+s[a]},g=(o,t)=>{b.value=o,I.value=t,setTimeout(()=>{b.value=""},3e3)};return(o,t)=>(n(),E(O,{title:"GIF处理",description:"创建和编辑GIF动图"},{default:_(()=>[e("div",W,[e("div",J,[e("div",Q,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-text-primary"},"上传图片",-1)),e("div",{onClick:j,onDragover:t[0]||(t[0]=h(()=>{},["prevent"])),onDrop:h($,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer"},[e("input",{ref_key:"fileInput",ref:M,type:"file",accept:"image/*",multiple:"",onChange:D,class:"hidden"},null,544),l.value.length===0?(n(),i("div",X,[...t[11]||(t[11]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-primary mb-2"},"点击或拖拽图片到此处",-1),e("p",{class:"text-sm text-text-secondary"},"支持多个文件，按顺序生成GIF",-1)])])):(n(),i("div",Y,[(n(!0),i(N,null,R(l.value,(s,a)=>(n(),i("div",{key:a,class:"relative group"},[e("img",{src:B(s),alt:"",class:"w-full h-20 object-cover rounded border border-gray-200"},null,8,Z),e("button",{onClick:h(Ce=>A(a),["stop"]),class:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...t[12]||(t[12]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ee),e("div",te,d(a+1),1)]))),128))]))],32),l.value.length>0?(n(),i("div",se,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-text-primary"},"GIF设置",-1)),e("div",oe,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (px)",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),type:"number",min:"50",max:"1000",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[F,y.value,void 0,{number:!0}]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (px)",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),type:"number",min:"50",max:"1000",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[F,f.value,void 0,{number:!0}]])])]),e("div",le,[p(e("input",{id:"maintainAspect","onUpdate:modelValue":t[3]||(t[3]=s=>G.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[V,G.value]]),t[15]||(t[15]=e("label",{for:"maintainAspect",class:"text-sm text-text-secondary"},"保持宽高比",-1))]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"帧延迟 (毫秒)",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),type:"number",min:"50",max:"5000",step:"50",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[F,m.value,void 0,{number:!0}]]),t[17]||(t[17]=e("p",{class:"text-xs text-text-secondary mt-1"},"每帧显示的时间，越小播放越快",-1))]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"循环次数",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>C.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[18]||(t[18]=[e("option",{value:"0"},"无限循环",-1),e("option",{value:"1"},"播放1次",-1),e("option",{value:"3"},"播放3次",-1),e("option",{value:"5"},"播放5次",-1),e("option",{value:"10"},"播放10次",-1)])],512),[[U,C.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"质量",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[20]||(t[20]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量 (文件更小)",-1)])],512),[[U,u.value]])]),e("div",re,[p(e("input",{id:"optimize","onUpdate:modelValue":t[7]||(t[7]=s=>c.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[V,c.value]]),t[22]||(t[22]=e("label",{for:"optimize",class:"text-sm text-text-secondary"},"优化文件大小",-1))]),e("button",{onClick:L,disabled:x.value,class:"w-full py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},d(x.value?"生成中...":"生成GIF"),9,ae)])):k("",!0)]),e("div",ne,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-text-primary"},"预览与下载",-1)),v.value?(n(),i("div",ie,[e("div",de,[e("div",ue,[e("img",{src:v.value,alt:"GIF预览",class:"max-w-full rounded-lg shadow-lg"},null,8,pe)])]),e("div",me,[e("div",ce,[t[25]||(t[25]=e("p",{class:"text-sm text-text-secondary mb-1"},"帧数",-1)),e("p",ge,d(l.value.length),1)]),e("div",ve,[t[26]||(t[26]=e("p",{class:"text-sm text-text-secondary mb-1"},"时长",-1)),e("p",xe,d(S.value)+"秒",1)]),e("div",be,[t[27]||(t[27]=e("p",{class:"text-sm text-text-secondary mb-1"},"尺寸",-1)),e("p",ye,d(y.value)+"×"+d(f.value),1)]),e("div",fe,[t[28]||(t[28]=e("p",{class:"text-sm text-text-secondary mb-1"},"文件大小",-1)),e("p",we,d(z.value),1)])]),e("button",{onClick:T,class:"w-full py-3 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," 下载GIF ")])):(n(),i("div",ke,[...t[29]||(t[29]=[e("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 001.555-.832V9.87a1 1 0 00-.555-.832zM10 4a6 6 0 100 12 6 6 0 000-12z"})],-1),e("p",{class:"text-text-secondary"},'上传图片并点击"生成GIF"查看预览',-1)])])),l.value.length>0?(n(),i("div",he,[...t[30]||(t[30]=[e("h4",{class:"font-medium text-text-primary mb-2"},"提示",-1),e("ul",{class:"text-sm text-text-secondary space-y-1"},[e("li",null,"• 图片将按上传顺序生成GIF"),e("li",null,"• 建议使用相同尺寸的图片"),e("li",null,"• 帧延迟越小，播放越快"),e("li",null,"• 优化选项可减小文件大小")],-1)])])):k("",!0)])]),e("div",Fe,[t[35]||(t[35]=e("h3",{class:"text-lg font-semibold text-text-primary"},"常用设置",-1)),e("div",Me,[e("button",{onClick:t[8]||(t[8]=s=>w("fast")),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[32]||(t[32]=[e("p",{class:"text-lg font-bold text-primary mb-1"},"快速动画",-1),e("p",{class:"text-sm text-text-secondary"},"100ms延迟，适合快速切换",-1)])]),e("button",{onClick:t[9]||(t[9]=s=>w("normal")),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[33]||(t[33]=[e("p",{class:"text-lg font-bold text-primary mb-1"},"标准动画",-1),e("p",{class:"text-sm text-text-secondary"},"200ms延迟，适合一般用途",-1)])]),e("button",{onClick:t[10]||(t[10]=s=>w("slow")),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[34]||(t[34]=[e("p",{class:"text-lg font-bold text-primary mb-1"},"慢速动画",-1),e("p",{class:"text-sm text-text-secondary"},"500ms延迟，适合演示",-1)])])])]),b.value?(n(),i("div",{key:0,class:K(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",I.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},d(b.value),3)):k("",!0)])]),_:1}))}};export{Ue as default};
