import{_ as e}from"./B7n04RKk.js";import{_ as a}from"./CFdA-A2g.js";import{P as l}from"./DU5cCt65.js";import{G as t}from"./CiXH2Qpk.js";import{_ as s}from"./Dq87FbFi.js";import{$ as o,w as r,m as n,p as u,q as d,n as i,F as m,u as c,x as p,D as v,v as g,k as b}from"./DwDdtX2U.js";import"./C3WxCecE.js";import"./DgXBCkKa.js";const f={class:"space-y-6"},y={class:"bg-white p-4 rounded-lg shadow"},h={class:"space-y-3"},x={class:"bg-gray-50 p-3 rounded-md border border-gray-200"},w={class:"space-y-2"},_={class:"text-sm truncate"},j={class:"text-xs text-gray-500"},k={key:0,class:"text-sm text-gray-500 italic"},F={key:0,class:"mt-6"},D=["disabled"],P={key:0,class:"mr-2 animate-spin"},C={key:1,class:"mt-4"},E={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},M={class:"space-y-2 text-sm text-green-700"},B=s({__name:"merge",setup(s){let B=null;const V=b([]),$=b(!1),L=b(0),R=b(null),U=b(null),z=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]},G=async()=>{if(!(V.value.length<2)){$.value=!0,L.value=0,R.value=null,U.value=null;try{const a=await(async()=>(B||(B=(await e(async()=>{const{default:e}=await import("./CAdd_UJG.js");return{default:e}},[],import.meta.url)).default),B))();L.value=30;const l=await a.pdfMerge({files:V.value});L.value=100,setTimeout(()=>{$.value=!1;const e=l,a=URL.createObjectURL(e);U.value=a;const t=`merged_${Date.now()}.pdf`,s=document.createElement("a");s.href=a,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)},500)}catch(a){$.value=!1,R.value=a.message,a.message}}};return(e,s)=>(n(),o(a,{title:"PDF合并",description:"将多个PDF文件按顺序合并为一个文件","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽多个PDF文件到上传区域","2. 等待文件上传完成","3. 查看已选择的文件列表，确认文件顺序","4. 可以通过以下方式管理文件：","   • 拖拽文件：改变文件的合并顺序","   • 删除文件：点击文件旁边的删除按钮移除不需要的文件","   • 清空文件：点击'清空文件'按钮移除所有文件","5. 确保至少选择了2个PDF文件","6. 点击'开始合并'按钮","7. 等待处理完成后，文件会自动开始下载","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:r(()=>[u("div",f,[d(t,{multiple:!0,accept:".pdf","max-size":104857600,modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=e=>V.value=e),onFilesChanged:e.handleFilesChanged,onError:e.handleError},null,8,["modelValue","onFilesChanged","onError"]),u("div",y,[s[3]||(s[3]=u("h3",{class:"font-semibold mb-3"},"合并设置",-1)),u("div",h,[s[2]||(s[2]=u("div",null,[u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"合并顺序"),u("p",{class:"text-sm text-gray-500"}," 提示：文件将按照上传顺序合并 ")],-1)),u("div",null,[s[1]||(s[1]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"已选择文件",-1)),u("div",x,[u("ul",w,[(n(!0),i(m,null,c(V.value,(e,a)=>(n(),i("li",{key:a,class:"flex items-center justify-between"},[u("span",_,p(e.name),1),u("span",j,p(z(e.size)),1)]))),128)),0===V.value.length?(n(),i("li",k," 请选择要合并的PDF文件 ")):v("",!0)])])])])]),V.value.length>0?(n(),i("div",F,[u("button",{onClick:G,disabled:$.value||V.value.length<2,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[$.value?(n(),i("span",P,"⏳")):v("",!0),g(" "+p($.value?"处理中...":`开始合并 (${V.value.length}个文件)`),1)],8,D)])):v("",!0),$.value?(n(),i("div",C,[d(l,{progress:L.value,label:`处理进度: ${L.value}%`,error:R.value},null,8,["progress","label","error"])])):v("",!0),U.value?(n(),i("div",E,[s[5]||(s[5]=u("h3",{class:"font-semibold text-green-700 mb-2"},"合并成功",-1)),u("div",M,[u("p",null,"成功合并："+p(V.value.length)+" 个文件",1),s[4]||(s[4]=u("p",null,"文件已自动开始下载",-1))])])):v("",!0)])]),_:1}))}},[["__scopeId","data-v-c10f430d"]]);export{B as default};
