import{h as R,w as H,o as i,a as e,c as n,i as F,z as y,j as a,F as V,r as j,t as d,k as p,v as _,q as U,m as S,y as K,p as O}from"./DGDBYtXz.js";import{_ as W}from"./CnVvrBe4.js";import"./B9icYigy.js";import"./H-TvWAPN.js";const J={class:"space-y-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"space-y-4"},Y={key:0},Z={key:1,class:"grid grid-cols-3 gap-2"},ee=["src"],te=["onClick"],se={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs text-center py-0.5 rounded-b"},le={class:"space-y-4"},oe={class:"grid grid-cols-2 gap-4"},re=["disabled"],ae=["disabled"],ie={class:"flex items-center gap-2"},ne=["disabled"],de=["disabled"],ue=["disabled"],pe=["disabled"],ce={class:"flex items-center gap-2"},ge=["disabled"],be=["disabled"],me={key:0,class:"space-y-4"},ve={class:"text-lg font-semibold text-text-primary"},xe={class:"grid grid-cols-3 gap-2 max-h-[200px] overflow-y-auto"},ye=["src"],fe=["onClick"],he={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs text-center py-0.5 rounded-b"},we={class:"space-y-4"},ke={key:0,class:"space-y-4"},Fe={class:"p-4 bg-gray-50 rounded-lg"},_e={class:"flex justify-center"},Me=["src"],Ce={class:"grid grid-cols-2 gap-4"},ze={class:"p-4 bg-blue-50 rounded-lg"},Ge={class:"text-2xl font-bold text-primary"},Ie={class:"p-4 bg-green-50 rounded-lg"},Be={class:"text-2xl font-bold text-primary"},Ve={class:"p-4 bg-purple-50 rounded-lg"},je={class:"text-2xl font-bold text-primary"},Ue={class:"p-4 bg-yellow-50 rounded-lg"},Se={class:"text-2xl font-bold text-primary"},$e={key:1,class:"p-6 bg-gray-50 rounded-lg text-center"},Le={key:2,class:"p-4 bg-blue-50 rounded-lg"},Ae={class:"space-y-4"},De={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Re={__name:"gif-processor",setup(Pe){const M=a(null),s=a([]),m=a(null),C=a(""),f=a(400),h=a(400),c=a(200),z=a(0),u=a("medium"),G=a(!0),g=a(!0),v=a(!1),x=a(""),I=a("success"),$=K(()=>s.value.length===0?0:(s.value.length*c.value/1e3).toFixed(1)),L=()=>{M.value.click()},A=o=>{const t=Array.from(o.target.files);s.value=[...s.value,...t]},D=o=>{const l=Array.from(o.dataTransfer.files).filter(r=>r.type.startsWith("image/"));if(l.length===0){b("请选择图片文件","error");return}s.value=[...s.value,...l]},B=o=>{s.value.splice(o,1)},w=o=>URL.createObjectURL(o),P=()=>{if(s.value.length===0){b("请先上传图片","error");return}if(s.value.length===1){b("至少需要2张图片才能生成GIF","error");return}v.value=!0,setTimeout(()=>{m.value=w(s.value[0]),C.value=E(T()),v.value=!1,b("GIF生成成功","success")},2e3)},T=()=>{const l=u.value==="high"?1.5:u.value==="low"?.5:1,r=g.value?.7:1;return(5e4+s.value.length*2e4)*l*r},q=()=>{if(!m.value)return;const o=document.createElement("a");o.href=m.value,o.download=`animated-${Date.now()}.gif`,o.click(),b("GIF已下载","success")},k=o=>{switch(o){case"fast":c.value=100,u.value="low",g.value=!0;break;case"normal":c.value=200,u.value="medium",g.value=!0;break;case"slow":c.value=500,u.value="high",g.value=!1;break}b(`已应用${o==="fast"?"快速":o==="normal"?"标准":"慢速"}动画设置`,"success")},E=o=>{if(o===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,r)*100)/100+" "+l[r]},b=(o,t)=>{x.value=o,I.value=t,setTimeout(()=>{x.value=""},3e3)};return(o,t)=>(i(),R(W,{title:"GIF处理",description:"创建和编辑GIF动图"},{default:H(()=>[e("div",J,[e("div",Q,[e("div",X,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-text-primary"},"上传图片",-1)),e("div",{onClick:L,onDragover:t[0]||(t[0]=y(()=>{},["prevent"])),onDrop:y(D,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer"},[e("input",{ref_key:"fileInput",ref:M,type:"file",accept:"image/*",multiple:"",onChange:A,class:"hidden"},null,544),s.value.length===0?(i(),n("div",Y,[...t[11]||(t[11]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-primary mb-2"},"点击或拖拽图片到此处",-1),e("p",{class:"text-sm text-text-secondary"},"支持多个文件，按顺序生成GIF",-1)])])):(i(),n("div",Z,[(i(!0),n(V,null,j(s.value,(l,r)=>(i(),n("div",{key:r,class:"relative group"},[e("img",{src:w(l),alt:"",class:"w-full h-20 object-cover rounded border border-gray-200"},null,8,ee),e("button",{onClick:y(N=>B(r),["stop"]),class:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...t[12]||(t[12]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,te),e("div",se,d(r+1),1)]))),128))]))],32),e("div",le,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-text-primary"},"GIF设置",-1)),e("div",oe,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (px)",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>f.value=l),type:"number",min:"50",max:"1000",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:s.value.length===0},null,8,re),[[_,f.value,void 0,{number:!0}]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (px)",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>h.value=l),type:"number",min:"50",max:"1000",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:s.value.length===0},null,8,ae),[[_,h.value,void 0,{number:!0}]])])]),e("div",ie,[p(e("input",{id:"maintainAspect","onUpdate:modelValue":t[3]||(t[3]=l=>G.value=l),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:s.value.length===0},null,8,ne),[[U,G.value]]),t[15]||(t[15]=e("label",{for:"maintainAspect",class:"text-sm text-text-secondary"},"保持宽高比",-1))]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"帧延迟 (毫秒)",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>c.value=l),type:"number",min:"50",max:"5000",step:"50",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:s.value.length===0},null,8,de),[[_,c.value,void 0,{number:!0}]]),t[17]||(t[17]=e("p",{class:"text-xs text-text-secondary mt-1"},"每帧显示的时间，越小播放越快",-1))]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"循环次数",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>z.value=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:s.value.length===0},[...t[18]||(t[18]=[e("option",{value:"0"},"无限循环",-1),e("option",{value:"1"},"播放1次",-1),e("option",{value:"3"},"播放3次",-1),e("option",{value:"5"},"播放5次",-1),e("option",{value:"10"},"播放10次",-1)])],8,ue),[[S,z.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"质量",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>u.value=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:s.value.length===0},[...t[20]||(t[20]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量 (文件更小)",-1)])],8,pe),[[S,u.value]])]),e("div",ce,[p(e("input",{id:"optimize","onUpdate:modelValue":t[7]||(t[7]=l=>g.value=l),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:s.value.length===0},null,8,ge),[[U,g.value]]),t[22]||(t[22]=e("label",{for:"optimize",class:"text-sm text-text-secondary"},"优化文件大小",-1))]),e("button",{onClick:P,disabled:v.value||s.value.length===0,class:"w-full py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},d(v.value?"生成中...":s.value.length===0?"请先上传图片":"生成GIF"),9,be)])]),s.value.length>0?(i(),n("div",me,[e("h3",ve,"已上传图片 ("+d(s.value.length)+")",1),e("div",xe,[(i(!0),n(V,null,j(s.value,(l,r)=>(i(),n("div",{key:r,class:"relative group"},[e("img",{src:w(l),alt:"",class:"w-full h-20 object-cover rounded border border-gray-200"},null,8,ye),e("button",{onClick:y(N=>B(r),["stop"]),class:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...t[25]||(t[25]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,fe),e("div",he,d(r+1),1)]))),128))])])):F("",!0),e("div",we,[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold text-text-primary"},"预览与下载",-1)),m.value?(i(),n("div",ke,[e("div",Fe,[e("div",_e,[e("img",{src:m.value,alt:"GIF预览",class:"max-w-full rounded-lg shadow-lg"},null,8,Me)])]),e("div",Ce,[e("div",ze,[t[26]||(t[26]=e("p",{class:"text-sm text-text-secondary mb-1"},"帧数",-1)),e("p",Ge,d(s.value.length),1)]),e("div",Ie,[t[27]||(t[27]=e("p",{class:"text-sm text-text-secondary mb-1"},"时长",-1)),e("p",Be,d($.value)+"秒",1)]),e("div",Ve,[t[28]||(t[28]=e("p",{class:"text-sm text-text-secondary mb-1"},"尺寸",-1)),e("p",je,d(f.value)+"×"+d(h.value),1)]),e("div",Ue,[t[29]||(t[29]=e("p",{class:"text-sm text-text-secondary mb-1"},"文件大小",-1)),e("p",Se,d(C.value),1)])]),e("button",{onClick:q,class:"w-full py-3 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," 下载GIF ")])):(i(),n("div",$e,[...t[30]||(t[30]=[e("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 001.555-.832V9.87a1 1 0 00-.555-.832zM10 4a6 6 0 100 12 6 6 0 000-12z"})],-1),e("p",{class:"text-text-secondary"},'上传图片并点击"生成GIF"查看预览',-1)])])),s.value.length>0?(i(),n("div",Le,[...t[31]||(t[31]=[e("h4",{class:"font-medium text-text-primary mb-2"},"提示",-1),e("ul",{class:"text-sm text-text-secondary space-y-1"},[e("li",null,"• 图片将按上传顺序生成GIF"),e("li",null,"• 建议使用相同尺寸的图片"),e("li",null,"• 帧延迟越小，播放越快"),e("li",null,"• 优化选项可减小文件大小")],-1)])])):F("",!0)])]),e("div",Ae,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-text-primary"},"常用设置",-1)),e("div",De,[e("button",{onClick:t[8]||(t[8]=l=>k("fast")),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[33]||(t[33]=[e("p",{class:"text-lg font-bold text-primary mb-1"},"快速动画",-1),e("p",{class:"text-sm text-text-secondary"},"100ms延迟，适合快速切换",-1)])]),e("button",{onClick:t[9]||(t[9]=l=>k("normal")),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[34]||(t[34]=[e("p",{class:"text-lg font-bold text-primary mb-1"},"标准动画",-1),e("p",{class:"text-sm text-text-secondary"},"200ms延迟，适合一般用途",-1)])]),e("button",{onClick:t[10]||(t[10]=l=>k("slow")),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[35]||(t[35]=[e("p",{class:"text-lg font-bold text-primary mb-1"},"慢速动画",-1),e("p",{class:"text-sm text-text-secondary"},"500ms延迟，适合演示",-1)])])])]),x.value?(i(),n("div",{key:0,class:O(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",I.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},d(x.value),3)):F("",!0)])]),_:1}))}};export{Re as default};
