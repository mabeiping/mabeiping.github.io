import{i as j,w as z,o as v,a as l,b as D,j as o,v as a,k as P,c,d as B,t as x,f as k,l as r,m as N}from"./-R7zUpUx.js";import{_ as R}from"./1SagYtif.js";import{G as L}from"./zseaTYbb.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const O={class:"space-y-6"},$={class:"bg-gray-50 p-4 rounded-lg"},S={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},_={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},E={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},T={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},J={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},W={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},G={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},A={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},H={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},q={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},I={class:"space-y-4"},K={class:"space-y-2"},Q={class:"flex items-center space-x-2"},X={class:"flex items-center space-x-2"},Y={class:"flex items-center space-x-2"},Z={class:"flex space-x-4"},ee=["disabled"],le={key:0},te={key:1,class:"flex items-center justify-center"},se={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},oe={class:"mt-2 text-green-700"},ae={key:0,class:"mt-1 text-green-700 text-sm"},re={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ne={class:"mt-2 text-red-700"},ge={__name:"ocr",setup(ue){const n=r("zh_en"),s=r("pdf"),u=r("text"),f=r(""),y=r([]),w=N(()=>y.value[0]||null),g=r(!1),b=r(!1),h=r(""),d=r(""),p=r(null),V=["1. 选择识别语言：中文、英文、中英文或自动检测","2. 选择输出格式：PDF、Word、文本或JSON","3. 选择识别模式：仅提取文本、保留布局或图片文字识别","4. 输入页面范围（可选），留空表示识别全部页面",'5. 点击"选择文件"按钮上传PDF或图片文件','6. 点击"开始识别"按钮进行处理',"7. 处理完成后，系统会自动下载识别结果文件"],C=i=>{},U=i=>{d.value=i},F=async()=>{if(!w.value){d.value="请选择文件";return}g.value=!0,d.value="",b.value=!1,p.value=null;try{await new Promise(e=>setTimeout(e,3e3)),p.value={charCount:Math.floor(Math.random()*1e4)+1e3,wordCount:Math.floor(Math.random()*2e3)+500};const i={pdf:"PDF",word:"Word",txt:"文本",json:"JSON"};h.value=`文件文字识别成功！已生成${i[s.value]}格式的识别结果。`,b.value=!0,setTimeout(()=>{const e=new Blob(["模拟OCR识别结果内容"],{type:"application/octet-stream"}),t=URL.createObjectURL(e),m=document.createElement("a");m.href=t,m.download=`ocr_result_${w.value.name.replace(/\.[^/.]+$/,`.${s.value==="word"?"docx":s.value}`)}`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(t)},1e3)}catch(i){d.value=`识别失败：${i.message||"未知错误"}`}finally{g.value=!1}},M=()=>{n.value="zh_en",s.value="pdf",u.value="text",f.value="",removeFile(),d.value="",b.value=!1,h.value="",p.value=null};return(i,e)=>(v(),j(R,{title:"PDF文字识别",description:"识别PDF文件中的文字，支持多种语言和输出格式",tips:V},{default:z(()=>[l("div",O,[D(L,{multiple:!1,accept:".pdf, .jpg, .jpeg, .png","max-size":100*1024*1024,modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),onFilesChanged:C,onError:U},null,8,["modelValue"]),l("div",$,[e[17]||(e[17]=l("h3",{class:"text-lg font-semibold mb-4"},"识别语言",-1)),l("div",S,[l("label",_,[o(l("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),value:"zh",class:"w-4 h-4 text-blue-600"},null,512),[[a,n.value]]),e[13]||(e[13]=l("span",null,"中文",-1))]),l("label",E,[o(l("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=t=>n.value=t),value:"en",class:"w-4 h-4 text-blue-600"},null,512),[[a,n.value]]),e[14]||(e[14]=l("span",null,"英文",-1))]),l("label",T,[o(l("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=t=>n.value=t),value:"zh_en",class:"w-4 h-4 text-blue-600"},null,512),[[a,n.value]]),e[15]||(e[15]=l("span",null,"中英文",-1))]),l("label",J,[o(l("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=t=>n.value=t),value:"auto",class:"w-4 h-4 text-blue-600"},null,512),[[a,n.value]]),e[16]||(e[16]=l("span",null,"自动检测",-1))])])]),l("div",null,[e[22]||(e[22]=l("h3",{class:"text-lg font-semibold mb-4"},"输出格式",-1)),l("div",W,[l("label",G,[o(l("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=t=>s.value=t),value:"pdf",class:"w-4 h-4 text-blue-600"},null,512),[[a,s.value]]),e[18]||(e[18]=l("span",null,"PDF",-1))]),l("label",A,[o(l("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=t=>s.value=t),value:"word",class:"w-4 h-4 text-blue-600"},null,512),[[a,s.value]]),e[19]||(e[19]=l("span",null,"Word",-1))]),l("label",H,[o(l("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=t=>s.value=t),value:"txt",class:"w-4 h-4 text-blue-600"},null,512),[[a,s.value]]),e[20]||(e[20]=l("span",null,"文本",-1))]),l("label",q,[o(l("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=t=>s.value=t),value:"json",class:"w-4 h-4 text-blue-600"},null,512),[[a,s.value]]),e[21]||(e[21]=l("span",null,"JSON",-1))])])]),l("div",I,[l("div",null,[e[26]||(e[26]=l("h3",{class:"text-lg font-semibold mb-2"},"识别模式",-1)),l("div",K,[l("label",Q,[o(l("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=t=>u.value=t),value:"text",class:"w-4 h-4 text-blue-600"},null,512),[[a,u.value]]),e[23]||(e[23]=l("span",null,"仅提取文本",-1))]),l("label",X,[o(l("input",{type:"radio","onUpdate:modelValue":e[10]||(e[10]=t=>u.value=t),value:"layout",class:"w-4 h-4 text-blue-600"},null,512),[[a,u.value]]),e[24]||(e[24]=l("span",null,"保留布局",-1))]),l("label",Y,[o(l("input",{type:"radio","onUpdate:modelValue":e[11]||(e[11]=t=>u.value=t),value:"image",class:"w-4 h-4 text-blue-600"},null,512),[[a,u.value]]),e[25]||(e[25]=l("span",null,"图片文字识别",-1))])])]),l("div",null,[e[27]||(e[27]=l("h3",{class:"text-lg font-semibold mb-2"},"页面范围",-1)),o(l("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>f.value=t),type:"text",placeholder:"例如：1-5, 7, 9-12（留空表示全部）",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[P,f.value]]),e[28]||(e[28]=l("p",{class:"text-sm text-gray-500 mt-1"},"支持逗号分隔的页码和页码范围，如：1-5, 7, 9-12",-1))])]),l("div",Z,[l("button",{onClick:F,disabled:!w.value||g.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[g.value?(v(),c("span",te,[...e[29]||(e[29]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" 处理中... ",-1)])])):(v(),c("span",le,"开始识别"))],8,ee),l("button",{onClick:M,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),b.value?(v(),c("div",se,[e[30]||(e[30]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),l("h4",{class:"font-semibold text-green-800"},"识别成功")],-1)),l("p",oe,x(h.value),1),p.value?(v(),c("p",ae," 识别到 "+x(p.value.charCount)+" 个字符，"+x(p.value.wordCount)+" 个单词 ",1)):k("",!0)])):k("",!0),d.value?(v(),c("div",re,[e[31]||(e[31]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),l("h4",{class:"font-semibold text-red-800"},"识别失败")],-1)),l("p",ne,x(d.value),1)])):k("",!0)])]),_:1}))}};export{ge as default};
