import{j as e,w as l,o as a,a as t,b as s,q as o,v as r,s as u,c as n,d,t as c,l as i,r as p,x as v}from"./CU9sc1yl.js";import{_ as m}from"./KU0exf4c.js";import{G as b}from"./CwQEddwr.js";import"./BaOdEBWl.js";import"./ByWfkjdR.js";import"./CIUYv0cq.js";import"./DKwMAC3i.js";import"./BCo6x5W8.js";const g={class:"space-y-6"},x={class:"bg-gray-50 p-4 rounded-lg"},h={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},y={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},f={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},w={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},k={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},j={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},U={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},V={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},C={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},_={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},z={class:"space-y-4"},F={class:"space-y-2"},M={class:"flex items-center space-x-2"},P={class:"flex items-center space-x-2"},D={class:"flex items-center space-x-2"},L={class:"flex space-x-4"},O=["disabled"],$={key:0},R={key:1,class:"flex items-center justify-center"},B={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},J={class:"mt-2 text-green-700"},N={key:0,class:"mt-1 text-green-700 text-sm"},S={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},W={class:"mt-2 text-red-700"},E={__name:"ocr",setup(E){const T=p("zh_en"),q=p("pdf"),A=p("text"),G=p(""),H=p([]),Y=v(()=>H.value[0]||null),Z=p(!1),I=p(!1),K=p(""),Q=p(""),X=p(null),ee=["1. 选择识别语言：中文、英文、中英文或自动检测","2. 选择输出格式：PDF、Word、文本或JSON","3. 选择识别模式：仅提取文本、保留布局或图片文字识别","4. 输入页面范围（可选），留空表示识别全部页面",'5. 点击"选择文件"按钮上传PDF或图片文件','6. 点击"开始识别"按钮进行处理',"7. 处理完成后，系统会自动下载识别结果文件"],le=e=>{},ae=e=>{Q.value=e},te=async()=>{if(Y.value){Z.value=!0,Q.value="",I.value=!1,X.value=null;try{await new Promise(e=>setTimeout(e,3e3)),X.value={charCount:Math.floor(1e4*Math.random())+1e3,wordCount:Math.floor(2e3*Math.random())+500};const e={pdf:"PDF",word:"Word",txt:"文本",json:"JSON"};K.value=`文件文字识别成功！已生成${e[q.value]}格式的识别结果。`,I.value=!0,setTimeout(()=>{const e=new Blob(["模拟OCR识别结果内容"],{type:"application/octet-stream"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=`ocr_result_${Y.value.name.replace(/\.[^/.]+$/,`.${"word"===q.value?"docx":q.value}`)}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},1e3)}catch(e){Q.value=`识别失败：${e.message||"未知错误"}`}finally{Z.value=!1}}else Q.value="请选择文件"},se=()=>{T.value="zh_en",q.value="pdf",A.value="text",G.value="",removeFile(),Q.value="",I.value=!1,K.value="",X.value=null};return(p,v)=>(a(),e(m,{title:"PDF文字识别",description:"识别PDF文件中的文字，支持多种语言和输出格式",tips:ee},{default:l(()=>[t("div",g,[s(b,{multiple:!1,accept:".pdf, .jpg, .jpeg, .png","max-size":104857600,modelValue:H.value,"onUpdate:modelValue":v[0]||(v[0]=e=>H.value=e),onFilesChanged:le,onError:ae},null,8,["modelValue"]),t("div",x,[v[17]||(v[17]=t("h3",{class:"text-lg font-semibold mb-4"},"识别语言",-1)),t("div",h,[t("label",y,[o(t("input",{type:"radio","onUpdate:modelValue":v[1]||(v[1]=e=>T.value=e),value:"zh",class:"w-4 h-4 text-blue-600"},null,512),[[r,T.value]]),v[13]||(v[13]=t("span",null,"中文",-1))]),t("label",f,[o(t("input",{type:"radio","onUpdate:modelValue":v[2]||(v[2]=e=>T.value=e),value:"en",class:"w-4 h-4 text-blue-600"},null,512),[[r,T.value]]),v[14]||(v[14]=t("span",null,"英文",-1))]),t("label",w,[o(t("input",{type:"radio","onUpdate:modelValue":v[3]||(v[3]=e=>T.value=e),value:"zh_en",class:"w-4 h-4 text-blue-600"},null,512),[[r,T.value]]),v[15]||(v[15]=t("span",null,"中英文",-1))]),t("label",k,[o(t("input",{type:"radio","onUpdate:modelValue":v[4]||(v[4]=e=>T.value=e),value:"auto",class:"w-4 h-4 text-blue-600"},null,512),[[r,T.value]]),v[16]||(v[16]=t("span",null,"自动检测",-1))])])]),t("div",null,[v[22]||(v[22]=t("h3",{class:"text-lg font-semibold mb-4"},"输出格式",-1)),t("div",j,[t("label",U,[o(t("input",{type:"radio","onUpdate:modelValue":v[5]||(v[5]=e=>q.value=e),value:"pdf",class:"w-4 h-4 text-blue-600"},null,512),[[r,q.value]]),v[18]||(v[18]=t("span",null,"PDF",-1))]),t("label",V,[o(t("input",{type:"radio","onUpdate:modelValue":v[6]||(v[6]=e=>q.value=e),value:"word",class:"w-4 h-4 text-blue-600"},null,512),[[r,q.value]]),v[19]||(v[19]=t("span",null,"Word",-1))]),t("label",C,[o(t("input",{type:"radio","onUpdate:modelValue":v[7]||(v[7]=e=>q.value=e),value:"txt",class:"w-4 h-4 text-blue-600"},null,512),[[r,q.value]]),v[20]||(v[20]=t("span",null,"文本",-1))]),t("label",_,[o(t("input",{type:"radio","onUpdate:modelValue":v[8]||(v[8]=e=>q.value=e),value:"json",class:"w-4 h-4 text-blue-600"},null,512),[[r,q.value]]),v[21]||(v[21]=t("span",null,"JSON",-1))])])]),t("div",z,[t("div",null,[v[26]||(v[26]=t("h3",{class:"text-lg font-semibold mb-2"},"识别模式",-1)),t("div",F,[t("label",M,[o(t("input",{type:"radio","onUpdate:modelValue":v[9]||(v[9]=e=>A.value=e),value:"text",class:"w-4 h-4 text-blue-600"},null,512),[[r,A.value]]),v[23]||(v[23]=t("span",null,"仅提取文本",-1))]),t("label",P,[o(t("input",{type:"radio","onUpdate:modelValue":v[10]||(v[10]=e=>A.value=e),value:"layout",class:"w-4 h-4 text-blue-600"},null,512),[[r,A.value]]),v[24]||(v[24]=t("span",null,"保留布局",-1))]),t("label",D,[o(t("input",{type:"radio","onUpdate:modelValue":v[11]||(v[11]=e=>A.value=e),value:"image",class:"w-4 h-4 text-blue-600"},null,512),[[r,A.value]]),v[25]||(v[25]=t("span",null,"图片文字识别",-1))])])]),t("div",null,[v[27]||(v[27]=t("h3",{class:"text-lg font-semibold mb-2"},"页面范围",-1)),o(t("input",{"onUpdate:modelValue":v[12]||(v[12]=e=>G.value=e),type:"text",placeholder:"例如：1-5, 7, 9-12（留空表示全部）",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[u,G.value]]),v[28]||(v[28]=t("p",{class:"text-sm text-gray-500 mt-1"},"支持逗号分隔的页码和页码范围，如：1-5, 7, 9-12",-1))])]),t("div",L,[t("button",{onClick:te,disabled:!Y.value||Z.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[Z.value?(a(),n("span",R,[...v[29]||(v[29]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d(" 处理中... ",-1)])])):(a(),n("span",$,"开始识别"))],8,O),t("button",{onClick:se,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),I.value?(a(),n("div",B,[v[30]||(v[30]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"识别成功")],-1)),t("p",J,c(K.value),1),X.value?(a(),n("p",N," 识别到 "+c(X.value.charCount)+" 个字符，"+c(X.value.wordCount)+" 个单词 ",1)):i("",!0)])):i("",!0),Q.value?(a(),n("div",S,[v[31]||(v[31]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"识别失败")],-1)),t("p",W,c(Q.value),1)])):i("",!0)])]),_:1}))}};export{E as default};
