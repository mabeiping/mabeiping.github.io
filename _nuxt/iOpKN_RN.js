import{z as R,i as S,w as $,o as n,a as l,b as E,c as i,j as c,v as f,k as N,f as w,F as T,r as A,q as I,t as h,d as F,l as r}from"./-R7zUpUx.js";import{_ as O}from"./1SagYtif.js";import{G}from"./zseaTYbb.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const q={class:"space-y-6"},H={key:0,class:"space-y-4"},J={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},K={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},Q={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},W={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},X={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},Y={class:"flex space-x-4"},Z={class:"flex items-center space-x-2 cursor-pointer"},ee={class:"flex items-center space-x-2 cursor-pointer"},le={class:"flex items-center space-x-2 cursor-pointer"},se={key:0},te={key:1},oe={key:2,class:"bg-gray-50 p-4 rounded-lg"},ae={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3"},ne=["onClick"],re={class:"flex items-center justify-center w-full h-16 bg-white rounded mb-1"},ue={class:"text-gray-500"},ie={class:"text-xs"},de={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},pe={class:"text-blue-700"},ve={class:"flex space-x-4"},ce=["disabled"],ge={key:0},me={key:1,class:"flex items-center justify-center"},be={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},fe={class:"mt-2 text-green-700"},xe={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ye={class:"mt-2 text-red-700"},Pe={__name:"rotate",setup(we){const P=r([]),b=r(null),u=r(0),o=r("90"),a=r("all"),x=r(""),y=r(""),p=r([]),k=r(!1),C=r(!1),V=r(""),g=r(""),D=['1. 点击"选择文件"按钮上传PDF文件',"2. 选择旋转角度：顺时针90°、180°、270°或逆时针90°","3. 选择页面范围：所有页面、指定页面或页面范围","4. 根据选择模式输入相应的页面信息","5. 或在页面预览中点击选择要旋转的页面",'6. 点击"开始旋转"按钮进行处理',"7. 处理完成后，系统会自动下载处理后的PDF文件"];R([a,x,y],()=>{_()});const _=()=>{const t=[];if(a.value==="specific"&&x.value){const e=x.value.split(",").map(s=>parseInt(s.trim())).filter(s=>!isNaN(s)&&s>0&&s<=u.value);t.push(...e)}else if(a.value==="range"&&y.value)y.value.split(",").forEach(s=>{const d=s.trim();if(d.includes("-")){const[m,U]=d.split("-").map(v=>parseInt(v.trim())).filter(v=>!isNaN(v));if(m&&U&&m<=U)for(let v=m;v<=U;v++)v>0&&v<=u.value&&t.push(v)}else{const m=parseInt(d);!isNaN(m)&&m>0&&m<=u.value&&t.push(m)}});else if(a.value==="all"&&u.value>0)for(let e=1;e<=u.value;e++)t.push(e);p.value=[...new Set(t)].sort((e,s)=>e-s)},B=t=>{const e=p.value.indexOf(t);e>-1?p.value.splice(e,1):p.value.push(t)},M=t=>{b.value=t.length>0?t[0]:null,g.value="",b.value?(u.value=Math.floor(Math.random()*20)+1,_()):u.value=0},j=t=>{g.value=t,b.value=null,u.value=0},z=async()=>{if(!b.value){g.value="请选择PDF文件";return}k.value=!0,g.value="",C.value=!1;try{await new Promise(e=>setTimeout(e,2e3));let t="";o.value==="90"?t="顺时针90°":o.value==="180"?t="顺时针180°":o.value==="270"?t="顺时针270°":o.value==="-90"&&(t="逆时针90°"),V.value=`成功将 ${p.value.length} 个页面旋转 ${t}！`,C.value=!0,setTimeout(()=>{const e=new Blob(["模拟旋转后的PDF文件内容"],{type:"application/pdf"}),s=URL.createObjectURL(e),d=document.createElement("a");d.href=s,d.download=`rotated_${b.value.name}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s)},1e3)}catch(t){g.value=`旋转失败：${t.message||"未知错误"}`}finally{k.value=!1}},L=()=>{o.value="90",a.value="all",x.value="",y.value="",p.value=[],g.value="",C.value=!1,V.value=""};return(t,e)=>(n(),S(O,{title:"PDF页面旋转",description:"旋转PDF文件中的页面，支持单个页面和批量旋转",tips:D},{default:$(()=>[l("div",q,[E(G,{multiple:!1,accept:".pdf",maxSize:100*1024*1024,modelValue:P.value,"onUpdate:modelValue":e[0]||(e[0]=s=>P.value=s),onFilesChanged:M,onError:j},null,8,["modelValue"]),b.value&&u.value?(n(),i("div",H,[l("div",null,[e[14]||(e[14]=l("h3",{class:"text-lg font-semibold mb-2"},"旋转角度",-1)),l("div",J,[l("label",K,[c(l("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),value:"90",class:"w-4 h-4 text-blue-600"},null,512),[[f,o.value]]),e[10]||(e[10]=l("span",null,"顺时针 90°",-1))]),l("label",Q,[c(l("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s),value:"180",class:"w-4 h-4 text-blue-600"},null,512),[[f,o.value]]),e[11]||(e[11]=l("span",null,"顺时针 180°",-1))]),l("label",W,[c(l("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=s=>o.value=s),value:"270",class:"w-4 h-4 text-blue-600"},null,512),[[f,o.value]]),e[12]||(e[12]=l("span",null,"顺时针 270°",-1))]),l("label",X,[c(l("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>o.value=s),value:"-90",class:"w-4 h-4 text-blue-600"},null,512),[[f,o.value]]),e[13]||(e[13]=l("span",null,"逆时针 90°",-1))])])]),l("div",null,[e[18]||(e[18]=l("h3",{class:"text-lg font-semibold mb-2"},"页面选择",-1)),l("div",Y,[l("label",Z,[c(l("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=s=>a.value=s),value:"all",class:"w-4 h-4 text-blue-600"},null,512),[[f,a.value]]),e[15]||(e[15]=l("span",null,"所有页面",-1))]),l("label",ee,[c(l("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=s=>a.value=s),value:"specific",class:"w-4 h-4 text-blue-600"},null,512),[[f,a.value]]),e[16]||(e[16]=l("span",null,"指定页面",-1))]),l("label",le,[c(l("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=s=>a.value=s),value:"range",class:"w-4 h-4 text-blue-600"},null,512),[[f,a.value]]),e[17]||(e[17]=l("span",null,"页面范围",-1))])])]),a.value==="specific"?(n(),i("div",se,[e[19]||(e[19]=l("h3",{class:"text-lg font-semibold mb-2"},"指定页面",-1)),c(l("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>x.value=s),type:"text",placeholder:"例如：1, 3, 5, 7",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[N,x.value]]),e[20]||(e[20]=l("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码，如：1, 3, 5, 7",-1))])):a.value==="range"?(n(),i("div",te,[e[21]||(e[21]=l("h3",{class:"text-lg font-semibold mb-2"},"页面范围",-1)),c(l("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>y.value=s),type:"text",placeholder:"例如：1-5, 7-10, 12",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[N,y.value]]),e[22]||(e[22]=l("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码范围，如：1-5, 7-10, 12",-1))])):w("",!0),u.value>0?(n(),i("div",oe,[e[23]||(e[23]=l("h3",{class:"text-lg font-semibold mb-3"},"页面预览",-1)),l("div",ae,[(n(!0),i(T,null,A(u.value,s=>(n(),i("div",{key:s,class:I(["border rounded-lg p-2 text-center cursor-pointer transition-colors",{"border-blue-500 bg-blue-50":p.value.includes(s)}]),onClick:d=>B(s)},[l("div",re,[l("span",ue,h(s),1)]),l("span",ie,h(s)+"页",1)],10,ne))),128))])])):w("",!0),p.value.length>0?(n(),i("div",de,[l("p",pe,[e[24]||(e[24]=F(" 已选择 ",-1)),l("strong",null,h(p.value.length),1),e[25]||(e[25]=F(" 个页面进行旋转 ",-1))])])):w("",!0)])):w("",!0),l("div",ve,[l("button",{onClick:z,disabled:!b.value||k.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[k.value?(n(),i("span",me,[...e[26]||(e[26]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),F(" 处理中... ",-1)])])):(n(),i("span",ge,"开始旋转"))],8,ce),l("button",{onClick:L,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),C.value?(n(),i("div",be,[e[27]||(e[27]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),l("h4",{class:"font-semibold text-green-800"},"旋转成功")],-1)),l("p",fe,h(V.value),1)])):w("",!0),g.value?(n(),i("div",xe,[e[28]||(e[28]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),l("h4",{class:"font-semibold text-red-800"},"旋转失败")],-1)),l("p",ye,h(g.value),1)])):w("",!0)])]),_:1}))}};export{Pe as default};
