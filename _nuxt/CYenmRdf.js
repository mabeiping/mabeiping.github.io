import{j as e,w as l,o as a,a as t,b as s,z as u,c as o,q as r,y as d,C as n,l as i,d as c,t as m,r as v}from"./HXycOAlW.js";import{_ as b}from"./D1uvpjsy.js";import{P as p}from"./CCskhr4_.js";import{G as g}from"./0iwS8AcL.js";import x from"./CG87npSv.js";import{_ as y}from"./BCo6x5W8.js";import"./CP1Hj45X.js";import"./CPBe7JJp.js";import"./BadZoQ71.js";import"./Dyo0McTI.js";import"./DwtW3TPZ.js";const f={class:"space-y-6"},h={class:"bg-white p-4 rounded-lg shadow"},k={class:"space-y-3"},j={class:"grid grid-cols-2 gap-2"},w={key:0,class:"bg-gray-50 p-3 rounded-md border border-gray-200"},C={class:"space-y-2"},U={class:"space-y-1"},V={class:"flex items-center"},P={class:"flex items-center"},D={key:1,class:"bg-gray-50 p-3 rounded-md border border-gray-200"},F={class:"space-y-2"},_={class:"space-y-1"},S={class:"flex items-center"},z={class:"flex items-center"},E={key:0,class:"mt-6"},G=["disabled"],O={key:0,class:"mr-2 animate-spin"},I={key:1,class:"mt-4"},$={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},H={class:"space-y-2 text-sm text-green-700"},J={key:0},L={key:1},N=y({__name:"extract",setup(y){const N=v([]),R=v(null),q=v("image"),T=v("png"),Y=v("xlsx"),Z=v({includeHiddenImages:!1,preserveOriginalSize:!0,mergedCells:!0,headerDetection:!0}),A=v(!1),B=v(0),K=v(null),M=v(null),Q=v(0),W=e=>{R.value=e.length>0?e[0]:null,K.value=""},X=e=>{K.value=e,R.value=null},ee=e=>{q.value=e},le=async()=>{if(R.value){A.value=!0,B.value=0,K.value=null,M.value=null,Q.value=0;try{const e={file:R.value,extractFeature:q.value,imageFormat:"image"===q.value?T.value:"",tableFormat:"table"===q.value?Y.value:"",extractOptions:Z.value};B.value=30;const l=await x.pdfExtract(e);B.value=100,setTimeout(()=>{A.value=!1;const e=l,a=URL.createObjectURL(e);M.value=a;const t=`extracted_${Date.now()}.${"image"===q.value?T.value:Y.value}`,s=document.createElement("a");s.href=a,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),Q.value="image"===q.value?5:2},500)}catch(e){A.value=!1,K.value=e.message,e.message}}};return(v,x)=>(a(),e(b,{title:"PDF提取",description:"从PDF文档中提取图片和表格数据","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择提取功能类型：","   • 图片提取：从PDF中提取所有图片，保持原始质量","   • 表格提取：从PDF中识别并提取表格数据","4. 选择提取选项：","   • 图片提取：选择图片格式（PNG/JPG）","   • 表格提取：选择导出格式（Excel/CSV）","5. 点击'开始提取'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看提取结果信息，包括成功提取的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:l(()=>[t("div",f,[s(g,{multiple:!1,accept:".pdf",maxSize:104857600,modelValue:N.value,"onUpdate:modelValue":x[0]||(x[0]=e=>N.value=e),onFilesChanged:W,onError:X},null,8,["modelValue"]),t("div",h,[x[22]||(x[22]=t("h3",{class:"font-semibold mb-3"},"提取设置",-1)),t("div",k,[t("div",null,[x[9]||(x[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"提取功能",-1)),t("div",j,[t("button",{onClick:x[1]||(x[1]=e=>ee("image")),class:u(["py-2 px-4 rounded-md transition-all duration-300 text-sm font-medium","image"===q.value?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"])}," 图片提取 ",2),t("button",{onClick:x[2]||(x[2]=e=>ee("table")),class:u(["py-2 px-4 rounded-md transition-all duration-300 text-sm font-medium","table"===q.value?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"])}," 表格提取 ",2)])]),"image"===q.value?(a(),o("div",w,[x[15]||(x[15]=t("h4",{class:"font-medium text-sm mb-2"},"图片提取设置",-1)),t("div",C,[t("div",null,[x[11]||(x[11]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"图片格式",-1)),r(t("select",{"onUpdate:modelValue":x[3]||(x[3]=e=>T.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[10]||(x[10]=[t("option",{value:"png"},"PNG（无损压缩，质量最佳）",-1),t("option",{value:"jpg"},"JPG（有损压缩，文件较小）",-1)])],512),[[d,T.value]])]),t("div",null,[x[14]||(x[14]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"提取选项",-1)),t("div",U,[t("label",V,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=e=>Z.value.includeHiddenImages=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[n,Z.value.includeHiddenImages]]),x[12]||(x[12]=t("span",{class:"ml-2 text-xs text-gray-700"},"包含隐藏图片",-1))]),t("label",P,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=e=>Z.value.preserveOriginalSize=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[n,Z.value.preserveOriginalSize]]),x[13]||(x[13]=t("span",{class:"ml-2 text-xs text-gray-700"},"保持原始尺寸",-1))])])])])])):i("",!0),"table"===q.value?(a(),o("div",D,[x[21]||(x[21]=t("h4",{class:"font-medium text-sm mb-2"},"表格提取设置",-1)),t("div",F,[t("div",null,[x[17]||(x[17]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"导出格式",-1)),r(t("select",{"onUpdate:modelValue":x[6]||(x[6]=e=>Y.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[16]||(x[16]=[t("option",{value:"xlsx"},"Excel (.xlsx)",-1),t("option",{value:"csv"},"CSV (.csv)",-1)])],512),[[d,Y.value]])]),t("div",null,[x[20]||(x[20]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"提取选项",-1)),t("div",_,[t("label",S,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[7]||(x[7]=e=>Z.value.mergedCells=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[n,Z.value.mergedCells]]),x[18]||(x[18]=t("span",{class:"ml-2 text-xs text-gray-700"},"保留合并单元格",-1))]),t("label",z,[r(t("input",{type:"checkbox","onUpdate:modelValue":x[8]||(x[8]=e=>Z.value.headerDetection=e),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[n,Z.value.headerDetection]]),x[19]||(x[19]=t("span",{class:"ml-2 text-xs text-gray-700"},"自动检测表头",-1))])])])])])):i("",!0)])]),R.value?(a(),o("div",E,[t("button",{onClick:le,disabled:A.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[A.value?(a(),o("span",O,"⏳")):i("",!0),c(" "+m(A.value?"处理中...":"开始提取"),1)],8,G)])):i("",!0),A.value?(a(),o("div",I,[s(p,{progress:B.value,label:`处理进度: ${B.value}%`,error:K.value},null,8,["progress","label","error"])])):i("",!0),M.value?(a(),o("div",$,[x[24]||(x[24]=t("h3",{class:"font-semibold text-green-700 mb-2"},"提取成功",-1)),t("div",H,[t("p",null,"成功提取："+m(Q.value)+" 个文件",1),t("p",null,"提取类型："+m("image"===q.value?"图片提取":"表格提取"),1),"image"===q.value?(a(),o("p",J,"图片格式："+m(T.value.toUpperCase()),1)):i("",!0),"table"===q.value?(a(),o("p",L,"导出格式："+m(Y.value.toUpperCase()),1)):i("",!0),x[23]||(x[23]=t("p",null,"文件已自动开始下载",-1))])])):i("",!0)])]),_:1}))}},[["__scopeId","data-v-8e007acd"]]);export{N as default};
