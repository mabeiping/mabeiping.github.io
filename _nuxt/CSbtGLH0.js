import{_ as _export_sfc,r as ref,D as watch,c as createElementBlock,a as createBaseVNode,g as createStaticVNode,m as createCommentVNode,p as normalizeClass,t as toDisplayString,F as Fragment,l as renderList,d as createTextVNode,o as openBlock}from"./CXV6dDrr.js";const _hoisted_1={class:"calculator-page"},_hoisted_2={class:"calculator-container"},_hoisted_3={class:"mode-switcher"},_hoisted_4={class:"calculator-display"},_hoisted_5={class:"display-expression"},_hoisted_6={class:"display-current"},_hoisted_7={key:0,class:"display-memory"},_hoisted_8={key:0,class:"calculator-buttons basic-mode"},_hoisted_9={class:"button-row"},_hoisted_10={class:"button-row"},_hoisted_11={class:"button-row"},_hoisted_12={class:"button-row"},_hoisted_13={class:"button-row"},_hoisted_14={key:1,class:"calculator-buttons scientific-mode"},_hoisted_15={class:"button-row scientific-row"},_hoisted_16={class:"button-row scientific-row"},_hoisted_17={class:"button-row scientific-row"},_hoisted_18={class:"button-row"},_hoisted_19={class:"button-row"},_hoisted_20={class:"button-row"},_hoisted_21={class:"button-row"},_hoisted_22={class:"button-row"},_hoisted_23={key:2,class:"history-panel"},_hoisted_24={class:"history-header"},_hoisted_25={class:"history-list"},_hoisted_26=["onClick"],_hoisted_27={class:"history-expression"},_hoisted_28={class:"history-result"},_hoisted_29={class:"function-buttons"},_sfc_main={__name:"calculator",setup(__props){const calculatorMode=ref("basic"),displayCurrent=ref(""),displayExpression=ref(""),memory=ref(null),showHistory=ref(!1),history=ref([]);ref(!1);const appendNumber=o=>{displayCurrent.value==="0"||displayCurrent.value===""?displayCurrent.value=o:displayCurrent.value+=o},appendDecimal=()=>{displayCurrent.value.includes(".")||(displayCurrent.value+=".")},appendOperator=o=>{displayCurrent.value!==""&&(displayExpression.value+=displayCurrent.value+" "+o+" ",displayCurrent.value="")},appendFunction=o=>{displayCurrent.value!==""&&(displayCurrent.value=o+"("+displayCurrent.value+")")},appendConstant=o=>{const e=o==="PI"?Math.PI:Math.E;displayCurrent.value===""?displayCurrent.value=String(e):displayCurrent.value+=String(e)},toggleSign=()=>{displayCurrent.value===""||displayCurrent.value==="0"||(displayCurrent.value.startsWith("-")?displayCurrent.value=displayCurrent.value.slice(1):displayCurrent.value="-"+displayCurrent.value)},clearAll=()=>{displayCurrent.value="",displayExpression.value=""},deleteLast=()=>{displayCurrent.value=displayCurrent.value.slice(0,-1)},calculate=()=>{if(displayCurrent.value===""||displayExpression.value==="")return;const o=displayExpression.value+displayCurrent.value;let e;try{calculatorMode.value==="basic"?e=evaluateBasic(o):e=evaluateScientific(o),e!==void 0&&!isNaN(e)&&(history.value.unshift({expression:o,result:e}),history.value.length>20&&history.value.pop(),displayCurrent.value=String(e),displayExpression.value=o+" =")}catch{displayCurrent.value="Error"}},evaluateBasic=expression=>{const sanitized=expression.replace(/Ã—/g,"*").replace(/Ã·/g,"/").replace(/âˆ’/g,"-").replace(/%/g,"/100*");return eval(sanitized)},evaluateScientific=expression=>{const sanitized=expression.replace(/Ã—/g,"*").replace(/Ã·/g,"/").replace(/âˆ’/g,"-").replace(/%/g,"/100*").replace(/sin/g,"Math.sin").replace(/cos/g,"Math.cos").replace(/tan/g,"Math.tan").replace(/log/g,"Math.log10").replace(/ln/g,"Math.log").replace(/âˆš/g,"Math.sqrt").replace(/xÂ²/g,"Math.pow").replace(/xÂ³/g,"Math.pow").replace(/xÊ¸/g,"Math.pow").replace(/1\/x/g,"1/").replace(/n!/g,"factorial").replace(/\|x\|/g,"Math.abs").replace(/Ï€/g,"Math.PI").replace(/e/g,"Math.E");return eval(sanitized)},memoryStore=()=>{displayCurrent.value!==""&&(memory.value=parseFloat(displayCurrent.value))},memoryRecall=()=>{memory.value!==null&&(displayCurrent.value=String(memory.value))},memoryClear=()=>{memory.value=null},useHistoryItem=o=>{displayCurrent.value=String(o.result),displayExpression.value=o.expression,showHistory.value=!1},clearHistory=()=>{history.value=[]},exportHistory=()=>{const o=history.value.map(n=>`${n.expression} = ${n.result}`).join(`
`),e=new Blob([o],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`calculator-history-${new Date().toISOString().slice(0,10)}.txt`,a.click(),URL.revokeObjectURL(t)},copyResult=()=>{displayCurrent.value!==""&&navigator.clipboard.writeText(displayCurrent.value)};if(watch(history,o=>{localStorage.setItem("calculatorHistory",JSON.stringify(o))},{deep:!0}),typeof window<"u"){const o=localStorage.getItem("calculatorHistory");o&&(history.value=JSON.parse(o))}return(o,e)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("button",{class:normalizeClass(["mode-button",{active:calculatorMode.value==="basic"}]),onClick:e[0]||(e[0]=t=>calculatorMode.value="basic")}," åŸºç¡€è®¡ç®—å™¨ ",2),createBaseVNode("button",{class:normalizeClass(["mode-button",{active:calculatorMode.value==="scientific"}]),onClick:e[1]||(e[1]=t=>calculatorMode.value="scientific")}," ç§‘å­¦è®¡ç®—å™¨ ",2)]),createBaseVNode("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,toDisplayString(displayExpression.value),1),createBaseVNode("div",_hoisted_6,toDisplayString(displayCurrent.value||"0"),1),memory.value!==null?(openBlock(),createElementBlock("div",_hoisted_7," M: "+toDisplayString(memory.value),1)):createCommentVNode("",!0)]),calculatorMode.value==="basic"?(openBlock(),createElementBlock("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createBaseVNode("button",{class:"calc-button btn-clear",onClick:clearAll},"AC"),createBaseVNode("button",{class:"calc-button btn-delete",onClick:deleteLast},"âŒ«"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[2]||(e[2]=t=>appendOperator("%"))},"%"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[3]||(e[3]=t=>appendOperator("/"))},"Ã·")]),createBaseVNode("div",_hoisted_10,[createBaseVNode("button",{class:"calc-button btn-number",onClick:e[4]||(e[4]=t=>appendNumber("7"))},"7"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[5]||(e[5]=t=>appendNumber("8"))},"8"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[6]||(e[6]=t=>appendNumber("9"))},"9"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[7]||(e[7]=t=>appendOperator("*"))},"Ã—")]),createBaseVNode("div",_hoisted_11,[createBaseVNode("button",{class:"calc-button btn-number",onClick:e[8]||(e[8]=t=>appendNumber("4"))},"4"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[9]||(e[9]=t=>appendNumber("5"))},"5"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[10]||(e[10]=t=>appendNumber("6"))},"6"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[11]||(e[11]=t=>appendOperator("-"))},"âˆ’")]),createBaseVNode("div",_hoisted_12,[createBaseVNode("button",{class:"calc-button btn-number",onClick:e[12]||(e[12]=t=>appendNumber("1"))},"1"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[13]||(e[13]=t=>appendNumber("2"))},"2"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[14]||(e[14]=t=>appendNumber("3"))},"3"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[15]||(e[15]=t=>appendOperator("+"))},"+")]),createBaseVNode("div",_hoisted_13,[createBaseVNode("button",{class:"calc-button btn-number btn-zero",onClick:e[16]||(e[16]=t=>appendNumber("0"))},"0"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[17]||(e[17]=t=>appendDecimal())},"."),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[18]||(e[18]=t=>toggleSign())},"Â±"),createBaseVNode("button",{class:"calc-button btn-equals",onClick:calculate},"=")])])):(openBlock(),createElementBlock("div",_hoisted_14,[createBaseVNode("div",_hoisted_15,[createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[19]||(e[19]=t=>appendFunction("sin"))},"sin"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[20]||(e[20]=t=>appendFunction("cos"))},"cos"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[21]||(e[21]=t=>appendFunction("tan"))},"tan"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[22]||(e[22]=t=>appendFunction("log"))},"log"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[23]||(e[23]=t=>appendFunction("ln"))},"ln")]),createBaseVNode("div",_hoisted_16,[createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[24]||(e[24]=t=>appendFunction("sqrt"))},"âˆš"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[25]||(e[25]=t=>appendFunction("pow"))},"xÂ²"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[26]||(e[26]=t=>appendFunction("pow3"))},"xÂ³"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[27]||(e[27]=t=>appendFunction("inv"))},"1/x"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[28]||(e[28]=t=>appendFunction("fact"))},"n!")]),createBaseVNode("div",_hoisted_17,[createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[29]||(e[29]=t=>appendConstant("PI"))},"Ï€"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[30]||(e[30]=t=>appendConstant("E"))},"e"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[31]||(e[31]=t=>appendOperator("^"))},"xÊ¸"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[32]||(e[32]=t=>appendFunction("abs"))},"|x|"),createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[33]||(e[33]=t=>appendOperator("("))},"(")]),createBaseVNode("div",_hoisted_18,[createBaseVNode("button",{class:"calc-button btn-scientific",onClick:e[34]||(e[34]=t=>appendOperator(")"))},")"),createBaseVNode("button",{class:"calc-button btn-clear",onClick:clearAll},"AC"),createBaseVNode("button",{class:"calc-button btn-delete",onClick:deleteLast},"âŒ«"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[35]||(e[35]=t=>appendOperator("/"))},"Ã·")]),createBaseVNode("div",_hoisted_19,[createBaseVNode("button",{class:"calc-button btn-number",onClick:e[36]||(e[36]=t=>appendNumber("7"))},"7"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[37]||(e[37]=t=>appendNumber("8"))},"8"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[38]||(e[38]=t=>appendNumber("9"))},"9"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[39]||(e[39]=t=>appendOperator("*"))},"Ã—")]),createBaseVNode("div",_hoisted_20,[createBaseVNode("button",{class:"calc-button btn-number",onClick:e[40]||(e[40]=t=>appendNumber("4"))},"4"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[41]||(e[41]=t=>appendNumber("5"))},"5"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[42]||(e[42]=t=>appendNumber("6"))},"6"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[43]||(e[43]=t=>appendOperator("-"))},"âˆ’")]),createBaseVNode("div",_hoisted_21,[createBaseVNode("button",{class:"calc-button btn-number",onClick:e[44]||(e[44]=t=>appendNumber("1"))},"1"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[45]||(e[45]=t=>appendNumber("2"))},"2"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[46]||(e[46]=t=>appendNumber("3"))},"3"),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[47]||(e[47]=t=>appendOperator("+"))},"+")]),createBaseVNode("div",_hoisted_22,[createBaseVNode("button",{class:"calc-button btn-number btn-zero",onClick:e[48]||(e[48]=t=>appendNumber("0"))},"0"),createBaseVNode("button",{class:"calc-button btn-number",onClick:e[49]||(e[49]=t=>appendDecimal())},"."),createBaseVNode("button",{class:"calc-button btn-operator",onClick:e[50]||(e[50]=t=>toggleSign())},"Â±"),createBaseVNode("button",{class:"calc-button btn-equals",onClick:calculate},"=")])])),showHistory.value?(openBlock(),createElementBlock("div",_hoisted_23,[createBaseVNode("div",_hoisted_24,[e[53]||(e[53]=createBaseVNode("h3",null,"è®¡ç®—å†å²",-1)),createBaseVNode("button",{class:"close-history",onClick:e[51]||(e[51]=t=>showHistory.value=!1)},"Ã—")]),createBaseVNode("div",_hoisted_25,[(openBlock(!0),createElementBlock(Fragment,null,renderList(history.value,(t,a)=>(openBlock(),createElementBlock("div",{key:a,class:"history-item",onClick:n=>useHistoryItem(t)},[createBaseVNode("div",_hoisted_27,toDisplayString(t.expression),1),createBaseVNode("div",_hoisted_28,"= "+toDisplayString(t.result),1)],8,_hoisted_26))),128))]),createBaseVNode("div",{class:"history-actions"},[createBaseVNode("button",{class:"history-action-btn",onClick:clearHistory},"æ¸…ç©ºå†å²"),createBaseVNode("button",{class:"history-action-btn",onClick:exportHistory},"å¯¼å‡ºå†å²")])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_29,[createBaseVNode("button",{class:"function-btn",onClick:e[52]||(e[52]=t=>showHistory.value=!showHistory.value)},[...e[54]||(e[54]=[createBaseVNode("span",{class:"icon"},"ğŸ“‹",-1),createTextVNode(" å†å²è®°å½• ",-1)])]),createBaseVNode("button",{class:"function-btn",onClick:copyResult},[...e[55]||(e[55]=[createBaseVNode("span",{class:"icon"},"ğŸ“„",-1),createTextVNode(" å¤åˆ¶ç»“æœ ",-1)])]),createBaseVNode("button",{class:"function-btn memory-btn",onClick:memoryStore},[...e[56]||(e[56]=[createBaseVNode("span",{class:"icon"},"ğŸ’¾",-1),createTextVNode(" M+ ",-1)])]),createBaseVNode("button",{class:"function-btn memory-btn",onClick:memoryRecall},[...e[57]||(e[57]=[createBaseVNode("span",{class:"icon"},"ğŸ“¥",-1),createTextVNode(" MR ",-1)])]),createBaseVNode("button",{class:"function-btn memory-btn",onClick:memoryClear},[...e[58]||(e[58]=[createBaseVNode("span",{class:"icon"},"ğŸ—‘ï¸",-1),createTextVNode(" MC ",-1)])])])]),e[59]||(e[59]=createStaticVNode('<div class="calculator-info" data-v-39039021><h2 data-v-39039021>åŠŸèƒ½è¯´æ˜</h2><div class="info-content" data-v-39039021><div class="info-section" data-v-39039021><h3 data-v-39039021>åŸºç¡€åŠŸèƒ½</h3><ul data-v-39039021><li data-v-39039021>æ”¯æŒåŠ æ³•(+)ã€å‡æ³•(âˆ’)ã€ä¹˜æ³•(Ã—)ã€é™¤æ³•(Ã·)è¿ç®—</li><li data-v-39039021>æ”¯æŒç™¾åˆ†æ¯”(%)è®¡ç®—</li><li data-v-39039021>æ”¯æŒå°æ•°è¾“å…¥</li><li data-v-39039021>å¯æ¸…é™¤å½“å‰è¾“å…¥æˆ–åˆ é™¤æœ€åä¸€ä½</li><li data-v-39039021>æ”¯æŒæ­£è´Ÿå·åˆ‡æ¢</li></ul></div><div class="info-section" data-v-39039021><h3 data-v-39039021>ç§‘å­¦åŠŸèƒ½</h3><ul data-v-39039021><li data-v-39039021>ä¸‰è§’å‡½æ•°ï¼šsinã€cosã€tan</li><li data-v-39039021>å¯¹æ•°å‡½æ•°ï¼šlogã€ln</li><li data-v-39039021>å¹‚å‡½æ•°ï¼šxÂ²ã€xÂ³ã€xÊ¸</li><li data-v-39039021>å…¶ä»–å‡½æ•°ï¼šâˆšã€1/xã€n!ã€|x|</li><li data-v-39039021>å¸¸æ•°ï¼šÏ€ã€e</li></ul></div><div class="info-section" data-v-39039021><h3 data-v-39039021>è®°å¿†åŠŸèƒ½</h3><ul data-v-39039021><li data-v-39039021>M+ï¼šå°†å½“å‰ç»“æœå­˜å…¥è®°å¿†</li><li data-v-39039021>MRï¼šè¯»å–è®°å¿†ä¸­çš„å€¼</li><li data-v-39039021>MCï¼šæ¸…é™¤è®°å¿†</li></ul></div><div class="info-section" data-v-39039021><h3 data-v-39039021>å†å²è®°å½•</h3><ul data-v-39039021><li data-v-39039021>è‡ªåŠ¨ä¿å­˜æœ€è¿‘20æ¡è®¡ç®—è®°å½•</li><li data-v-39039021>ç‚¹å‡»å†å²è®°å½•å¯é‡æ–°ä½¿ç”¨</li><li data-v-39039021>æ”¯æŒå¯¼å‡ºå†å²è®°å½•</li></ul></div></div></div>',1))]))}},calculator=_export_sfc(_sfc_main,[["__scopeId","data-v-39039021"]]);export{calculator as default};
