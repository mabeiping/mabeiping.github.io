import{j as e,w as l,o as a,a as t,b as s,c as o,F as u,p as n,t as r,l as i,q as d,v as c,C as v,y as p,s as m,d as g,B as b,r as x,x as f}from"./HXycOAlW.js";import{_ as h}from"./D1uvpjsy.js";import{G as y}from"./0iwS8AcL.js";import{s as w}from"./BxyD9DOn.js";import"./CP1Hj45X.js";import"./CPBe7JJp.js";import"./BadZoQ71.js";import"./Dyo0McTI.js";import"./BCo6x5W8.js";const k={class:"space-y-6"},j={key:0,class:"bg-gray-50 p-4 rounded-lg"},C={class:"space-y-2"},D={class:"flex items-center"},M={class:"font-medium"},V={class:"text-sm text-gray-500"},F=["onClick"],U={key:1,class:"bg-gray-50 p-4 rounded-lg"},B={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},L=["value"],P={class:"font-medium"},O={class:"text-sm text-gray-500"},z={key:2,class:"space-y-4"},A={class:"space-y-2"},G={class:"flex items-center space-x-2"},S={class:"flex items-center space-x-2"},$={class:"flex items-center space-x-2"},q={key:0,class:"bg-white p-4 rounded-lg border"},E={class:"space-y-2"},_={class:"flex items-center space-x-2"},I={key:1,class:"bg-white p-4 rounded-lg border"},W={class:"space-y-2"},X={class:"text-right text-sm text-gray-500"},H={key:0},J={class:"flex items-center space-x-2"},R={class:"flex space-x-4"},T=["disabled"],K={key:0},N={key:1,class:"flex items-center justify-center"},Y={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Z={class:"flex items-center justify-between mb-2"},Q={class:"text-blue-700"},ee={class:"w-full bg-gray-200 rounded-full h-2.5"},le={class:"mt-2 text-sm text-blue-700"},ae={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4"},te={class:"mt-2 text-green-700"},se={class:"mt-3 space-y-2"},oe=["href","download"],ue={key:5,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ne={class:"mt-2 text-red-700"},re={key:0,class:"mt-2 text-sm text-gray-600"},ie={__name:"index",setup(ie){const de=[{value:"dwg",label:"DWG (.dwg)",description:"AutoCAD图纸格式",extensions:[".dwg"]},{value:"dxf",label:"DXF (.dxf)",description:"Drawing Exchange Format",extensions:[".dxf"]},{value:"pdf",label:"PDF (.pdf)",description:"便携式文档格式",extensions:[".pdf"]},{value:"png",label:"PNG (.png)",description:"便携式网络图形",extensions:[".png"]},{value:"jpg",label:"JPG (.jpg)",description:"JPEG图片格式",extensions:[".jpg",".jpeg"]}],ce=x(""),ve=x({includeLayers:!0,preserveScale:!0,includeMetadata:!1}),pe=x({pageSize:"a4",pageOrientation:"landscape",vectorOutput:!0}),me=x({resolution:300,quality:80,antialiasing:!0}),ge=x([]),be=f(()=>ge.value),xe=x(!1),fe=x(!1),he=x(""),ye=x(""),we=x(""),ke=x(0),je=x(""),Ce=x([]),De=x([]),Me=["1. 上传文件：支持DWG、DXF、PDF和图片格式，可批量上传","2. 系统自动识别源文件格式","3. 选择目标格式：系统会根据源格式显示可用的目标格式","4. 设置转换选项：是否包含图层、保留比例、包含元数据等",'5. 点击"开始转换"按钮进行处理',"6. 等待处理完成，系统会自动下载处理后的文件","7. 查看处理结果，确保图纸格式正确"],Ve=e=>e.split(".").pop().toLowerCase(),Fe=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},Ue=e=>{ge.value=e,e.length>0?Be():(De.value=[],ce.value=""),ye.value="",fe.value=!1},Be=()=>{if(0===ge.value.length)return void(De.value=[]);const e=Ve(ge.value[0].name),l=[];de.forEach(a=>{a.extensions.some(l=>e===l.replace(".",""))||l.push(a)}),De.value=l,l.length>0?ce.value=l[0].value:ce.value=""},Le=e=>{ye.value=e,we.value=Pe(e)},Pe=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Oe=async()=>{if(0!==be.length)if(ce.value){xe.value=!0,ye.value="",we.value="",fe.value=!1,ke.value=0,je.value="准备转换...",Ce.value=[];try{await new Promise(e=>{let l=0;const a=w(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),ke.value=l,je.value=l<30?"正在分析CAD文件...":l<70?"正在转换格式...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});let e={files:be.value,targetFormat:ce.value,options:ve.value};"pdf"===ce.value?e.pdfOptions=pe.value:["png","jpg"].includes(ce.value)&&(e.imageOptions=me.value);const l=de.find(e=>e.value===ce.value);he.value=`成功将 ${be.length} 个文件转换为 ${l.label} 格式！`,fe.value=!0,be.forEach((e,l)=>{const a=new Blob(["模拟转换后的CAD文件内容"],{type:"application/octet-stream"}),t=URL.createObjectURL(a),s=`converted_${e.name.replace(/\.[^/.]+$/,`.${ce.value}`)}`;Ce.value.push({url:t,filename:s})}),Ce.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=Ce.value[0].url,e.download=Ce.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){ye.value=`转换失败：${e.message||"未知错误"}`,we.value=Pe(ye.value)}finally{xe.value=!1}}else ye.value="请选择目标格式";else ye.value="请选择文件"},ze=()=>{ge.value=[],ce.value="",ve.value={includeLayers:!0,preserveScale:!0,includeMetadata:!1},pe.value={pageSize:"a4",pageOrientation:"landscape",vectorOutput:!0},me.value={resolution:300,quality:80,antialiasing:!0},ye.value="",we.value="",fe.value=!1,he.value="",ke.value=0,je.value="",Ce.value=[],De.value=[]};return(x,f)=>(a(),e(h,{title:"CAD图纸转换",description:"DWG/DXF与PDF/图片等格式互转",tips:Me},{default:l(()=>[t("div",k,[s(y,{multiple:!0,accept:[".dwg",".dxf",".pdf",".png",".jpg",".jpeg"],"max-size":209715200,modelValue:ge.value,"onUpdate:modelValue":f[0]||(f[0]=e=>ge.value=e),onFilesChanged:Ue,onError:Le},null,8,["modelValue"]),be.value.length>0?(a(),o("div",j,[f[13]||(f[13]=t("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),t("div",C,[(a(!0),o(u,null,n(be.value,(e,l)=>(a(),o("div",{key:l,class:"flex items-center justify-between p-2 bg-white rounded border"},[t("div",D,[f[11]||(f[11]=t("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),t("div",null,[t("div",M,r(e.name),1),t("div",V,r(Ve(e.name))+" • "+r(Fe(e.size)),1)])]),t("button",{onClick:e=>(e=>{ge.value.splice(e,1),0===ge.value.length?ze():Be()})(l),class:"text-red-500 hover:text-red-700"},[...f[12]||(f[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,F)]))),128))])])):i("",!0),be.value.length>0&&De.value.length>0?(a(),o("div",U,[f[14]||(f[14]=t("h3",{class:"text-lg font-semibold mb-4"},"目标格式",-1)),t("div",B,[(a(!0),o(u,null,n(De.value,e=>(a(),o("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[d(t("input",{type:"radio","onUpdate:modelValue":f[1]||(f[1]=e=>ce.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,L),[[c,ce.value]]),t("div",null,[t("div",P,r(e.label),1),t("div",O,r(e.description),1)])]))),128))])])):i("",!0),be.value.length>0?(a(),o("div",z,[t("div",null,[f[18]||(f[18]=t("h3",{class:"text-lg font-semibold mb-2"},"转换选项",-1)),t("div",A,[t("label",G,[d(t("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=e=>ve.value.includeLayers=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ve.value.includeLayers]]),f[15]||(f[15]=t("span",null,"包含图层",-1))]),t("label",S,[d(t("input",{type:"checkbox","onUpdate:modelValue":f[3]||(f[3]=e=>ve.value.preserveScale=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ve.value.preserveScale]]),f[16]||(f[16]=t("span",null,"保留比例",-1))]),t("label",$,[d(t("input",{type:"checkbox","onUpdate:modelValue":f[4]||(f[4]=e=>ve.value.includeMetadata=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ve.value.includeMetadata]]),f[17]||(f[17]=t("span",null,"包含元数据",-1))])])]),"pdf"===ce.value?(a(),o("div",q,[f[24]||(f[24]=t("h3",{class:"text-lg font-semibold mb-3"},"PDF转换选项",-1)),t("div",E,[t("div",null,[f[20]||(f[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面大小",-1)),d(t("select",{"onUpdate:modelValue":f[5]||(f[5]=e=>pe.value.pageSize=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...f[19]||(f[19]=[t("option",{value:"a4"},"A4",-1),t("option",{value:"a3"},"A3",-1),t("option",{value:"letter"},"Letter",-1),t("option",{value:"custom"},"自定义",-1)])],512),[[p,pe.value.pageSize]])]),t("div",null,[f[22]||(f[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面方向",-1)),d(t("select",{"onUpdate:modelValue":f[6]||(f[6]=e=>pe.value.pageOrientation=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...f[21]||(f[21]=[t("option",{value:"portrait"},"纵向",-1),t("option",{value:"landscape"},"横向",-1)])],512),[[p,pe.value.pageOrientation]])]),t("div",null,[t("label",_,[d(t("input",{type:"checkbox","onUpdate:modelValue":f[7]||(f[7]=e=>pe.value.vectorOutput=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,pe.value.vectorOutput]]),f[23]||(f[23]=t("span",null,"矢量输出",-1))])])])])):i("",!0),["png","jpg"].includes(ce.value)?(a(),o("div",I,[f[29]||(f[29]=t("h3",{class:"text-lg font-semibold mb-3"},"图片转换选项",-1)),t("div",W,[t("div",null,[f[26]||(f[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"分辨率",-1)),d(t("select",{"onUpdate:modelValue":f[8]||(f[8]=e=>me.value.resolution=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...f[25]||(f[25]=[t("option",{value:"72"},"72 DPI",-1),t("option",{value:"150"},"150 DPI",-1),t("option",{value:"300"},"300 DPI",-1),t("option",{value:"600"},"600 DPI",-1)])],512),[[p,me.value.resolution]])]),t("div",null,[f[27]||(f[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"图片质量",-1)),d(t("input",{"onUpdate:modelValue":f[9]||(f[9]=e=>me.value.quality=e),type:"range",min:"10",max:"100",class:"w-full"},null,512),[[m,me.value.quality,void 0,{number:!0}]]),t("div",X,r(me.value.quality)+"%",1)]),"jpg"===ce.value?(a(),o("div",H,[t("label",J,[d(t("input",{type:"checkbox","onUpdate:modelValue":f[10]||(f[10]=e=>me.value.antialiasing=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,me.value.antialiasing]]),f[28]||(f[28]=t("span",null,"抗锯齿",-1))])])):i("",!0)])])):i("",!0)])):i("",!0),t("div",R,[t("button",{onClick:Oe,disabled:!be.value.length||!ce.value||xe.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[xe.value?(a(),o("span",N,[f[30]||(f[30]=t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),g(" 处理中... "+r(ke.value)+"% ",1)])):(a(),o("span",K,"开始转换"))],8,T),t("button",{onClick:ze,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),xe.value?(a(),o("div",Y,[t("div",Z,[f[31]||(f[31]=t("h4",{class:"font-semibold text-blue-800"},"转换进度",-1)),t("span",Q,r(ke.value)+"%",1)]),t("div",ee,[t("div",{class:"bg-blue-600 h-2.5 rounded-full",style:b({width:ke.value+"%"})},null,4)]),t("p",le,r(je.value),1)])):i("",!0),fe.value?(a(),o("div",ae,[f[32]||(f[32]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"转换成功")],-1)),t("p",te,r(he.value),1),t("div",se,[(a(!0),o(u,null,n(Ce.value,(e,l)=>(a(),o("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载转换结果 "+r(l+1),9,oe))),128))])])):i("",!0),ye.value?(a(),o("div",ue,[f[33]||(f[33]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"转换失败")],-1)),t("p",ne,r(ye.value),1),we.value?(a(),o("p",re,"建议："+r(we.value),1)):i("",!0)])):i("",!0)])]),_:1}))}};export{ie as default};
