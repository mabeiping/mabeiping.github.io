const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CG87npSv.js","./DwtW3TPZ.js"])))=>i.map(i=>d[i]);
import{j as e,w as l,o as a,a as t,c as s,t as r,l as o,q as n,y as u,s as i,d,b as c,r as v,_ as p}from"./BgOf89w3.js";import{_ as m}from"./2wcj7HJB.js";import{P as f}from"./B0ELIZwS.js";import{_ as g}from"./BCo6x5W8.js";import"./BUkw5g4p.js";import"./BX-X-UIx.js";import"./COINl4vt.js";import"./B2Jz3f8v.js";const b={class:"space-y-6"},y={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"},x={class:"flex flex-col items-center justify-center"},h={key:0,class:"mt-4"},w={class:"flex items-center justify-between bg-gray-100 p-3 rounded"},k={class:"flex items-center space-x-3"},_={class:"text-sm font-medium"},j={class:"bg-white p-4 rounded-lg shadow"},C={class:"space-y-3"},P={class:"flex space-x-4"},D={class:"flex-1"},F={key:0,class:"flex-1"},M={key:0,class:"mt-6"},z=["disabled"],A={key:0,class:"mr-2 animate-spin"},I={key:1,class:"mt-4"},R={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},U={class:"space-y-2 text-sm text-green-700"},B={key:0},E=g({__name:"split",setup(g){let E=null;const L=v([]),V=v(null),$=v("range"),O=v(""),S=v(!1),T=v(0),q=v(null),H=v(null),N=v(0),Y=v(0),Z=async e=>{const l=e.target.files[0];if(l){L.value=[l];const e=await(e=>new Promise(l=>{const a=new FileReader;a.onload=e=>{const a=e.target.result,t=new Uint8Array(a);let s=0;for(let l=0;l<t.length-100;l++)if(47===t[l]&&67===t[l+1]&&111===t[l+2]&&117===t[l+3]&&110===t[l+4]&&116===t[l+5]){let e=l+6;for(;e<t.length&&(t[e]<48||t[e]>57);)e++;let a="";for(;e<t.length&&t[e]>=48&&t[e]<=57;)a+=String.fromCharCode(t[e]),e++;if(a){s=parseInt(a);break}}l(s)},a.onerror=()=>{l(0)},a.readAsArrayBuffer(e)}))(l);Y.value=e}else L.value=[],Y.value=0},G=()=>{L.value=[],Y.value=0,V.value&&(V.value.value="")},J=async()=>{if(0!==L.value.length){S.value=!0,T.value=0,q.value=null,H.value=null,N.value=0;try{const e=await(async()=>(E||(E=(await p(async()=>{const{default:e}=await import("./CG87npSv.js");return{default:e}},__vite__mapDeps([0,1]),import.meta.url)).default),E))();T.value=30;const l=await e.pdfSplit({file:L.value[0],splitMode:$.value,pageRange:O.value});T.value=100,setTimeout(()=>{S.value=!1;const e=l,a=URL.createObjectURL(e);if(H.value=a,"range"===$.value){const e=O.value.split(/[,，\s]+/).filter(e=>""!==e.trim());let l=0;e.forEach(e=>{if(e.includes("-")){const[a,t]=e.split("-").map(Number);l+=t-a+1}else l+=1}),N.value=1}else N.value=Y.value||0;K(),N.value},500)}catch(e){S.value=!1,q.value=e.message,e.message}}},K=()=>{if(!H.value)return;const e="range"===$.value?`split_${O.value}.pdf`:"split_each.zip",l=document.createElement("a");l.href=H.value,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l)};return(v,p)=>(a(),e(m,{title:"PDF拆分",description:"将PDF文件按页面范围或每页单独拆分","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择拆分方式：","   • 指定页面范围：输入要拆分的页面范围（例如：1-3,5-7）","   • 每页单独拆分：将PDF的每一页拆分为单独的文件","4. 页面范围输入说明：","   • 支持单个页码：如 '5'","   • 支持页码范围：如 '1-3'","   • 支持多个范围：如 '1-3,5-7'","   • 支持中英文逗号和空格作为分隔符","5. 点击'开始拆分'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看拆分结果信息，包括成功拆分的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:l(()=>[t("div",b,[t("div",y,[t("div",x,[p[3]||(p[3]=t("svg",{class:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),p[4]||(p[4]=t("h3",{class:"text-lg font-medium mb-2"},"选择PDF文件",-1)),p[5]||(p[5]=t("p",{class:"text-gray-500 mb-4"},"支持单个PDF文件，最大100MB",-1)),t("input",{type:"file",ref_key:"fileInput",ref:V,onChange:Z,accept:".pdf",class:"hidden"},null,544),t("button",{onClick:p[0]||(p[0]=e=>v.$refs.fileInput.click()),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 选择文件 ")]),L.value.length>0?(a(),s("div",h,[t("div",w,[t("div",k,[p[6]||(p[6]=t("svg",{class:"w-6 h-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zM2 12a1 1 0 110-2 1 1 0 010 2zm14 0a1 1 0 110-2 1 1 0 010 2z","clip-rule":"evenodd"})],-1)),t("span",_,r(L.value[0].name),1)]),t("button",{onClick:G,class:"text-red-500 hover:text-red-700 text-sm"}," 移除 ")])])):o("",!0)]),t("div",j,[p[10]||(p[10]=t("h3",{class:"font-semibold mb-3"},"拆分设置",-1)),t("div",C,[t("div",P,[t("div",D,[p[8]||(p[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分方式",-1)),n(t("select",{"onUpdate:modelValue":p[1]||(p[1]=e=>$.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...p[7]||(p[7]=[t("option",{value:"range"},"指定页面范围",-1),t("option",{value:"each"},"每页单独拆分",-1)])],512),[[u,$.value]])]),"range"===$.value?(a(),s("div",F,[p[9]||(p[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面范围 (例如: 1-3,5-7)",-1)),n(t("input",{type:"text","onUpdate:modelValue":p[2]||(p[2]=e=>O.value=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入页面范围"},null,512),[[i,O.value]])])):o("",!0)])])]),L.value.length>0?(a(),s("div",M,[t("button",{onClick:J,disabled:S.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[S.value?(a(),s("span",A,"⏳")):o("",!0),d(" "+r(S.value?"处理中...":"开始拆分"),1)],8,z)])):o("",!0),S.value?(a(),s("div",I,[c(f,{progress:T.value,label:`处理进度: ${T.value}%`,error:q.value},null,8,["progress","label","error"])])):o("",!0),H.value?(a(),s("div",R,[p[12]||(p[12]=t("h3",{class:"font-semibold text-green-700 mb-2"},"拆分成功",-1)),t("div",U,[t("p",null,"成功拆分："+r(N.value)+" 个文件",1),t("p",null,"拆分方式："+r("range"===$.value?"指定页面范围":"每页单独拆分"),1),"range"===$.value?(a(),s("p",B,"页面范围："+r(O.value),1)):o("",!0),p[11]||(p[11]=t("p",null,"文件已自动开始下载",-1))])])):o("",!0)])]),_:1}))}},[["__scopeId","data-v-963891b3"]]);export{E as default};
