import{c as u,a as e,t as i,f as p,F as B,r as L,j as y,y as h,k as P,s as j,x as I,m as N,l as r,o as d,q as U,v as V}from"./-R7zUpUx.js";import{s as $}from"./CI8PMl9t.js";import{_ as J}from"./DlAUqK2U.js";const O={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},A={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},X=["accept"],Y={key:0,class:"mt-4 p-3 bg-gray-50 rounded"},D={class:"font-medium"},R={class:"text-gray-500 ml-2"},T={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},q=["value"],E={class:"group"},G={class:"mt-3 p-4 border rounded-lg"},K={class:"space-y-3"},H={class:"flex items-center"},Q={key:0},W={class:"flex items-center"},Z=["disabled"],ee={key:0,class:"mt-6"},te={class:"w-full bg-gray-200 rounded-full h-2.5"},le={class:"text-center mt-2 text-gray-600"},se={key:1,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},oe={class:"text-green-600 mb-4"},ne=["href"],ae={key:2,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},re={class:"text-red-600"},ue={__name:"index",setup(ie){const f=r(null),o=r(null),m=r("json"),c=r(!1),v=r(0),b=r(null),n=r(null),a=r({prettyPrint:!0,indentSize:2,includeComments:!0}),_=N(()=>".yaml,.yml,.json,.xml"),x=[{value:"json",label:"JSON",description:"JavaScript对象表示法"},{value:"yaml",label:"YAML",description:"人类友好的数据序列化格式"},{value:"xml",label:"XML",description:"可扩展标记语言"}],k=s=>{const t=s.target.files[0];t&&(o.value=t,n.value=null)},w=()=>{o.value=null,f.value.value=""},M=s=>{if(s===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,g)).toFixed(2))+" "+l[g]},S=s=>{const t=x.find(l=>l.value===s);return t?t.label:s},C=()=>new Promise(s=>{const t=$(()=>{v.value+=5,v.value>=100&&(clearInterval(t),setTimeout(s,500))},200)}),F=async()=>{if(!o.value){n.value="请选择要转换的文件";return}c.value=!0,v.value=0,n.value=null;try{await C(),b.value={downloadUrl:"#",fileName:o.value.name.replace(/\.[^/.]+$/,`.${m.value}`),fileSize:o.value.size}}catch{n.value="转换失败，请重试"}finally{c.value=!1}},z=()=>{o.value=null,f.value.value="",m.value="json",b.value=null,v.value=0,n.value=null,a.value={prettyPrint:!0,indentSize:2,includeComments:!0}};return(s,t)=>(d(),u("div",O,[t[13]||(t[13]=e("h1",{class:"text-2xl font-bold mb-6 text-center"},"配置文件格式转换",-1)),t[14]||(t[14]=e("div",{class:"mb-8"},[e("p",{class:"text-gray-600 mb-4"},"支持YAML/JSON/XML等配置格式互转，操作简单快捷")],-1)),e("form",{onSubmit:j(F,["prevent"]),class:"space-y-6"},[e("div",A,[e("input",{type:"file",ref_key:"fileInput",ref:f,class:"hidden",accept:_.value,onChange:k},null,40,X),e("button",{type:"button",onClick:t[0]||(t[0]=l=>s.$refs.fileInput.click()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"}," 选择文件 "),t[6]||(t[6]=e("p",{class:"text-gray-500 mt-2"},"支持 YAML、JSON、XML 等格式",-1)),o.value?(d(),u("div",Y,[e("span",D,i(o.value.name),1),e("span",R,"("+i(M(o.value.size))+")",1),e("button",{type:"button",onClick:w,class:"ml-2 text-red-500 hover:text-red-700"}," 移除 ")])):p("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-gray-700 font-medium mb-2"},"转换为",-1)),e("div",T,[(d(),u(B,null,L(x,l=>e("label",{key:l.value,class:U(["flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500 transition duration-200",{"border-blue-500 bg-blue-50":m.value===l.value}])},[y(e("input",{type:"radio",value:l.value,"onUpdate:modelValue":t[1]||(t[1]=g=>m.value=g),class:"mr-2"},null,8,q),[[V,m.value]]),e("span",null,i(l.label),1)],2)),64))])]),e("div",null,[e("details",E,[t[11]||(t[11]=e("summary",{class:"cursor-pointer list-none flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("span",{class:"font-medium"},"高级选项"),e("span",{class:"transition-transform duration-300 group-open:rotate-180"},"▼")],-1)),e("div",G,[e("div",K,[e("label",H,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=l=>a.value.prettyPrint=l),class:"mr-2"},null,512),[[h,a.value.prettyPrint]]),t[8]||(t[8]=e("span",null,"美化输出",-1))]),a.value.prettyPrint?(d(),u("div",Q,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"缩进空格数",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.indentSize=l),type:"number",min:"2",max:"8",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,512),[[P,a.value.indentSize,void 0,{number:!0}]])])):p("",!0),e("label",W,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>a.value.includeComments=l),class:"mr-2"},null,512),[[h,a.value.includeComments]]),t[10]||(t[10]=e("span",null,"包含注释",-1))])])])])]),e("button",{type:"submit",disabled:!o.value||c.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},i(c.value?"转换中...":"开始转换"),9,Z)],32),c.value?(d(),u("div",ee,[e("div",te,[e("div",{class:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:I({width:v.value+"%"})},null,4)]),e("p",le,i(v.value)+"%",1)])):p("",!0),b.value?(d(),u("div",se,[t[12]||(t[12]=e("h3",{class:"font-semibold text-green-700 mb-2"},"转换成功",-1)),e("p",oe,"文件已成功转换为 "+i(S(m.value))+" 格式",1),e("a",{href:b.value.downloadUrl,class:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300",download:""}," 下载文件 ",8,ne),e("button",{onClick:z,class:"ml-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-300"}," 再次转换 ")])):p("",!0),n.value?(d(),u("div",ae,[e("p",re,i(n.value),1),e("button",{onClick:t[5]||(t[5]=l=>n.value=null),class:"mt-2 text-red-600 hover:text-red-800 text-sm"}," 关闭 ")])):p("",!0)]))}},ce=J(ue,[["__scopeId","data-v-1d0c5929"]]);export{ce as default};
