import{i as z,w as C,o,a as s,b as N,c as n,j as m,k as h,y as V,f,x as R,t as r,F as S,r as U,q as B,d as w,l as u}from"./-R7zUpUx.js";import{_ as T}from"./1SagYtif.js";import{G as A}from"./zseaTYbb.js";import{_ as D}from"./DlAUqK2U.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";const I={class:"archive-extract"},M={class:"upload-section"},E={key:0,class:"options-section"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j={class:"form-group"},G={class:"form-group"},Z={class:"form-group col-span-1 md:col-span-2"},q={class:"flex items-center space-x-2"},L={key:1,class:"process-section"},O=["disabled"],H={key:0},J={key:1},K={key:2,class:"progress-section"},Q={class:"progress-bar"},W={class:"text-sm text-gray-500 mt-1"},X={key:3,class:"result-section"},Y={class:"result-info"},ss={class:"result-item"},es={class:"value"},ts={class:"result-item"},ls={class:"value"},as={class:"result-item"},os={class:"value"},is={class:"result-item"},ns={class:"value"},rs={class:"file-list-section"},ds={class:"file-list"},cs={class:"file-icon"},us={class:"file-info"},vs={class:"file-name"},ps={class:"file-size"},fs={class:"file-actions"},ms=["onClick"],_s={key:4,class:"error-section"},xs={class:"error-message"},hs={__name:"index",setup(ws){const v=u(null),p=u(!1),_=u(0),x=u(""),a=u(null),d=u(""),i=u({password:"",extractPath:"",overwrite:!1}),b=t=>{v.value=t,d.value="",a.value=null},g=()=>{v.value=null,d.value="",a.value=null},y=async()=>{if(!v.value){d.value="请先上传压缩包";return}p.value=!0,_.value=0,x.value="准备解压...",d.value="",a.value=null;try{const t=new FormData;t.append("files",v.value),t.append("password",i.value.password),t.append("extractPath",i.value.extractPath),t.append("overwrite",i.value.overwrite);const e=await fetch("/api/archive/extract",{method:"POST",body:t});if(!e.ok)throw new Error("API请求失败");const l=await e.json();if(l.success){const c=l.data[0];a.value={archiveName:c.archiveName,extractPath:c.extractPath,fileCount:c.fileCount,extractedSize:c.extractedSize,files:c.files}}else throw new Error(l.message||"解压失败")}catch(t){d.value=t.message||"解压失败，请重试"}finally{p.value=!1}},k=t=>{console.log("下载文件:",t),alert(`开始下载文件: ${t}`)},F=()=>{console.log("下载全部文件"),alert("开始下载全部文件")},P=t=>{const e={pdf:"fa-file-pdf",image:"fa-file-image",csv:"fa-file-csv",text:"fa-file-alt",default:"fa-file"};return e[t]||e.default};return(t,e)=>(o(),z(T,{title:"文件解压",description:"解压各种格式的压缩包文件"},{default:C(()=>[s("div",I,[s("div",M,[e[3]||(e[3]=s("h3",null,"上传压缩包",-1)),N(A,{accept:".zip,.rar,.7z,.tar,.gz,.bz2,.xz,.iso",multiple:!1,onFileUploaded:b,onFileRemoved:g}),e[4]||(e[4]=s("p",{class:"text-sm text-gray-500 mt-2"},"支持ZIP、RAR、7Z、TAR等多种压缩格式，单个文件大小不超过100MB",-1))]),v.value?(o(),n("div",E,[e[8]||(e[8]=s("h3",null,"解压选项",-1)),s("div",$,[s("div",j,[e[5]||(e[5]=s("label",{for:"password"},"解压密码",-1)),m(s("input",{id:"password",type:"password","onUpdate:modelValue":e[0]||(e[0]=l=>i.value.password=l),class:"form-input",placeholder:"如果压缩包有密码，请输入"},null,512),[[h,i.value.password]])]),s("div",G,[e[6]||(e[6]=s("label",{for:"extractPath"},"解压路径",-1)),m(s("input",{id:"extractPath",type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>i.value.extractPath=l),class:"form-input",placeholder:"默认为当前目录"},null,512),[[h,i.value.extractPath]])]),s("div",Z,[s("label",q,[m(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=l=>i.value.overwrite=l),class:"form-checkbox"},null,512),[[V,i.value.overwrite]]),e[7]||(e[7]=s("span",null,"覆盖已存在的文件",-1))])])])])):f("",!0),v.value?(o(),n("div",L,[s("button",{class:"btn btn-primary",onClick:y,disabled:p.value},[p.value?(o(),n("span",J,"解压中...")):(o(),n("span",H,"开始解压"))],8,O)])):f("",!0),p.value?(o(),n("div",K,[s("div",Q,[s("div",{class:"progress-fill",style:R({width:_.value+"%"})},null,4)]),s("p",W,r(x.value),1)])):f("",!0),a.value?(o(),n("div",X,[e[16]||(e[16]=s("h3",null,"解压结果",-1)),s("div",Y,[s("div",ss,[e[9]||(e[9]=s("span",{class:"label"},"压缩包名称:",-1)),s("span",es,r(a.value.archiveName),1)]),s("div",ts,[e[10]||(e[10]=s("span",{class:"label"},"解压路径:",-1)),s("span",ls,r(a.value.extractPath),1)]),s("div",as,[e[11]||(e[11]=s("span",{class:"label"},"文件数量:",-1)),s("span",os,r(a.value.fileCount),1)]),s("div",is,[e[12]||(e[12]=s("span",{class:"label"},"解压大小:",-1)),s("span",ns,r(a.value.extractedSize),1)]),s("div",rs,[e[14]||(e[14]=s("h4",null,"解压文件列表",-1)),s("div",ds,[(o(!0),n(S,null,U(a.value.files,(l,c)=>(o(),n("div",{key:c,class:"file-item"},[s("div",cs,[s("i",{class:B(["fas",P(l.type)])},null,2)]),s("div",us,[s("div",vs,r(l.name),1),s("div",ps,r(l.size),1)]),s("div",fs,[s("button",{class:"btn btn-sm btn-secondary",onClick:bs=>k(l.path)},[...e[13]||(e[13]=[s("i",{class:"fas fa-download"},null,-1)])],8,ms)])]))),128))])]),s("button",{class:"btn btn-secondary mt-4",onClick:F},[...e[15]||(e[15]=[s("i",{class:"fas fa-download mr-2"},null,-1),w("下载全部文件 ",-1)])])])])):f("",!0),d.value?(o(),n("div",_s,[s("div",xs,[e[17]||(e[17]=s("i",{class:"fas fa-exclamation-circle text-red-500 mr-2"},null,-1)),w(" "+r(d.value),1)])])):f("",!0)])]),_:1}))}},Cs=D(hs,[["__scopeId","data-v-d14ed3a7"]]);export{Cs as default};
