import{G as e,$ as l,w as a,m as s,p as t,q as r,n as u,z as o,I as n,K as i,D as c,F as d,u as p,E as v,x as m,v as g,k as b}from"./DwDdtX2U.js";import{_ as x}from"./BGYMMrNt.js";import{G as f}from"./DaJPXVd5.js";import"./DFiMgQNB.js";import"./DwL8tNwU.js";import"./Dzf--W9j.js";import"./DiBmY6iY.js";const h={class:"space-y-6"},y={key:0,class:"space-y-4"},w={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},k={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},U={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},j={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},V={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},C={class:"flex space-x-4"},F={class:"flex items-center space-x-2 cursor-pointer"},D={class:"flex items-center space-x-2 cursor-pointer"},P={class:"flex items-center space-x-2 cursor-pointer"},z={key:0},L={key:1},N={key:2,class:"bg-gray-50 p-4 rounded-lg"},M={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3"},$=["onClick"],_={class:"flex items-center justify-center w-full h-16 bg-white rounded mb-1"},B={class:"text-gray-500"},E={class:"text-xs"},I={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},R={class:"text-blue-700"},O={class:"flex space-x-4"},G=["disabled"],S={key:0},T={key:1,class:"flex items-center justify-center"},q={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},A={class:"mt-2 text-green-700"},H={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},K={class:"mt-2 text-red-700"},J={__name:"rotate",setup(J){const Q=b([]),W=b(null),X=b(0),Y=b("90"),Z=b("all"),ee=b(""),le=b(""),ae=b([]),se=b(!1),te=b(!1),re=b(""),ue=b(""),oe=['1. 点击"选择文件"按钮上传PDF文件',"2. 选择旋转角度：顺时针90°、180°、270°或逆时针90°","3. 选择页面范围：所有页面、指定页面或页面范围","4. 根据选择模式输入相应的页面信息","5. 或在页面预览中点击选择要旋转的页面",'6. 点击"开始旋转"按钮进行处理',"7. 处理完成后，系统会自动下载处理后的PDF文件"];e([Z,ee,le],()=>{ne()});const ne=()=>{const e=[];if("specific"===Z.value&&ee.value){const l=ee.value.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e)&&e>0&&e<=X.value);e.push(...l)}else if("range"===Z.value&&le.value){le.value.split(",").forEach(l=>{const a=l.trim();if(a.includes("-")){const[l,s]=a.split("-").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e));if(l&&s&&l<=s)for(let a=l;a<=s;a++)a>0&&a<=X.value&&e.push(a)}else{const l=parseInt(a);!isNaN(l)&&l>0&&l<=X.value&&e.push(l)}})}else if("all"===Z.value&&X.value>0)for(let l=1;l<=X.value;l++)e.push(l);ae.value=[...new Set(e)].sort((e,l)=>e-l)},ie=e=>{W.value=e.length>0?e[0]:null,ue.value="",W.value?(X.value=Math.floor(20*Math.random())+1,ne()):X.value=0},ce=e=>{ue.value=e,W.value=null,X.value=0},de=async()=>{if(W.value){se.value=!0,ue.value="",te.value=!1;try{await new Promise(e=>setTimeout(e,2e3));let e="";"90"===Y.value?e="顺时针90°":"180"===Y.value?e="顺时针180°":"270"===Y.value?e="顺时针270°":"-90"===Y.value&&(e="逆时针90°"),re.value=`成功将 ${ae.value.length} 个页面旋转 ${e}！`,te.value=!0,setTimeout(()=>{const e=new Blob(["模拟旋转后的PDF文件内容"],{type:"application/pdf"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=`rotated_${W.value.name}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},1e3)}catch(e){ue.value=`旋转失败：${e.message||"未知错误"}`}finally{se.value=!1}}else ue.value="请选择PDF文件"},pe=()=>{Y.value="90",Z.value="all",ee.value="",le.value="",ae.value=[],ue.value="",te.value=!1,re.value=""};return(e,b)=>(s(),l(x,{title:"PDF页面旋转",description:"旋转PDF文件中的页面，支持单个页面和批量旋转",tips:oe},{default:a(()=>[t("div",h,[r(f,{multiple:!1,accept:".pdf",maxSize:104857600,modelValue:Q.value,"onUpdate:modelValue":b[0]||(b[0]=e=>Q.value=e),onFilesChanged:ie,onError:ce},null,8,["modelValue"]),W.value&&X.value?(s(),u("div",y,[t("div",null,[b[14]||(b[14]=t("h3",{class:"text-lg font-semibold mb-2"},"旋转角度",-1)),t("div",w,[t("label",k,[o(t("input",{type:"radio","onUpdate:modelValue":b[1]||(b[1]=e=>Y.value=e),value:"90",class:"w-4 h-4 text-blue-600"},null,512),[[n,Y.value]]),b[10]||(b[10]=t("span",null,"顺时针 90°",-1))]),t("label",U,[o(t("input",{type:"radio","onUpdate:modelValue":b[2]||(b[2]=e=>Y.value=e),value:"180",class:"w-4 h-4 text-blue-600"},null,512),[[n,Y.value]]),b[11]||(b[11]=t("span",null,"顺时针 180°",-1))]),t("label",j,[o(t("input",{type:"radio","onUpdate:modelValue":b[3]||(b[3]=e=>Y.value=e),value:"270",class:"w-4 h-4 text-blue-600"},null,512),[[n,Y.value]]),b[12]||(b[12]=t("span",null,"顺时针 270°",-1))]),t("label",V,[o(t("input",{type:"radio","onUpdate:modelValue":b[4]||(b[4]=e=>Y.value=e),value:"-90",class:"w-4 h-4 text-blue-600"},null,512),[[n,Y.value]]),b[13]||(b[13]=t("span",null,"逆时针 90°",-1))])])]),t("div",null,[b[18]||(b[18]=t("h3",{class:"text-lg font-semibold mb-2"},"页面选择",-1)),t("div",C,[t("label",F,[o(t("input",{type:"radio","onUpdate:modelValue":b[5]||(b[5]=e=>Z.value=e),value:"all",class:"w-4 h-4 text-blue-600"},null,512),[[n,Z.value]]),b[15]||(b[15]=t("span",null,"所有页面",-1))]),t("label",D,[o(t("input",{type:"radio","onUpdate:modelValue":b[6]||(b[6]=e=>Z.value=e),value:"specific",class:"w-4 h-4 text-blue-600"},null,512),[[n,Z.value]]),b[16]||(b[16]=t("span",null,"指定页面",-1))]),t("label",P,[o(t("input",{type:"radio","onUpdate:modelValue":b[7]||(b[7]=e=>Z.value=e),value:"range",class:"w-4 h-4 text-blue-600"},null,512),[[n,Z.value]]),b[17]||(b[17]=t("span",null,"页面范围",-1))])])]),"specific"===Z.value?(s(),u("div",z,[b[19]||(b[19]=t("h3",{class:"text-lg font-semibold mb-2"},"指定页面",-1)),o(t("input",{"onUpdate:modelValue":b[8]||(b[8]=e=>ee.value=e),type:"text",placeholder:"例如：1, 3, 5, 7",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,ee.value]]),b[20]||(b[20]=t("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码，如：1, 3, 5, 7",-1))])):"range"===Z.value?(s(),u("div",L,[b[21]||(b[21]=t("h3",{class:"text-lg font-semibold mb-2"},"页面范围",-1)),o(t("input",{"onUpdate:modelValue":b[9]||(b[9]=e=>le.value=e),type:"text",placeholder:"例如：1-5, 7-10, 12",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,le.value]]),b[22]||(b[22]=t("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码范围，如：1-5, 7-10, 12",-1))])):c("",!0),X.value>0?(s(),u("div",N,[b[23]||(b[23]=t("h3",{class:"text-lg font-semibold mb-3"},"页面预览",-1)),t("div",M,[(s(!0),u(d,null,p(X.value,e=>(s(),u("div",{key:e,class:v(["border rounded-lg p-2 text-center cursor-pointer transition-colors",{"border-blue-500 bg-blue-50":ae.value.includes(e)}]),onClick:l=>(e=>{const l=ae.value.indexOf(e);l>-1?ae.value.splice(l,1):ae.value.push(e)})(e)},[t("div",_,[t("span",B,m(e),1)]),t("span",E,m(e)+"页",1)],10,$))),128))])])):c("",!0),ae.value.length>0?(s(),u("div",I,[t("p",R,[b[24]||(b[24]=g(" 已选择 ",-1)),t("strong",null,m(ae.value.length),1),b[25]||(b[25]=g(" 个页面进行旋转 ",-1))])])):c("",!0)])):c("",!0),t("div",O,[t("button",{onClick:de,disabled:!W.value||se.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[se.value?(s(),u("span",T,[...b[26]||(b[26]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" 处理中... ",-1)])])):(s(),u("span",S,"开始旋转"))],8,G),t("button",{onClick:pe,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),te.value?(s(),u("div",q,[b[27]||(b[27]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"旋转成功")],-1)),t("p",A,m(re.value),1)])):c("",!0),ue.value?(s(),u("div",H,[b[28]||(b[28]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"旋转失败")],-1)),t("p",K,m(ue.value),1)])):c("",!0)])]),_:1}))}};export{J as default};
