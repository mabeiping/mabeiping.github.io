import{_ as G}from"./DcxfYlri.js";import{e as L,u as j,h as F,w as N,o as u,a as e,c as g,i as x,j as c,f as r,t as a,F as S,r as R,k as b,l as w,m as k}from"./Bbp9ol3F.js";import"./DxtqSkkZ.js";import"./CymrFrSx.js";const U={class:"space-y-6"},V={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors"},W={key:0,class:"space-y-4"},J={class:"flex items-center justify-between"},E={class:"text-lg font-bold text-text-primary"},I={class:"space-y-2 max-h-64 overflow-y-auto"},q={class:"flex items-center gap-3"},A={class:"font-medium text-text-primary"},H={class:"text-sm text-text-secondary"},$=["onClick"],D={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["disabled"],T={key:1,class:"space-y-4"},K={class:"p-4 bg-green-50 border border-green-200 rounded-lg"},Q={class:"space-y-1 text-sm text-green-700"},oe={__name:"image-compressor",setup(X){const f=c(null),s=c([]),p=c("medium"),v=c("original"),m=c(!1),i=c(null),_=()=>{f.value?.click()},P=o=>{const t=Array.from(o.target.files).filter(n=>n.type.startsWith("image/"));s.value=[...s.value,...t]},M=o=>{s.value.splice(o,1)},C=()=>{s.value=[],i.value=null},h=o=>{if(o===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,l)*100)/100+" "+n[l]},B=async()=>{if(s.value.length===0){alert("请先选择图片文件");return}m.value=!0;try{await new Promise(d=>setTimeout(d,2e3));const o=s.value.reduce((d,y)=>d+y.size,0),n=Math.floor(o*{high:.9,medium:.7,low:.5}[p.value]),l=Math.round((1-n/o)*100);i.value={originalSize:o,compressedSize:n,savingsPercent:l}}catch(o){console.error("Compression error:",o),alert("压缩失败，请重试")}finally{m.value=!1}},z=()=>{!i.value||s.value.length===0||s.value.forEach(o=>{const t=document.createElement("a");t.href=URL.createObjectURL(o),t.download=`compressed_${o.name}`,t.click(),URL.revokeObjectURL(t.href)})};return L(),j({title:"图片压缩 - 免费在线图片压缩工具 - 办公工具箱",meta:[{name:"description",content:"免费在线图片压缩工具，支持JPG、PNG、WebP等格式。智能压缩算法，保持高质量的同时大幅减小文件大小。支持批量压缩，实时预览压缩效果，无需安装，即传即用，保护图片隐私。"},{name:"keywords",content:"图片压缩, JPG压缩, PNG压缩, WebP压缩, 图片优化, 图片瘦身, 免费图片工具, 在线图片压缩, 图片格式转换, 图片文件压缩, 图片大小减小, 图片质量优化"},{name:"author",content:"办公工具箱"},{property:"og:title",content:"图片压缩 - 免费在线图片压缩工具 - 办公工具箱"},{property:"og:description",content:"免费在线图片压缩工具，支持JPG、PNG、WebP等格式，智能压缩算法"},{property:"og:type",content:"website"},{property:"og:url",content:"https://www.worktoolkit.top/tools/image/image-compressor"},{property:"og:locale",content:"zh_CN"}],link:[{rel:"canonical",href:"https://www.worktoolkit.top/tools/image/image-compressor"}]}),(o,t)=>{const n=G;return u(),F(n,{title:"图片压缩",description:"无损压缩图片文件大小"},{default:N(()=>[e("div",U,[e("div",V,[e("input",{ref_key:"fileInput",ref:f,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:P},null,544),e("div",{class:"space-y-4"},[t[2]||(t[2]=e("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("button",{onClick:_,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors"}," 选择图片文件 "),t[3]||(t[3]=e("p",{class:"text-sm text-text-secondary"},"支持 JPG、PNG、WebP 等格式",-1))])]),r(s).length>0?(u(),g("div",W,[e("div",J,[e("h3",E,"已选择 "+a(r(s).length)+" 个文件",1),e("button",{onClick:C,class:"text-sm text-red-500 hover:text-red-600 transition-colors"}," 清空全部 ")]),e("div",I,[(u(!0),g(S,null,R(r(s),(l,d)=>(u(),g("div",{key:d,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",q,[t[4]||(t[4]=e("svg",{class:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("div",null,[e("p",A,a(l.name),1),e("p",H,a(h(l.size)),1)])]),e("button",{onClick:y=>M(d),class:"text-red-500 hover:text-red-600 transition-colors"},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,$)]))),128))]),e("div",D,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"压缩质量",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>w(p)?p.value=l:null),class:"w-full px-3 py-2 border rounded-lg focus:outline-none"},[...t[6]||(t[6]=[e("option",{value:"high"},"高质量（90%）",-1),e("option",{value:"medium"},"中等质量（70%）",-1),e("option",{value:"low"},"低质量（50%）",-1)])],512),[[k,r(p)]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"输出格式",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>w(v)?v.value=l:null),class:"w-full px-3 py-2 border rounded-lg focus:outline-none"},[...t[8]||(t[8]=[e("option",{value:"original"},"保持原格式",-1),e("option",{value:"jpeg"},"JPEG",-1),e("option",{value:"png"},"PNG",-1),e("option",{value:"webp"},"WebP",-1)])],512),[[k,r(v)]])])]),e("button",{onClick:B,disabled:r(m),class:"w-full py-3 bg-gradient-to-r from-primary to-primary-light text-white rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},a(r(m)?"压缩中...":"开始压缩"),9,O)])):x("",!0),r(i)?(u(),g("div",T,[e("div",K,[t[10]||(t[10]=e("h3",{class:"font-bold text-green-800 mb-2"},"压缩完成！",-1)),e("div",Q,[e("p",null,"原始大小："+a(h(r(i).originalSize)),1),e("p",null,"压缩后大小："+a(h(r(i).compressedSize)),1),e("p",null,"节省空间："+a(r(i).savingsPercent)+"%",1)])]),e("button",{onClick:z,class:"w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," 下载压缩后的文件 ")])):x("",!0)])]),_:1})}}};export{oe as default};
