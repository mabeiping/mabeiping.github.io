import{n as e,p as l,z as a,a7 as t,D as s,J as r,x as o,v as d,F as u,u as i,k as n,C as m,m as c}from"./DFWWPSrV.js";import p from"./CAdd_UJG.js";import{_ as v}from"./nEzmyvu1.js";const g={class:"min-h-screen bg-gray-50"},x={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},y={class:"bg-white rounded-lg shadow-sm p-4 mb-6"},b={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},f={key:0},h={key:0,class:"mt-4 space-y-4"},w={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},k={key:1,class:"mt-4 space-y-4"},j={key:0},M={key:2,class:"mt-4 space-y-4"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},C={class:"bg-white rounded-lg shadow-sm p-4 mb-6"},B={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},U={class:"mt-2 text-sm text-gray-600"},F={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none"},z={key:0,class:"mt-4 p-3 bg-gray-50 rounded-md"},D={class:"flex items-center"},L={class:"ml-3 flex-1"},P={class:"text-sm font-medium text-gray-900"},A={class:"text-xs text-gray-500"},_={class:"flex justify-center mb-6"},H=["disabled"],K={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},R={key:0,class:"bg-white rounded-lg shadow-sm p-4 mb-6"},S={key:0,class:"bg-green-50 border border-green-200 rounded-md p-4"},E={class:"flex items-start"},G={class:"ml-3"},I={class:"text-sm font-medium text-green-800"},J={key:0,class:"mt-4"},O={class:"space-y-2"},T=["href","download"],q={class:"text-gray-700"},N={key:1,class:"bg-red-50 border border-red-200 rounded-md p-4"},Q={class:"flex items-start"},W={class:"ml-3"},X={class:"text-sm font-medium text-red-800"},Y={key:0,class:"text-xs text-red-600 mt-1"},Z=v({__name:"edit",setup(v){const Z=m(),$=n(null),ee=n(!1),le=n(null),ae=n("text"),te=n("delete"),se=n(""),re=n(12),oe=n(""),de=n("90"),ue=n({title:"",author:"",subject:"",keywords:""}),ie=e=>{const l=e.target.files[0];l&&($.value=l)},ne=()=>{$.value=null,le.value=null},me=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},ce=async()=>{if($.value){ee.value=!0,le.value=null;try{const e={file:$.value,editFeature:ae.value};"text"===ae.value?(e.textContent=se.value,e.fontSize=re.value,oe.value&&(e.pageRange=oe.value)):"page"===ae.value?(e.pageOperation=te.value,oe.value&&(e.pageRange=oe.value),"rotate"===te.value&&(e.rotationAngle=de.value)):"metadata"===ae.value&&(e.metadataTitle=ue.value.title,e.metadataAuthor=ue.value.author,e.metadataSubject=ue.value.subject,e.metadataKeywords=ue.value.keywords);const l=await p.pdfEdit(e);le.value=l}catch(e){le.value={success:!1,message:"处理失败："+e.message,suggestion:"请检查文件是否损坏，或尝试使用其他文件"}}finally{ee.value=!1}}},pe=()=>{Z.back()};return(n,m)=>(c(),e("div",g,[l("div",{class:"bg-white shadow-sm"},[l("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[l("div",{class:"flex justify-between h-16"},[m[12]||(m[12]=l("div",{class:"flex items-center"},[l("h1",{class:"text-xl font-semibold text-gray-900"},"PDF编辑工具")],-1)),l("div",{class:"flex items-center"},[l("button",{onClick:pe,class:"text-gray-600 hover:text-gray-900 mr-4"},[...m[11]||(m[11]=[l("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])])])])])]),l("main",x,[m[41]||(m[41]=l("div",{class:"bg-white rounded-lg shadow-sm p-4 mb-6"},[l("p",{class:"text-gray-600"},"编辑PDF文本、页面和元数据，支持添加文本、删除页面、旋转页面等操作。")],-1)),l("div",y,[m[27]||(m[27]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"操作选项",-1)),l("div",b,[l("div",null,[m[14]||(m[14]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"编辑功能",-1)),a(l("select",{"onUpdate:modelValue":m[0]||(m[0]=e=>ae.value=e),class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[...m[13]||(m[13]=[l("option",{value:"text"},"文本编辑",-1),l("option",{value:"page"},"页面操作",-1),l("option",{value:"metadata"},"元数据编辑",-1)])],512),[[t,ae.value]])]),"page"===ae.value?(c(),e("div",f,[m[16]||(m[16]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面操作",-1)),a(l("select",{"onUpdate:modelValue":m[1]||(m[1]=e=>te.value=e),class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[...m[15]||(m[15]=[l("option",{value:"delete"},"删除页面",-1),l("option",{value:"rotate"},"旋转页面",-1),l("option",{value:"reorder"},"重排页面",-1)])],512),[[t,te.value]])])):s("",!0)]),"text"===ae.value?(c(),e("div",h,[l("div",w,[l("div",null,[m[17]||(m[17]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"文本内容",-1)),a(l("input",{"onUpdate:modelValue":m[2]||(m[2]=e=>se.value=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"输入要添加的文本"},null,512),[[r,se.value]])]),l("div",null,[m[18]||(m[18]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"字体大小",-1)),a(l("input",{"onUpdate:modelValue":m[3]||(m[3]=e=>re.value=e),type:"number",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"字体大小",min:"8",max:"72"},null,512),[[r,re.value]])])]),l("div",null,[m[19]||(m[19]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面范围",-1)),a(l("input",{"onUpdate:modelValue":m[4]||(m[4]=e=>oe.value=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"例如: 1-3,5,7-9"},null,512),[[r,oe.value]])])])):s("",!0),"page"===ae.value?(c(),e("div",k,[l("div",null,[m[20]||(m[20]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面范围",-1)),a(l("input",{"onUpdate:modelValue":m[5]||(m[5]=e=>oe.value=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"例如: 1-3,5,7-9"},null,512),[[r,oe.value]])]),"rotate"===te.value?(c(),e("div",j,[m[22]||(m[22]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"旋转角度",-1)),a(l("select",{"onUpdate:modelValue":m[6]||(m[6]=e=>de.value=e),class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[...m[21]||(m[21]=[l("option",{value:"90"},"顺时针90度",-1),l("option",{value:"180"},"顺时针180度",-1),l("option",{value:"270"},"顺时针270度",-1),l("option",{value:"-90"},"逆时针90度",-1)])],512),[[t,de.value]])])):s("",!0)])):s("",!0),"metadata"===ae.value?(c(),e("div",M,[l("div",V,[l("div",null,[m[23]||(m[23]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"标题",-1)),a(l("input",{"onUpdate:modelValue":m[7]||(m[7]=e=>ue.value.title=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"PDF标题"},null,512),[[r,ue.value.title]])]),l("div",null,[m[24]||(m[24]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"作者",-1)),a(l("input",{"onUpdate:modelValue":m[8]||(m[8]=e=>ue.value.author=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"作者名称"},null,512),[[r,ue.value.author]])]),l("div",null,[m[25]||(m[25]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"主题",-1)),a(l("input",{"onUpdate:modelValue":m[9]||(m[9]=e=>ue.value.subject=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"PDF主题"},null,512),[[r,ue.value.subject]])]),l("div",null,[m[26]||(m[26]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"关键词",-1)),a(l("input",{"onUpdate:modelValue":m[10]||(m[10]=e=>ue.value.keywords=e),type:"text",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"关键词，用逗号分隔"},null,512),[[r,ue.value.keywords]])])])])):s("",!0)]),l("div",C,[m[34]||(m[34]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"文件上传",-1)),l("div",B,[m[30]||(m[30]=l("svg",{class:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),l("p",U,[l("label",F,[m[28]||(m[28]=l("span",null,"选择PDF文件",-1)),l("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:".pdf",onChange:ie},null,32)]),m[29]||(m[29]=l("span",{class:"text-gray-500"},"或拖放文件到此处",-1))]),m[31]||(m[31]=l("p",{class:"text-xs text-gray-500 mt-1"}," 支持PDF格式，最大文件大小100MB ",-1))]),$.value?(c(),e("div",z,[l("div",D,[m[33]||(m[33]=l("div",{class:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-md flex items-center justify-center"},[l("svg",{class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),l("div",L,[l("p",P,o($.value.name),1),l("p",A,o(me($.value.size)),1)]),l("button",{onClick:ne,class:"text-red-600 hover:text-red-900"},[...m[32]||(m[32]=[l("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])):s("",!0)]),l("div",_,[l("button",{onClick:ce,disabled:!$.value||ee.value,class:"bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center"},[ee.value?(c(),e("svg",K,[...m[35]||(m[35]=[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):s("",!0),d(" "+o(ee.value?"处理中...":"开始编辑"),1)],8,H)]),le.value?(c(),e("div",R,[m[40]||(m[40]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"处理结果",-1)),le.value.success?(c(),e("div",S,[l("div",E,[m[38]||(m[38]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),l("div",G,[l("p",I,o(le.value.message),1),le.value.downloadLinks?(c(),e("div",J,[m[37]||(m[37]=l("h3",{class:"text-sm font-medium text-gray-900 mb-2"},"下载文件",-1)),l("div",O,[(c(!0),e(u,null,i(le.value.downloadLinks,(a,t)=>(c(),e("a",{key:t,href:a.url,download:a.filename,class:"flex items-center p-2 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors"},[m[36]||(m[36]=l("svg",{class:"h-5 w-5 text-gray-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),l("span",q,o(a.filename),1)],8,T))),128))])])):s("",!0)])])])):(c(),e("div",N,[l("div",Q,[m[39]||(m[39]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),l("div",W,[l("p",X,o(le.value.message),1),le.value.suggestion?(c(),e("p",Y,o(le.value.suggestion),1)):s("",!0)])])]))])):s("",!0)])]))}},[["__scopeId","data-v-71a1d305"]]);export{Z as default};
