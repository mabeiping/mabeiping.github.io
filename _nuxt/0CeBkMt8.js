import{j as e,w as l,o as a,a as s,b as t,c as o,F as u,p as n,t as r,l as i,q as d,v as c,C as v,y as m,s as p,d as b,B as f,r as g,x as h}from"./HXycOAlW.js";import{_ as x}from"./D1uvpjsy.js";import{G as y}from"./0iwS8AcL.js";import{s as w}from"./BxyD9DOn.js";import"./CP1Hj45X.js";import"./CPBe7JJp.js";import"./BadZoQ71.js";import"./Dyo0McTI.js";import"./BCo6x5W8.js";const k={class:"space-y-6"},F={key:0,class:"bg-gray-50 p-4 rounded-lg"},M={class:"space-y-2"},C={class:"flex items-center"},j={class:"font-medium"},T={class:"text-sm text-gray-500"},O=["onClick"],W={key:1,class:"bg-gray-50 p-4 rounded-lg"},V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},B=["value"],z={class:"font-medium"},L={class:"text-sm text-gray-500"},U={key:2,class:"space-y-4"},E={class:"space-y-2"},$={class:"flex items-center space-x-2"},_={class:"flex items-center space-x-2"},A={class:"flex items-center space-x-2"},G={key:0,class:"bg-white p-4 rounded-lg border"},H={class:"space-y-2"},R={key:0},q={class:"flex space-x-4"},I=["disabled"],K={key:0},P={key:1,class:"flex items-center justify-center"},Y={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Z={class:"flex items-center justify-between mb-2"},D={class:"text-blue-700"},J={class:"w-full bg-gray-200 rounded-full h-2.5"},N={class:"mt-2 text-sm text-blue-700"},Q={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4"},S={class:"mt-2 text-green-700"},X={class:"mt-3 space-y-2"},ee=["href","download"],le={key:5,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ae={class:"mt-2 text-red-700"},se={key:0,class:"mt-2 text-sm text-gray-600"},te={__name:"index",setup(te){const oe=[{value:"ttf",label:"TTF (.ttf)",description:"TrueType字体格式",extensions:[".ttf"]},{value:"otf",label:"OTF (.otf)",description:"OpenType字体格式",extensions:[".otf"]},{value:"woff",label:"WOFF (.woff)",description:"Web Open Font Format",extensions:[".woff"]},{value:"woff2",label:"WOFF2 (.woff2)",description:"WOFF 2.0格式",extensions:[".woff2"]},{value:"eot",label:"EOT (.eot)",description:"Embedded OpenType",extensions:[".eot"]}],ue=g(""),ne=g({includeMetadata:!0,optimizeForWeb:!1,embedFonts:!1}),re=g({subsetMode:"none",customChars:"",compressionLevel:"medium"}),ie=g([]),de=h(()=>ie.value),ce=g(!1),ve=g(!1),me=g(""),pe=g(""),be=g(""),fe=g(0),ge=g(""),he=g([]),xe=g([]),ye=["1. 上传文件：支持TTF、OTF、WOFF、WOFF2和EOT格式，可批量上传","2. 系统自动识别源文件格式","3. 选择目标格式：系统会根据源格式显示可用的目标格式","4. 设置转换选项：是否包含元数据、针对Web优化、嵌入字体等",'5. 点击"开始转换"按钮进行处理',"6. 等待处理完成，系统会自动下载处理后的文件","7. 查看处理结果，确保字体格式正确"],we=e=>e.split(".").pop().toLowerCase(),ke=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},Fe=e=>{ie.value=e,e.length>0?Me():(xe.value=[],ue.value=""),pe.value="",ve.value=!1},Me=()=>{if(0===ie.value.length)return void(xe.value=[]);const e=we(ie.value[0].name),l=[];oe.forEach(a=>{a.extensions.some(l=>e===l.replace(".",""))||l.push(a)}),xe.value=l,l.length>0?ue.value=l[0].value:ue.value=""},Ce=e=>{pe.value=e,be.value=je(e)},je=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Te=async()=>{if(0!==de.length)if(ue.value){ce.value=!0,pe.value="",be.value="",ve.value=!1,fe.value=0,ge.value="准备转换...",he.value=[];try{await new Promise(e=>{let l=0;const a=w(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),fe.value=l,ge.value=l<30?"正在分析字体文件...":l<70?"正在转换格式...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});de.value,ue.value,ne.value,re.value;const e=oe.find(e=>e.value===ue.value);me.value=`成功将 ${de.length} 个文件转换为 ${e.label} 格式！`,ve.value=!0,de.forEach((e,l)=>{const a=new Blob(["模拟转换后的字体文件内容"],{type:"application/octet-stream"}),s=URL.createObjectURL(a),t=`converted_${e.name.replace(/\.[^/.]+$/,`.${ue.value}`)}`;he.value.push({url:s,filename:t})}),he.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=he.value[0].url,e.download=he.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){pe.value=`转换失败：${e.message||"未知错误"}`,be.value=je(pe.value)}finally{ce.value=!1}}else pe.value="请选择目标格式";else pe.value="请选择文件"},Oe=()=>{ie.value=[],ue.value="",ne.value={includeMetadata:!0,optimizeForWeb:!1,embedFonts:!1},re.value={subsetMode:"none",customChars:"",compressionLevel:"medium"},pe.value="",be.value="",ve.value=!1,me.value="",fe.value=0,ge.value="",he.value=[],xe.value=[]};return(g,h)=>(a(),e(x,{title:"字体格式转换",description:"TTF/OTF/WOFF等字体格式互转",tips:ye},{default:l(()=>[s("div",k,[t(y,{multiple:!0,accept:[".ttf",".otf",".woff",".woff2",".eot"],"max-size":52428800,modelValue:ie.value,"onUpdate:modelValue":h[0]||(h[0]=e=>ie.value=e),onFilesChanged:Fe,onError:Ce},null,8,["modelValue"]),de.value.length>0?(a(),o("div",F,[h[10]||(h[10]=s("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),s("div",M,[(a(!0),o(u,null,n(de.value,(e,l)=>(a(),o("div",{key:l,class:"flex items-center justify-between p-2 bg-white rounded border"},[s("div",C,[h[8]||(h[8]=s("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8-4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1)),s("div",null,[s("div",j,r(e.name),1),s("div",T,r(we(e.name))+" • "+r(ke(e.size)),1)])]),s("button",{onClick:e=>(e=>{ie.value.splice(e,1),0===ie.value.length?Oe():Me()})(l),class:"text-red-500 hover:text-red-700"},[...h[9]||(h[9]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,O)]))),128))])])):i("",!0),de.value.length>0&&xe.value.length>0?(a(),o("div",W,[h[11]||(h[11]=s("h3",{class:"text-lg font-semibold mb-4"},"目标格式",-1)),s("div",V,[(a(!0),o(u,null,n(xe.value,e=>(a(),o("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[d(s("input",{type:"radio","onUpdate:modelValue":h[1]||(h[1]=e=>ue.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,B),[[c,ue.value]]),s("div",null,[s("div",z,r(e.label),1),s("div",L,r(e.description),1)])]))),128))])])):i("",!0),de.value.length>0?(a(),o("div",U,[s("div",null,[h[15]||(h[15]=s("h3",{class:"text-lg font-semibold mb-2"},"转换选项",-1)),s("div",E,[s("label",$,[d(s("input",{type:"checkbox","onUpdate:modelValue":h[2]||(h[2]=e=>ne.value.includeMetadata=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ne.value.includeMetadata]]),h[12]||(h[12]=s("span",null,"包含字体元数据",-1))]),s("label",_,[d(s("input",{type:"checkbox","onUpdate:modelValue":h[3]||(h[3]=e=>ne.value.optimizeForWeb=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ne.value.optimizeForWeb]]),h[13]||(h[13]=s("span",null,"针对Web优化",-1))]),s("label",A,[d(s("input",{type:"checkbox","onUpdate:modelValue":h[4]||(h[4]=e=>ne.value.embedFonts=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ne.value.embedFonts]]),h[14]||(h[14]=s("span",null,"嵌入字体",-1))])])]),ne.value.optimizeForWeb?(a(),o("div",G,[h[21]||(h[21]=s("h3",{class:"text-lg font-semibold mb-3"},"Web优化选项",-1)),s("div",H,[s("div",null,[h[17]||(h[17]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"字体子集化",-1)),d(s("select",{"onUpdate:modelValue":h[5]||(h[5]=e=>re.value.subsetMode=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...h[16]||(h[16]=[s("option",{value:"none"},"不子集化",-1),s("option",{value:"latin"},"仅拉丁字符",-1),s("option",{value:"cyrillic"},"仅西里尔字符",-1),s("option",{value:"custom"},"自定义字符集",-1)])],512),[[m,re.value.subsetMode]])]),"custom"===re.value.subsetMode?(a(),o("div",R,[h[18]||(h[18]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"自定义字符集",-1)),d(s("input",{"onUpdate:modelValue":h[6]||(h[6]=e=>re.value.customChars=e),type:"text",placeholder:"输入要包含的字符",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,re.value.customChars]])])):i("",!0),s("div",null,[h[20]||(h[20]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"压缩级别",-1)),d(s("select",{"onUpdate:modelValue":h[7]||(h[7]=e=>re.value.compressionLevel=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...h[19]||(h[19]=[s("option",{value:"none"},"不压缩",-1),s("option",{value:"medium"},"中等压缩",-1),s("option",{value:"high"},"高压缩",-1)])],512),[[m,re.value.compressionLevel]])])])])):i("",!0)])):i("",!0),s("div",q,[s("button",{onClick:Te,disabled:!de.value.length||!ue.value||ce.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[ce.value?(a(),o("span",P,[h[22]||(h[22]=s("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),b(" 处理中... "+r(fe.value)+"% ",1)])):(a(),o("span",K,"开始转换"))],8,I),s("button",{onClick:Oe,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),ce.value?(a(),o("div",Y,[s("div",Z,[h[23]||(h[23]=s("h4",{class:"font-semibold text-blue-800"},"转换进度",-1)),s("span",D,r(fe.value)+"%",1)]),s("div",J,[s("div",{class:"bg-blue-600 h-2.5 rounded-full",style:f({width:fe.value+"%"})},null,4)]),s("p",N,r(ge.value),1)])):i("",!0),ve.value?(a(),o("div",Q,[h[24]||(h[24]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),s("h4",{class:"font-semibold text-green-800"},"转换成功")],-1)),s("p",S,r(me.value),1),s("div",X,[(a(!0),o(u,null,n(he.value,(e,l)=>(a(),o("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载转换结果 "+r(l+1),9,ee))),128))])])):i("",!0),pe.value?(a(),o("div",le,[h[25]||(h[25]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),s("h4",{class:"font-semibold text-red-800"},"转换失败")],-1)),s("p",ae,r(pe.value),1),be.value?(a(),o("p",se,"建议："+r(be.value),1)):i("",!0)])):i("",!0)])]),_:1}))}};export{te as default};
