import{i as Q,w as W,o as n,a as e,c as a,F as L,r as U,j as g,v as X,t as u,p as B,k as V,y as Y,f as v,b as Z,d as ee,x as te,l as d,m as le}from"./-R7zUpUx.js";import{_ as oe}from"./1SagYtif.js";import{G as se}from"./zseaTYbb.js";import{s as ne}from"./CI8PMl9t.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const re={class:"space-y-6"},ae={class:"bg-gray-50 p-4 rounded-lg"},ie={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ue=["value"],de={class:"font-medium"},ce={class:"text-sm text-gray-500"},ve={key:0,class:"space-y-4"},ge={class:"bg-gray-50 p-4 rounded-lg"},pe={class:"space-y-3"},me={class:"text-right text-sm text-gray-500 mt-1"},be={class:"bg-gray-50 p-4 rounded-lg"},fe={class:"space-y-3"},xe={class:"flex items-center space-x-2"},ye={class:"grid grid-cols-2 gap-2"},he={class:"flex items-center space-x-2"},we={key:0},ke={key:1,class:"space-y-4"},_e={key:0,class:"bg-gray-50 p-4 rounded-lg"},Ce={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Fe={class:"flex justify-center mb-3"},ze=["src"],je={key:1,class:"w-16 h-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={class:"text-center"},Ue={class:"font-medium truncate"},Ve={class:"text-sm text-gray-500"},Be=["onClick"],Oe={class:"bg-gray-50 p-4 rounded-lg"},Me={class:"space-y-3"},Pe={class:"flex space-x-4"},Re=["disabled"],Se={key:0},$e={key:1,class:"flex items-center justify-center"},Ee={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ge={class:"flex items-center justify-between mb-2"},qe={class:"text-blue-700"},De={class:"w-full bg-gray-200 rounded-full h-2.5"},Ne={class:"mt-2 text-sm text-blue-700"},Ie={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Te={class:"mt-2 text-green-700"},Ae={class:"mt-3 space-y-2"},He=["href","download"],Je={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ke={class:"mt-2 text-red-700"},Qe={key:0,class:"mt-2 text-sm text-gray-600"},We={key:5,class:"bg-gray-50 p-4 rounded-lg"},Xe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Ye={class:"mb-2"},Ze={key:6,class:"bg-gray-50 p-4 rounded-lg"},et={class:"bg-white p-4 rounded-lg border max-h-96 overflow-auto"},tt={class:"whitespace-pre-wrap"},dt={__name:"index",setup(lt){const O=[{value:"generate",label:"生成二维码/条形码",description:"批量生成二维码/条形码(自定义内容/尺寸/LOGO)"},{value:"recognize",label:"识别二维码/条形码",description:"批量识别图片/PDF内二维码/条形码"}],i=d(""),s=d({type:"qrcode",content:"https://example.com",size:200,foregroundColor:"#000000",backgroundColor:"#ffffff",addLogo:!1,logo:null}),p=d({type:"both",outputFormat:"text"}),b=d([]),f=le(()=>b.value),k=d(!1),_=d(!1),C=d(!1),z=d(""),c=d(""),x=d(""),y=d(0),h=d(""),m=d([]),F=d([]),w=d(""),S=["1. 选择功能：生成二维码/条形码或识别二维码/条形码","2. 对于生成功能：输入编码内容，设置样式参数","3. 对于识别功能：上传包含二维码/条形码的图片或PDF",'4. 点击"开始处理"按钮进行操作',"5. 等待处理完成，系统会自动下载处理后的文件","6. 查看处理结果，确保操作符合预期"],$=o=>o.split(".").pop().toLowerCase(),E=o=>{if(o===0)return"0 B";const t=1024,l=["B","KB","MB","GB"],r=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,r)).toFixed(2))+" "+l[r]},G=o=>{const t=[".png",".jpg",".jpeg",".webp",".gif"],l=o.toLowerCase();return t.some(r=>l.endsWith(r))},M=()=>i.value?i.value==="generate"?s.value.content.trim().length>0:i.value==="recognize"?f.length>0:!1:!1,q=o=>{b.value.splice(o,1),b.value.length===0&&R()},D=o=>{const t=o.target.files[0];t&&(s.value.logo=t)},N=o=>{b.value=o,c.value="",_.value=!1},I=o=>{c.value=o,x.value=P(o)},P=o=>o.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":o.includes("文件类型")?"请确保上传的文件格式受支持":o.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",T=()=>new Promise(o=>{let t=0;const l=ne(()=>{t+=Math.floor(Math.random()*10)+5,t>100&&(t=100),y.value=t,t<30?h.value="正在准备...":t<70?h.value=i.value==="generate"?"正在生成二维码/条形码...":"正在识别二维码/条形码...":h.value="正在生成结果...",t===100&&(clearInterval(l),setTimeout(o,500))},500)}),A=async()=>{if(!M()){i.value?i.value==="generate"&&!s.value.content.trim()?c.value="请输入编码内容":i.value==="recognize"&&f.length===0&&(c.value="请选择文件"):c.value="请选择功能";return}k.value=!0,c.value="",x.value="",_.value=!1,C.value=!1,y.value=0,h.value="准备处理...",m.value=[],F.value=[],w.value="";try{await T();let o={feature:i.value};i.value==="generate"?o.options=s.value:i.value==="recognize"&&(o.files=f.value,o.options=p.value),console.log("处理参数:",o);const t=O.find(l=>l.value===i.value);if(i.value==="generate"){const l=s.value.content.split(`
`).filter(r=>r.trim());z.value=`成功生成 ${l.length} 个${s.value.type==="qrcode"?"二维码":"条形码"}！`,l.forEach(r=>{F.value.push({content:r})}),l.forEach((r,j)=>{const H=new Blob(["模拟生成的二维码/条形码内容"],{type:"image/png"}),J=URL.createObjectURL(H),K=`${s.value.type}_${j+1}.png`;m.value.push({url:J,filename:K})})}else if(i.value==="recognize"){z.value=`成功识别 ${f.length} 个文件中的二维码/条形码！`,w.value=`识别结果：

文件1: https://example.com
文件2: 123456789012
文件3: https://test.org`;const l=new Blob([w.value],{type:p.value.outputFormat==="json"?"application/json":"text/plain"}),r=URL.createObjectURL(l),j=`recognition_result.${p.value.outputFormat}`;m.value.push({url:r,filename:j})}_.value=!0,C.value=!0,m.value.length>0&&setTimeout(()=>{const l=document.createElement("a");l.href=m.value[0].url,l.download=m.value[0].filename,document.body.appendChild(l),l.click(),document.body.removeChild(l)},1e3)}catch(o){c.value=`处理失败：${o.message||"未知错误"}`,x.value=P(c.value)}finally{k.value=!1}},R=()=>{i.value="",s.value={type:"qrcode",content:"https://example.com",size:200,foregroundColor:"#000000",backgroundColor:"#ffffff",addLogo:!1,logo:null},p.value={type:"both",outputFormat:"text"},b.value=[],c.value="",x.value="",_.value=!1,C.value=!1,z.value="",y.value=0,h.value="",m.value=[],F.value=[],w.value=""};return(o,t)=>(n(),Q(oe,{title:"二维码/条形码工具",description:"支持批量生成二维码/条形码(自定义内容/尺寸/LOGO)、批量识别图片/PDF内二维码/条形码、二维码内容解析/导出为文本",tips:S},{default:W(()=>[e("div",re,[e("div",ae,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold mb-4"},"选择功能",-1)),e("div",ie,[(n(),a(L,null,U(O,l=>e("label",{key:l.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[g(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),value:l.value,class:"w-4 h-4 text-blue-600"},null,8,ue),[[X,i.value]]),e("div",null,[e("div",de,u(l.label),1),e("div",ce,u(l.description),1)])])),64))])]),i.value==="generate"?(n(),a("div",ve,[e("div",ge,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold mb-3"},"内容设置",-1)),e("div",pe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"编码类型",-1)),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.type=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[11]||(t[11]=[e("option",{value:"qrcode"},"二维码",-1),e("option",{value:"barcode"},"条形码",-1)])],512),[[B,s.value.type]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"编码内容",-1)),g(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.content=l),placeholder:"请输入要编码的内容，多个内容请换行分隔",rows:"4",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,s.value.content]]),e("div",me,u(s.value.content.split(`
`).filter(l=>l.trim()).length)+" 个内容",1)])])]),e("div",be,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold mb-3"},"样式设置",-1)),e("div",fe,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"尺寸",-1)),e("div",xe,[g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.size=l),type:"number",min:"100",max:"1000",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,s.value.size,void 0,{number:!0}]]),t[15]||(t[15]=e("span",{class:"text-gray-500"},"像素",-1))])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"颜色",-1)),e("div",ye,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-xs text-gray-500 mb-1"},"前景色",-1)),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.foregroundColor=l),type:"color",class:"w-full h-10 border border-gray-300 rounded-md"},null,512),[[V,s.value.foregroundColor]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-xs text-gray-500 mb-1"},"背景色",-1)),g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.backgroundColor=l),type:"color",class:"w-full h-10 border border-gray-300 rounded-md"},null,512),[[V,s.value.backgroundColor]])])])]),e("div",null,[e("label",he,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=l=>s.value.addLogo=l),class:"w-4 h-4 text-blue-600"},null,512),[[Y,s.value.addLogo]]),t[20]||(t[20]=e("span",null,"添加LOGO",-1))])]),s.value.addLogo?(n(),a("div",we,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"上传LOGO",-1)),e("input",{onChange:D,type:"file",accept:".png,.jpg,.jpeg",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,32)])):v("",!0)])])])):v("",!0),i.value==="recognize"?(n(),a("div",ke,[Z(se,{multiple:!0,accept:[".png",".jpg",".jpeg",".pdf"],"max-size":100*1024*1024,modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=l=>b.value=l),onFilesChanged:N,onError:I},null,8,["modelValue"]),f.value.length>0?(n(),a("div",_e,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),e("div",Ce,[(n(!0),a(L,null,U(f.value,(l,r)=>(n(),a("div",{key:r,class:"bg-white rounded border p-3"},[e("div",Fe,[G(l.name)?(n(),a("img",{key:0,src:o.URL.createObjectURL(l),class:"max-h-32 object-contain",alt:"Preview"},null,8,ze)):(n(),a("svg",je,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e("div",Le,[e("div",Ue,u(l.name),1),e("div",Ve,u($(l.name))+" • "+u(E(l.size)),1)]),e("button",{onClick:j=>q(r),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,Be)]))),128))])])):v("",!0),e("div",Oe,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold mb-3"},"识别选项",-1)),e("div",Me,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"识别类型",-1)),g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>p.value.type=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[25]||(t[25]=[e("option",{value:"both"},"二维码和条形码",-1),e("option",{value:"qrcode"},"仅二维码",-1),e("option",{value:"barcode"},"仅条形码",-1)])],512),[[B,p.value.type]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"输出格式",-1)),g(e("select",{"onUpdate:modelValue":t[9]||(t[9]=l=>p.value.outputFormat=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[27]||(t[27]=[e("option",{value:"text"},"纯文本",-1),e("option",{value:"json"},"JSON格式",-1)])],512),[[B,p.value.outputFormat]])])])])])):v("",!0),e("div",Pe,[e("button",{onClick:A,disabled:!M()||k.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[k.value?(n(),a("span",$e,[t[30]||(t[30]=e("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),ee(" 处理中... "+u(y.value)+"% ",1)])):(n(),a("span",Se,"开始处理"))],8,Re),e("button",{onClick:R,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),k.value?(n(),a("div",Ee,[e("div",Ge,[t[31]||(t[31]=e("h4",{class:"font-semibold text-blue-800"},"处理进度",-1)),e("span",qe,u(y.value)+"%",1)]),e("div",De,[e("div",{class:"bg-blue-600 h-2.5 rounded-full",style:te({width:y.value+"%"})},null,4)]),e("p",Ne,u(h.value),1)])):v("",!0),_.value?(n(),a("div",Ie,[t[32]||(t[32]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h4",{class:"font-semibold text-green-800"},"处理成功")],-1)),e("p",Te,u(z.value),1),e("div",Ae,[(n(!0),a(L,null,U(m.value,(l,r)=>(n(),a("a",{key:r,href:l.url,download:l.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载处理结果 "+u(r+1),9,He))),128))])])):v("",!0),c.value?(n(),a("div",Je,[t[33]||(t[33]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("h4",{class:"font-semibold text-red-800"},"处理失败")],-1)),e("p",Ke,u(c.value),1),x.value?(n(),a("p",Qe,"建议："+u(x.value),1)):v("",!0)])):v("",!0),C.value&&F.value.length>0?(n(),a("div",We,[t[35]||(t[35]=e("h3",{class:"text-lg font-semibold mb-3"},"生成结果预览",-1)),e("div",Xe,[(n(!0),a(L,null,U(F.value,(l,r)=>(n(),a("div",{key:r,class:"bg-white p-3 rounded-lg border text-center"},[e("div",Ye,u(l.content),1),t[34]||(t[34]=e("div",{class:"flex justify-center"},[e("div",{class:"border border-gray-200 p-2"},[e("svg",{width:"128",height:"128",class:"border border-gray-200"},[e("rect",{width:"128",height:"128",fill:"#ffffff"}),e("text",{x:"64",y:"64","text-anchor":"middle","dominant-baseline":"middle","font-size":"12",fill:"#000000"},"二维码预览")])])],-1))]))),128))])])):v("",!0),C.value&&w.value?(n(),a("div",Ze,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold mb-3"},"识别结果预览",-1)),e("div",et,[e("pre",tt,u(w.value),1)])])):v("",!0)])]),_:1}))}};export{dt as default};
