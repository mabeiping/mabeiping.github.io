import{z as L,i as R,w as S,o as r,a as l,b as $,c as i,j as b,v as C,k as U,f as m,F as E,r as T,q as I,t as x,d as F,l as u}from"./-R7zUpUx.js";import{_ as O}from"./1SagYtif.js";import{G as A}from"./zseaTYbb.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const G={class:"space-y-6"},q={key:0,class:"space-y-4"},H={class:"flex space-x-4"},J={class:"flex items-center space-x-2 cursor-pointer"},K={class:"flex items-center space-x-2 cursor-pointer"},Q={class:"flex items-center space-x-2 cursor-pointer"},W={key:0},X={key:1},Y={key:2,class:"bg-gray-50 p-4 rounded-lg"},Z={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3"},ee=["onClick"],le={class:"flex items-center justify-center w-full h-16 bg-white rounded mb-1"},se={class:"text-gray-500"},te={class:"text-xs"},oe={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},ae={class:"text-blue-700"},ne={key:0,class:"text-red-500 text-sm mt-1"},re={class:"flex space-x-4"},ie=["disabled"],ue={key:0},de={key:1,class:"flex items-center justify-center"},ce={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ve={class:"mt-2 text-green-700"},pe={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},me={class:"mt-2 text-red-700"},ke={__name:"remove",setup(ge){const P=u([]),p=u(null),o=u(0),n=u("specific"),g=u(""),f=u(""),a=u([]),h=u(!1),y=u(!1),k=u(""),d=u(""),D=['1. 点击"选择文件"按钮上传PDF文件',"2. 选择删除模式：指定页面、页面范围或全部页面","3. 根据选择模式输入相应的页面信息","4. 或在页面预览中点击选择要删除的页面",'5. 点击"删除页面"按钮进行处理',"6. 处理完成后，系统会自动下载处理后的PDF文件"];L([n,g,f],()=>{V()});const V=()=>{const t=[];if(n.value==="specific"&&g.value){const e=g.value.split(",").map(s=>parseInt(s.trim())).filter(s=>!isNaN(s)&&s>0&&s<=o.value);t.push(...e)}else if(n.value==="range"&&f.value)f.value.split(",").forEach(s=>{const w=s.trim();if(w.includes("-")){const[v,_]=w.split("-").map(c=>parseInt(c.trim())).filter(c=>!isNaN(c));if(v&&_&&v<=_)for(let c=v;c<=_;c++)c>0&&c<=o.value&&t.push(c)}else{const v=parseInt(w);!isNaN(v)&&v>0&&v<=o.value&&t.push(v)}});else if(n.value==="all"&&o.value>0)for(let e=1;e<=o.value;e++)t.push(e);a.value=[...new Set(t)].sort((e,s)=>e-s)},N=t=>{const e=a.value.indexOf(t);e>-1?a.value.splice(e,1):a.value.push(t)},M=t=>{p.value=t.length>0?t[0]:null,d.value="",p.value?(o.value=Math.floor(Math.random()*20)+1,V()):o.value=0},B=t=>{d.value=t,p.value=null,o.value=0},j=async()=>{if(!p.value){d.value="请选择PDF文件";return}if(a.value.length===0){d.value="请选择要删除的页面";return}if(a.value.length===o.value){d.value="不能删除所有页面，PDF文件至少需要保留一页";return}h.value=!0,d.value="",y.value=!1;try{await new Promise(t=>setTimeout(t,2e3)),k.value=`成功删除 ${a.value.length} 个页面，剩余 ${o.value-a.value.length} 个页面。`,y.value=!0,setTimeout(()=>{const t=new Blob(["模拟删除页面后的PDF文件内容"],{type:"application/pdf"}),e=URL.createObjectURL(t),s=document.createElement("a");s.href=e,s.download=`removed_pages_${p.value.name}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)},1e3)}catch(t){d.value=`删除失败：${t.message||"未知错误"}`}finally{h.value=!1}},z=()=>{n.value="specific",g.value="",f.value="",a.value=[],d.value="",y.value=!1,k.value=""};return(t,e)=>(r(),R(O,{title:"PDF页面删除",description:"删除PDF文件中不需要的页面",tips:D},{default:S(()=>[l("div",G,[$(A,{multiple:!1,accept:".pdf",maxSize:100*1024*1024,modelValue:P.value,"onUpdate:modelValue":e[0]||(e[0]=s=>P.value=s),onFilesChanged:M,onError:B},null,8,["modelValue"]),p.value&&o.value?(r(),i("div",q,[l("div",null,[e[9]||(e[9]=l("h3",{class:"text-lg font-semibold mb-2"},"选择模式",-1)),l("div",H,[l("label",J,[b(l("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),value:"specific",class:"w-4 h-4 text-blue-600"},null,512),[[C,n.value]]),e[6]||(e[6]=l("span",null,"指定页面",-1))]),l("label",K,[b(l("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),value:"range",class:"w-4 h-4 text-blue-600"},null,512),[[C,n.value]]),e[7]||(e[7]=l("span",null,"页面范围",-1))]),l("label",Q,[b(l("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=s=>n.value=s),value:"all",class:"w-4 h-4 text-blue-600"},null,512),[[C,n.value]]),e[8]||(e[8]=l("span",null,"全部页面",-1))])])]),n.value==="specific"?(r(),i("div",W,[e[10]||(e[10]=l("h3",{class:"text-lg font-semibold mb-2"},"指定页面",-1)),b(l("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s),type:"text",placeholder:"例如：1, 3, 5, 7",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[U,g.value]]),e[11]||(e[11]=l("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码，如：1, 3, 5, 7",-1))])):n.value==="range"?(r(),i("div",X,[e[12]||(e[12]=l("h3",{class:"text-lg font-semibold mb-2"},"页面范围",-1)),b(l("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s),type:"text",placeholder:"例如：1-5, 7-10, 12",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[U,f.value]]),e[13]||(e[13]=l("p",{class:"text-sm text-gray-500 mt-1"},"使用逗号分隔的页码范围，如：1-5, 7-10, 12",-1))])):m("",!0),o.value>0?(r(),i("div",Y,[e[14]||(e[14]=l("h3",{class:"text-lg font-semibold mb-3"},"页面预览",-1)),l("div",Z,[(r(!0),i(E,null,T(o.value,s=>(r(),i("div",{key:s,class:I(["border rounded-lg p-2 text-center cursor-pointer transition-colors",{"border-blue-500 bg-blue-50":a.value.includes(s)}]),onClick:w=>N(s)},[l("div",le,[l("span",se,x(s),1)]),l("span",te,x(s)+"页",1)],10,ee))),128))])])):m("",!0),a.value.length>0?(r(),i("div",oe,[l("p",ae,[e[15]||(e[15]=F(" 已选择 ",-1)),l("strong",null,x(a.value.length),1),e[16]||(e[16]=F(" 个页面进行删除 ",-1))]),a.value.length===o.value?(r(),i("p",ne," 警告：您选择了所有页面，删除后PDF将为空 ")):m("",!0)])):m("",!0)])):m("",!0),l("div",re,[l("button",{onClick:j,disabled:!p.value||h.value||a.value.length===0,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[h.value?(r(),i("span",de,[...e[17]||(e[17]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),F(" 处理中... ",-1)])])):(r(),i("span",ue,"删除页面"))],8,ie),l("button",{onClick:z,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),y.value?(r(),i("div",ce,[e[18]||(e[18]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),l("h4",{class:"font-semibold text-green-800"},"删除成功")],-1)),l("p",ve,x(k.value),1)])):m("",!0),d.value?(r(),i("div",pe,[e[19]||(e[19]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),l("h4",{class:"font-semibold text-red-800"},"删除失败")],-1)),l("p",me,x(d.value),1)])):m("",!0)])]),_:1}))}};export{ke as default};
