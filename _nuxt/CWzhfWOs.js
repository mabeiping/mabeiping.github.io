const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D_qv5q8J.js","./Bn_dLcEw.js","./BpoX327k.js","./ht_AtOyM.js","./entry.Dbhj7xl8.css"])))=>i.map(i=>d[i]);
import{e as le,A as ie,f as de,u as ue,c as u,b as $,a as t,q as x,k as h,d as f,v as b,i as r,n as m,t as d,x as U,F as A,h as W,B as pe,j as D,m as me,_ as q,o as p,l as Y}from"./ht_AtOyM.js";import{_ as ge,a as ce,b as ye}from"./B-T4dYXf.js";import"./Cy7Cg-KN.js";const L={id:"leave-request",name:"请假条",type:"word",category:"hr",version:"1.0.0",description:"专业的企业员工请假条模板，符合行政规范",documentStructure:{title:"请假条",sections:[{id:"basic-info",name:"员工基本信息",order:1,fields:["employeeName","department","employeeId"]},{id:"leave-type",name:"请假类型",order:2,fields:["leaveType","leaveSubtype"]},{id:"leave-time",name:"请假时间",order:3,fields:["startDate","endDate","totalDays"]},{id:"leave-reason",name:"请假事由",order:4,fields:["leaveReason"]},{id:"department-approval",name:"部门负责人审批意见",order:5,fields:["departmentOpinion","departmentSignature","departmentDate"]},{id:"hr-approval",name:"人力资源部审核意见",order:6,fields:["hrOpinion","hrSignature","hrDate"]}]},formFields:{employeeName:{id:"employeeName",label:"姓名",type:"text",required:!0,placeholder:"请输入员工姓名",maxLength:50,validation:{pattern:/^[\u4e00-\u9fa5a-zA-Z\s]{2,50}$/,message:"请输入有效的姓名"}},department:{id:"department",label:"部门",type:"select",required:!0,placeholder:"请选择部门",options:["人事部","财务部","市场部","技术部","运营部","行政部","销售部","客服部"],validation:{required:!0,message:"请选择部门"}},employeeId:{id:"employeeId",label:"工号",type:"text",required:!0,placeholder:"请输入工号",maxLength:20,validation:{pattern:/^[A-Za-z0-9]{4,20}$/,message:"请输入有效的工号"}},leaveType:{id:"leaveType",label:"请假类型",type:"select",required:!0,placeholder:"请选择请假类型",options:[{value:"sick",label:"病假",requiresProof:!0},{value:"personal",label:"事假",requiresProof:!1},{value:"annual",label:"年假",requiresProof:!1},{value:"marriage",label:"婚假",requiresProof:!0},{value:"maternity",label:"产假",requiresProof:!0},{value:"bereavement",label:"丧假",requiresProof:!0},{value:"injury",label:"工伤假",requiresProof:!0},{value:"other",label:"其他",requiresProof:!1}],validation:{required:!0,message:"请选择请假类型"}},leaveSubtype:{id:"leaveSubtype",label:"请假事由",type:"text",required:!0,placeholder:"请输入具体事由",maxLength:200,dependsOn:"leaveType",showWhen:["personal","other"],validation:{required:!0,message:"请输入请假事由"}},startDate:{id:"startDate",label:"起始日期",type:"date",required:!0,placeholder:"请选择起始日期",validation:{required:!0,message:"请选择起始日期",minDate:"today",maxDate:"endOfYear"}},endDate:{id:"endDate",label:"结束日期",type:"date",required:!0,placeholder:"请选择结束日期",validation:{required:!0,message:"请选择结束日期",minDate:"startDate",maxDate:"endOfYear"}},totalDays:{id:"totalDays",label:"请假天数",type:"number",required:!0,placeholder:"自动计算",readOnly:!0,validation:{required:!0,min:.5,max:365,message:"请假天数必须在0.5-365之间"}},leaveReason:{id:"leaveReason",label:"请假事由详细说明",type:"textarea",required:!0,placeholder:"请详细说明请假原因（至少20字）",minLength:20,maxLength:500,rows:4,validation:{required:!0,minLength:20,message:"请假事由至少需要20个字符"}},departmentOpinion:{id:"departmentOpinion",label:"部门负责人审批意见",type:"textarea",required:!1,placeholder:"请输入审批意见（可选）",maxLength:200,rows:2,role:"department-manager"},departmentSignature:{id:"departmentSignature",label:"部门负责人签名",type:"signature",required:!1,placeholder:"请签名",role:"department-manager"},departmentDate:{id:"departmentDate",label:"审批日期",type:"date",required:!1,placeholder:"请选择审批日期",role:"department-manager"},hrOpinion:{id:"hrOpinion",label:"人力资源部审核意见",type:"textarea",required:!1,placeholder:"请输入审核意见（可选）",maxLength:200,rows:2,role:"hr-manager"},hrSignature:{id:"hrSignature",label:"人力资源部签名",type:"signature",required:!1,placeholder:"请签名",role:"hr-manager"},hrDate:{id:"hrDate",label:"审核日期",type:"date",required:!1,placeholder:"请选择审核日期",role:"hr-manager"}},validationRules:{calculateDays:(c,s)=>{if(!c||!s)return 0;const n=new Date(c),w=new Date(s).getTime()-n.getTime(),v=Math.ceil(w/(1e3*60*60*24));return Math.max(.5,v)},validateDateRange:(c,s)=>{if(!c||!s)return{valid:!0,message:""};const n=new Date(c),y=new Date(s);return y<n?{valid:!1,message:"结束日期不能早于起始日期"}:Math.ceil((y.getTime()-n.getTime())/(1e3*60*60*24))>365?{valid:!1,message:"请假天数不能超过365天"}:{valid:!0,message:""}},validateRequired:(c,s)=>!c||c.toString().trim()===""?{valid:!1,message:`${s}为必填项`}:{valid:!0,message:""},validatePattern:(c,s,n)=>s.test(c)?{valid:!0,message:""}:{valid:!1,message:`${n}格式不正确`},validateLength:(c,s,n,y)=>{const w=c.toString().length;return s&&w<s?{valid:!1,message:`${y}至少需要${s}个字符`}:n&&w>n?{valid:!1,message:`${y}不能超过${n}个字符`}:{valid:!0,message:""}}},workflow:{steps:[{id:"submit",name:"提交申请",description:"员工填写请假信息并提交",action:"submit",role:"employee"},{id:"department-review",name:"部门审批",description:"部门负责人审核请假申请",action:"approve",role:"department-manager",requiredFields:["departmentOpinion","departmentSignature","departmentDate"]},{id:"hr-review",name:"人力资源审核",description:"人力资源部最终审核",action:"approve",role:"hr-manager",requiredFields:["hrOpinion","hrSignature","hrDate"]},{id:"export",name:"导出文档",description:"生成并下载请假条Word文档",action:"export",role:"system"}],statusTransitions:{pending:"待审批",departmentApproved:"部门已审批",departmentRejected:"部门已驳回",hrApproved:"人力资源已审核",hrRejected:"人力资源已驳回",completed:"已完成"}},documentTemplate:{pageSize:"A4",margins:{top:2.54,right:2.54,bottom:2.54,left:2.54},styles:{title:{fontSize:22,bold:!0,alignment:"center",spacingAfter:400},sectionTitle:{fontSize:16,bold:!0,spacingBefore:400,spacingAfter:200},fieldLabel:{fontSize:12,bold:!0,spacingAfter:100},fieldValue:{fontSize:12,spacingAfter:200},signature:{fontSize:12,alignment:"right",spacingBefore:400}}}},H=()=>L,xe=()=>L.formFields.leaveType.options,ve=()=>L.formFields.department.options,fe={class:"min-h-screen bg-background"},be={class:"flex pt-nav-height"},he={class:"flex-1 lg:ml-sidebar-left overflow-y-auto"},we={class:"max-w-6xl mx-auto px-4 py-6"},De={class:"flex flex-col lg:flex-row gap-6"},ke={class:"w-full lg:w-1/2 space-y-6"},Se={class:"bg-white rounded-xl shadow-sm p-6"},_e={class:"space-y-4"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},qe={class:"space-y-1"},Te={key:0,class:"text-xs text-red-500 mt-1"},Oe={class:"space-y-1"},Re=["value"],$e={key:0,class:"text-xs text-red-500 mt-1"},Le={class:"space-y-1"},je={key:0,class:"text-xs text-red-500 mt-1"},Ie={class:"bg-white rounded-xl shadow-sm p-6"},Be={class:"space-y-4"},Me={class:"space-y-1"},Ve=["value"],Ee={key:0,class:"text-xs text-red-500 mt-1"},Pe={key:0,class:"space-y-1"},Ne={key:0,class:"text-xs text-red-500 mt-1"},ze={class:"bg-white rounded-xl shadow-sm p-6"},Fe={class:"space-y-4"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ae={class:"space-y-1"},We=["min","max"],Ye={key:0,class:"text-xs text-red-500 mt-1"},He={class:"space-y-1"},Xe=["min","max"],Je={key:0,class:"text-xs text-red-500 mt-1"},Ze={class:"space-y-1"},Ge={key:0,class:"text-xs text-red-500 mt-1"},Ke={class:"bg-white rounded-xl shadow-sm p-6"},Qe={class:"space-y-4"},et={class:"space-y-1"},tt={class:"flex justify-between mt-1"},rt={class:"text-xs text-text-secondary"},st={key:0,class:"text-xs text-red-500 mt-1"},at={class:"bg-white rounded-xl shadow-sm p-6"},ot={class:"space-y-4"},nt={class:"space-y-1"},lt={class:"flex justify-between mt-1"},it={class:"text-xs text-text-secondary"},dt={class:"space-y-1"},ut={class:"border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 relative"},pt={class:"space-y-1"},mt={class:"bg-white rounded-xl shadow-sm p-6"},gt={class:"space-y-4"},ct={class:"space-y-1"},yt={class:"flex justify-between mt-1"},xt={class:"text-xs text-text-secondary"},vt={class:"space-y-1"},ft={class:"border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 relative"},bt={class:"space-y-1"},ht={class:"flex gap-3 pt-4"},wt=["disabled"],Dt={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},kt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},St={class:"w-full lg:w-1/2"},_t={class:"bg-white rounded-xl shadow-sm p-6 sticky top-6"},Ct={class:"flex items-center justify-between mb-4"},qt={class:"flex items-center gap-2"},Tt=["disabled"],Ot={class:"text-sm text-text-secondary min-w-[50px] text-center"},Rt=["disabled"],$t={class:"mb-6"},Lt={class:"w-full border-collapse border border-gray-900"},jt={class:"border border-gray-900 px-4 py-2 text-gray-700 w-[35%]"},It={class:"border border-gray-900 px-4 py-2 text-gray-700 w-[35%]"},Bt={class:"border border-gray-900 px-4 py-2 text-gray-700"},Mt={class:"border border-gray-900 px-4 py-2 text-gray-700"},Vt={class:"border border-gray-900 px-4 py-2 text-gray-700"},Et={class:"border border-gray-900 px-4 py-2 text-gray-700"},Pt={class:"border border-gray-900 px-4 py-2 text-gray-700"},Nt={class:"mb-6"},zt={class:"text-gray-700 leading-relaxed whitespace-pre-wrap"},Ft={class:"border-t-2 border-gray-900 pt-6 mb-6"},Ut={class:"text-gray-700 leading-relaxed whitespace-pre-wrap mb-3"},At={class:"flex"},Wt={class:"text-gray-700"},Yt={class:"border-t-2 border-gray-900 pt-6"},Ht={class:"text-gray-700 leading-relaxed whitespace-pre-wrap mb-3"},Xt={class:"flex"},Jt={class:"text-gray-700"},Zt={class:"mt-4 flex gap-2"},Gt=["disabled"],Kt=["disabled"],rr={__name:"leave-request",setup(c){le(),ie();const s=D({employeeName:"",department:"",employeeId:"",leaveType:"",leaveSubtype:"",startDate:"",endDate:"",totalDays:0,leaveReason:"",departmentOpinion:"",departmentDate:"",hrOpinion:"",hrDate:""}),n=D({}),y=D(!1),w=D(!1),v=D(1),T=D(!1),S=D(!1),X=ve(),_=xe(),j=Y(()=>{const o=new Date;return o.setHours(0,0,0,0),o.toISOString().split("T")[0]}),I=Y(()=>new Date(new Date().getFullYear(),11,31).toISOString().split("T")[0]),J=()=>{const o=_.find(e=>e.value===s.value.leaveType);w.value=o?.requiresProof||!1,w.value||(s.value.leaveSubtype="")},O=()=>{if(s.value.startDate&&s.value.endDate){const o=new Date(s.value.startDate),e=new Date(s.value.endDate);if(e<o){n.value.endDate="结束日期不能早于起始日期",s.value.totalDays=0;return}delete n.value.endDate;const l=e.getTime()-o.getTime(),i=Math.ceil(l/(1e3*60*60*24));if(i>365){n.value.totalDays="请假天数不能超过365天",s.value.totalDays=0;return}delete n.value.totalDays,s.value.totalDays=Math.max(.5,i)}},k=o=>{const l=H().formFields[o];if(!l)return;const i=s.value[o];if(l.required&&!i?.trim()){n.value[o]=l.validation.message;return}if(l.validation.pattern&&!new RegExp(l.validation.pattern).test(i)){n.value[o]=l.validation.message;return}if(l.validation.minLength&&i.length<l.validation.minLength){n.value[o]=`至少需要${l.validation.minLength}个字符`;return}if(l.validation.maxLength&&i.length>l.validation.maxLength){n.value[o]=`不能超过${l.validation.maxLength}个字符`;return}delete n.value[o]},B=()=>{const o=H();let e=!0;return Object.keys(o.formFields).forEach(l=>{const i=o.formFields[l];i.required&&!s.value[l]?.trim()&&(n.value[l]=i.validation.message,e=!1)}),e},M=o=>{const e=o==="department"?document.getElementById("departmentSignatureCanvas"):document.getElementById("hrSignatureCanvas");if(!e)return;const l=e.getContext("2d"),i=e.getBoundingClientRect(),g=event.clientX-i.left,a=event.clientY-i.top;l.beginPath(),l.moveTo(g,a),e.isDrawing=!0,e.lastX=g,e.lastY=a},V=o=>{const e=o==="department"?document.getElementById("departmentSignatureCanvas"):document.getElementById("hrSignatureCanvas");if(!e||!e.isDrawing)return;const l=e.getContext("2d"),i=e.getBoundingClientRect(),g=event.clientX-i.left,a=event.clientY-i.top;l.lineWidth=2,l.lineCap="round",l.strokeStyle="#000000",l.lineTo(g,a),l.stroke(),e.lastX=g,e.lastY=a},C=o=>{const e=o==="department"?document.getElementById("departmentSignatureCanvas"):document.getElementById("hrSignatureCanvas");e&&(e.isDrawing=!1)},E=o=>{const e=o==="department"?document.getElementById("departmentSignatureCanvas"):document.getElementById("hrSignatureCanvas");if(!e)return;e.getContext("2d").clearRect(0,0,e.width,e.height)},Z=()=>{localStorage.setItem("leaveRequestDraft",JSON.stringify(s.value)),alert("草稿已保存")},G=()=>{{const o=localStorage.getItem("leaveRequestDraft");if(o)try{s.value=JSON.parse(o),O()}catch(e){console.error("Failed to load draft:",e)}}},K=async()=>{if(B()){y.value=!0;try{const o=`请假条_${s.value.employeeName}_${new Date().getTime()}`;await P(o),localStorage.removeItem("leaveRequestDraft"),console.log("请假条已生成并下载")}catch(o){console.error("Export failed:",o),alert("导出失败，请重试")}finally{y.value=!1}}},P=async o=>{const{createLeaveRequestDocument:e}=await q(async()=>{const{createLeaveRequestDocument:a}=await import("./D_qv5q8J.js");return{createLeaveRequestDocument:a}},__vite__mapDeps([0,1]),import.meta.url),{Packer:l}=await q(async()=>{const{Packer:a}=await import("./Bn_dLcEw.js");return{Packer:a}},[],import.meta.url),i=e(s.value,_),g=await l.toBlob(i);Q(g,`${o}.docx`)},Q=(o,e)=>{const l=URL.createObjectURL(o),i=document.createElement("a");i.href=l,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)},ee=()=>{me("/templates")},te=()=>{v.value<1.5&&(v.value=Math.min(1.5,v.value+.1))},re=()=>{v.value>.5&&(v.value=Math.max(.5,v.value-.1))},se=()=>{T.value=!T.value},N=async o=>{if(!B()){alert("请先填写所有必填项");return}S.value=!0;try{const e=`请假条_${s.value.employeeName}_${new Date().getTime()}`;o==="docx"?await P(e):o==="pdf"&&await ae(e),console.log("文件已下载:",e)}catch(e){console.error("Export failed:",e),alert("导出失败，请重试")}finally{S.value=!1}},ae=async o=>{const{default:e}=await q(async()=>{const{default:R}=await import("./BpoX327k.js").then(ne=>ne.j);return{default:R}},__vite__mapDeps([2,3,4]),import.meta.url),{default:l}=await q(async()=>{const{default:R}=await import("./DXEQVQnt.js");return{default:R}},[],import.meta.url),i=document.querySelector(".preview-content");if(!i)throw new Error("Preview content not found");const g=await l(i,{scale:2,useCORS:!0,logging:!1}),a=g.toDataURL("image/png"),z=new e("p","mm","a4"),F=210,oe=g.height*F/g.width;z.addImage(a,"PNG",0,0,F,oe),z.save(`${o}.pdf`)};return de(()=>{G();{const o=document.getElementById("departmentSignatureCanvas"),e=document.getElementById("hrSignatureCanvas");o&&(o.width=o.offsetWidth,o.height=80),e&&(e.width=e.offsetWidth,e.height=80)}}),ue({title:"请假条 - Office Tools",meta:[{name:"description",content:"填写请假信息，生成专业的请假条Word文档"}]}),(o,e)=>{const l=ge,i=ce,g=ye;return p(),u("div",fe,[$(l),t("div",be,[$(i),t("main",he,[t("div",we,[t("div",{class:"mb-6"},[t("div",{class:"flex items-center gap-2 mb-2"},[t("button",{onClick:ee,class:"text-text-secondary hover:text-primary transition-colors"},[...e[30]||(e[30]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[31]||(e[31]=t("h1",{class:"text-2xl font-bold text-text-primary"},"请假条",-1)),e[32]||(e[32]=t("span",{class:"px-3 py-1 bg-primary/10 text-primary text-sm rounded-full"},"HR模板",-1))]),e[33]||(e[33]=t("p",{class:"text-text-secondary text-sm"},"填写请假信息，生成专业的请假条Word文档",-1))]),t("div",De,[t("div",ke,[t("div",Se,[e[38]||(e[38]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-lg font-bold text-text-primary"},"员工基本信息")],-1)),t("div",_e,[t("div",Ce,[t("div",qe,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 姓名 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r(s).employeeName=a),type:"text",placeholder:"请输入员工姓名",maxlength:"50",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).employeeName?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onInput:e[1]||(e[1]=a=>k("employeeName"))},null,34),[[b,r(s).employeeName]]),r(n).employeeName?(p(),u("p",Te,d(r(n).employeeName),1)):h("",!0)]),t("div",Oe,[e[36]||(e[36]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 部门 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>r(s).department=a),class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).department?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onChange:e[3]||(e[3]=a=>k("department"))},[e[35]||(e[35]=t("option",{value:""},"请选择部门",-1)),(p(!0),u(A,null,W(r(X),a=>(p(),u("option",{key:a,value:a},d(a),9,Re))),128))],34),[[U,r(s).department]]),r(n).department?(p(),u("p",$e,d(r(n).department),1)):h("",!0)]),t("div",Le,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 工号 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(s).employeeId=a),type:"text",placeholder:"请输入工号",maxlength:"20",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).employeeId?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onInput:e[5]||(e[5]=a=>k("employeeId"))},null,34),[[b,r(s).employeeId]]),r(n).employeeId?(p(),u("p",je,d(r(n).employeeId),1)):h("",!0)])])])]),t("div",Ie,[e[42]||(e[42]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-lg font-bold text-text-primary"},"请假类型")],-1)),t("div",Be,[t("div",Me,[e[40]||(e[40]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 请假类型 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>r(s).leaveType=a),onChange:J,class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).leaveType?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"])},[e[39]||(e[39]=t("option",{value:""},"请选择请假类型",-1)),(p(!0),u(A,null,W(r(_),a=>(p(),u("option",{key:a.value,value:a.value},d(a.label),9,Ve))),128))],34),[[U,r(s).leaveType]]),r(n).leaveType?(p(),u("p",Ee,d(r(n).leaveType),1)):h("",!0)]),r(w)?(p(),u("div",Pe,[e[41]||(e[41]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 请假事由 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>r(s).leaveSubtype=a),type:"text",placeholder:"请输入具体事由",maxlength:"200",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).leaveSubtype?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onInput:e[8]||(e[8]=a=>k("leaveSubtype"))},null,34),[[b,r(s).leaveSubtype]]),r(n).leaveSubtype?(p(),u("p",Ne,d(r(n).leaveSubtype),1)):h("",!0)])):h("",!0)])]),t("div",ze,[e[46]||(e[46]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-lg font-bold text-text-primary"},"请假时间")],-1)),t("div",Fe,[t("div",Ue,[t("div",Ae,[e[43]||(e[43]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 起始日期 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>r(s).startDate=a),type:"date",min:r(j),max:r(I),class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).startDate?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onInput:O},null,42,We),[[b,r(s).startDate]]),r(n).startDate?(p(),u("p",Ye,d(r(n).startDate),1)):h("",!0)]),t("div",He,[e[44]||(e[44]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 结束日期 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>r(s).endDate=a),type:"date",min:r(s).startDate||r(j),max:r(I),class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all",r(n).endDate?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onInput:O},null,42,Xe),[[b,r(s).endDate]]),r(n).endDate?(p(),u("p",Je,d(r(n).endDate),1)):h("",!0)]),t("div",Ze,[e[45]||(e[45]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 请假天数 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>r(s).totalDays=a),type:"number",step:"0.5",min:"0.5",max:"365",readonly:"",placeholder:"自动计算",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all bg-gray-50 cursor-not-allowed",r(n).totalDays?"border-red-300 focus:ring-red-100":"border-gray-200"])},null,2),[[b,r(s).totalDays]]),r(n).totalDays?(p(),u("p",Ge,d(r(n).totalDays),1)):h("",!0)])])])]),t("div",Ke,[e[49]||(e[49]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-lg font-bold text-text-primary"},"请假事由详细说明")],-1)),t("div",Qe,[t("div",et,[e[48]||(e[48]=t("label",{class:"text-sm font-medium text-text-primary"},[f(" 请假事由详细说明 "),t("span",{class:"text-red-500"},"*")],-1)),x(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=a=>r(s).leaveReason=a),placeholder:"请详细说明请假原因（至少20字）",rows:"4",minlength:"20",maxlength:"500",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all resize-none",r(n).leaveReason?"border-red-300 focus:ring-red-100":"border-gray-200 focus:ring-primary/20 focus:border-primary"]),onInput:e[13]||(e[13]=a=>k("leaveReason"))},null,34),[[b,r(s).leaveReason]]),t("div",tt,[t("span",rt,"已输入："+d(r(s).leaveReason?.length||0)+"/20",1),e[47]||(e[47]=t("span",{class:"text-xs text-text-secondary"},"最小20，最大500",-1))]),r(n).leaveReason?(p(),u("p",st,d(r(n).leaveReason),1)):h("",!0)])])]),t("div",at,[e[53]||(e[53]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-lg font-bold text-text-primary"},"部门负责人审批意见")],-1)),t("div",ot,[t("div",nt,[e[50]||(e[50]=t("label",{class:"text-sm font-medium text-text-secondary"}," 审批意见（可选） ",-1)),x(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=a=>r(s).departmentOpinion=a),placeholder:"请输入审批意见（可选）",rows:"2",maxlength:"200",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all resize-none","border-gray-200 focus:ring-primary/20 focus:border-primary"])},null,512),[[b,r(s).departmentOpinion]]),t("div",lt,[t("span",it,"已输入："+d(r(s).departmentOpinion?.length||0)+"/200",1)])]),t("div",dt,[e[51]||(e[51]=t("label",{class:"text-sm font-medium text-text-secondary"}," 签名（可选） ",-1)),t("div",ut,[t("canvas",{ref:"departmentSignatureCanvas",id:"departmentSignatureCanvas",class:"w-full h-20 cursor-crosshair",onMousedown:e[15]||(e[15]=a=>M("department")),onMousemove:e[16]||(e[16]=a=>V("department")),onMouseup:e[17]||(e[17]=a=>C("department")),onMouseleave:e[18]||(e[18]=a=>C("department"))},null,544),t("button",{onClick:e[19]||(e[19]=a=>E("department")),class:"absolute top-2 right-2 text-xs text-text-secondary hover:text-primary"}," 清除 ")])]),t("div",pt,[e[52]||(e[52]=t("label",{class:"text-sm font-medium text-text-secondary"}," 审批日期（可选） ",-1)),x(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>r(s).departmentDate=a),type:"date",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all","border-gray-200 focus:ring-primary/20 focus:border-primary"])},null,512),[[b,r(s).departmentDate]])])])]),t("div",mt,[e[57]||(e[57]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-lg font-bold text-text-primary"},"人力资源部审核意见")],-1)),t("div",gt,[t("div",ct,[e[54]||(e[54]=t("label",{class:"text-sm font-medium text-text-secondary"}," 审核意见（可选） ",-1)),x(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=a=>r(s).hrOpinion=a),placeholder:"请输入审核意见（可选）",rows:"2",maxlength:"200",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all resize-none","border-gray-200 focus:ring-primary/20 focus:border-primary"])},null,512),[[b,r(s).hrOpinion]]),t("div",yt,[t("span",xt,"已输入："+d(r(s).hrOpinion?.length||0)+"/200",1)])]),t("div",vt,[e[55]||(e[55]=t("label",{class:"text-sm font-medium text-text-secondary"}," 签名（可选） ",-1)),t("div",ft,[t("canvas",{ref:"hrSignatureCanvas",id:"hrSignatureCanvas",class:"w-full h-20 cursor-crosshair",onMousedown:e[22]||(e[22]=a=>M("hr")),onMousemove:e[23]||(e[23]=a=>V("hr")),onMouseup:e[24]||(e[24]=a=>C("hr")),onMouseleave:e[25]||(e[25]=a=>C("hr"))},null,544),t("button",{onClick:e[26]||(e[26]=a=>E("hr")),class:"absolute top-2 right-2 text-xs text-text-secondary hover:text-primary"}," 清除 ")])]),t("div",bt,[e[56]||(e[56]=t("label",{class:"text-sm font-medium text-text-secondary"}," 审核日期（可选） ",-1)),x(t("input",{"onUpdate:modelValue":e[27]||(e[27]=a=>r(s).hrDate=a),type:"date",class:m(["w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 transition-all","border-gray-200 focus:ring-primary/20 focus:border-primary"])},null,512),[[b,r(s).hrDate]])])])]),t("div",ht,[t("button",{onClick:Z,class:"flex-1 py-3 rounded-lg font-medium bg-gray-100 text-text-primary hover:bg-gray-200 transition-colors"}," 保存草稿 "),t("button",{onClick:K,disabled:r(y),class:m(["flex-1 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",r(y)?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-primary to-primary-light text-white hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]"])},[r(y)?(p(),u("svg",Dt,[...e[58]||(e[58]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(p(),u("svg",kt,[...e[59]||(e[59]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),f(" "+d(r(y)?"提交中...":"提交申请"),1)],10,wt)])]),t("div",St,[t("div",_t,[t("div",Ct,[e[63]||(e[63]=t("h2",{class:"text-lg font-bold text-text-primary"},"实时预览",-1)),t("div",qt,[t("button",{onClick:re,disabled:r(v)<=.5,class:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"缩小"},[...e[60]||(e[60]=[t("svg",{class:"w-4 h-4 text-text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,Tt),t("span",Ot,d(Math.round(r(v)*100))+"%",1),t("button",{onClick:te,disabled:r(v)>=1.5,class:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"放大"},[...e[61]||(e[61]=[t("svg",{class:"w-4 h-4 text-text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Rt),t("button",{onClick:se,class:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"全屏"},[...e[62]||(e[62]=[t("svg",{class:"w-4 h-4 text-text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1)])])])]),t("div",{ref:"previewContainer",class:m(["overflow-auto border rounded-lg bg-gray-100",r(T)?"fixed inset-0 z-50 rounded-none":"h-[calc(100vh-300px)]"])},[t("div",{class:"mx-auto bg-white shadow-lg transition-transform origin-top preview-content",style:pe({width:"210mm",minHeight:"297mm",padding:"25.4mm",transform:`scale(${r(v)})`,transformOrigin:"top center"})},[e[77]||(e[77]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"请 假 条"),t("div",{class:"border-b-2 border-gray-900"})],-1)),t("div",$t,[t("table",Lt,[t("tbody",null,[t("tr",null,[e[64]||(e[64]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900 w-[15%]"},"姓　名",-1)),t("td",jt,d(r(s).employeeName||"（未填写）"),1),e[65]||(e[65]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900 w-[15%]"},"部　门",-1)),t("td",It,d(r(s).department||"（未填写）"),1)]),t("tr",null,[e[66]||(e[66]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900"},"工　号",-1)),t("td",Bt,d(r(s).employeeId||"（未填写）"),1),e[67]||(e[67]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900"},"请假类型",-1)),t("td",Mt,d(r(_).find(a=>a.value===r(s).leaveType)?.label||"（未填写）"),1)]),t("tr",null,[e[68]||(e[68]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900"},"起始日期",-1)),t("td",Vt,d(r(s).startDate||"（未填写）"),1),e[69]||(e[69]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900"},"结束日期",-1)),t("td",Et,d(r(s).endDate||"（未填写）"),1)]),t("tr",null,[e[70]||(e[70]=t("td",{class:"border border-gray-900 bg-gray-100 px-4 py-2 font-bold text-gray-900"},"请假天数",-1)),t("td",Pt,d(r(s).totalDays?`${r(s).totalDays} 天`:"（未填写）"),1),e[71]||(e[71]=t("td",{class:"border border-gray-900 px-4 py-2 text-gray-700",colspan:"2"},null,-1))])])])]),t("div",Nt,[e[72]||(e[72]=t("h2",{class:"text-xl font-bold text-gray-900 mb-3"},"请假事由：",-1)),t("p",zt,d(r(s).leaveReason||"（未填写）"),1)]),t("div",Ft,[e[74]||(e[74]=t("h2",{class:"text-xl font-bold text-gray-900 mb-3"},"部门负责人审批意见",-1)),t("p",Ut,d(r(s).departmentOpinion||"无"),1),t("div",At,[e[73]||(e[73]=t("span",{class:"font-bold text-gray-900 min-w-[100px]"},"审批日期：",-1)),t("span",Wt,d(r(s).departmentDate||"无"),1)])]),t("div",Yt,[e[76]||(e[76]=t("h2",{class:"text-xl font-bold text-gray-900 mb-3"},"人力资源部审核意见",-1)),t("p",Ht,d(r(s).hrOpinion||"无"),1),t("div",Xt,[e[75]||(e[75]=t("span",{class:"font-bold text-gray-900 min-w-[100px]"},"审核日期：",-1)),t("span",Jt,d(r(s).hrDate||"无"),1)])])],4)],2),t("div",Zt,[t("button",{onClick:e[28]||(e[28]=a=>N("docx")),disabled:r(S),class:"flex-1 py-2 px-4 rounded-lg font-medium bg-blue-50 text-blue-600 hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2"},[...e[78]||(e[78]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),f(" 导出 Word ",-1)])],8,Gt),t("button",{onClick:e[29]||(e[29]=a=>N("pdf")),disabled:r(S),class:"flex-1 py-2 px-4 rounded-lg font-medium bg-red-50 text-red-600 hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2"},[...e[79]||(e[79]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),f(" 导出 PDF ",-1)])],8,Kt)])])])])])]),$(g)])])}}};export{rr as default};
