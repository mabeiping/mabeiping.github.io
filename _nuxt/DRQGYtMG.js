import{j as G,w as X,o,a as t,b as I,c as n,F as S,p as j,t as i,l as b,q as x,v as D,C as F,y as U,s as Y,d as q,B as K,r,x as W}from"./5KiIeb3O.js";import{_ as Q}from"./D50zL9At.js";import{G as Z}from"./9UHln5xC.js";import{s as ee}from"./CkncbWtC.js";import"./drxn0VFK.js";import"./7YFkQcuL.js";import"./BrGRrvQ4.js";import"./bvqDPNRK.js";import"./DlAUqK2U.js";const te={class:"space-y-6"},se={key:0,class:"bg-gray-50 p-4 rounded-lg"},le={class:"space-y-2"},oe={class:"flex items-center"},ne={class:"font-medium"},ae={class:"text-sm text-gray-500"},re=["onClick"],ie={key:1,class:"bg-gray-50 p-4 rounded-lg"},ue={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},de=["value"],ce={class:"font-medium"},ve={class:"text-sm text-gray-500"},pe={key:2,class:"space-y-4"},me={class:"space-y-2"},be={class:"flex items-center space-x-2"},ge={class:"flex items-center space-x-2"},xe={class:"flex items-center space-x-2"},fe={key:0,class:"bg-white p-4 rounded-lg border"},ye={class:"space-y-2"},he={class:"flex space-x-4"},ke=["disabled"],we={key:0},Ce={key:1,class:"flex items-center justify-center"},_e={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Se={class:"flex items-center justify-between mb-2"},je={class:"text-blue-700"},Fe={class:"w-full bg-gray-200 rounded-full h-2.5"},Me={class:"mt-2 text-sm text-blue-700"},ze={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Ve={class:"mt-2 text-green-700"},Be={class:"mt-3 space-y-2"},Le=["href","download"],Te={key:5,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ue={class:"mt-2 text-red-700"},Ee={key:0,class:"mt-2 text-sm text-gray-600"},Ie={__name:"index",setup(Pe){const M=[{value:"js",label:"JavaScript (.js)",description:"JavaScript代码",extensions:[".js"]},{value:"ts",label:"TypeScript (.ts)",description:"TypeScript代码",extensions:[".ts"]},{value:"jsx",label:"JSX (.jsx)",description:"React JavaScript",extensions:[".jsx"]},{value:"tsx",label:"TSX (.tsx)",description:"React TypeScript",extensions:[".tsx"]},{value:"py",label:"Python (.py)",description:"Python代码",extensions:[".py"]},{value:"java",label:"Java (.java)",description:"Java代码",extensions:[".java"]},{value:"c",label:"C (.c)",description:"C语言代码",extensions:[".c"]},{value:"cpp",label:"C++ (.cpp)",description:"C++代码",extensions:[".cpp"]},{value:"cs",label:"C# (.cs)",description:"C#代码",extensions:[".cs"]},{value:"go",label:"Go (.go)",description:"Go代码",extensions:[".go"]},{value:"rb",label:"Ruby (.rb)",description:"Ruby代码",extensions:[".rb"]},{value:"php",label:"PHP (.php)",description:"PHP代码",extensions:[".php"]},{value:"html",label:"HTML (.html)",description:"HTML代码",extensions:[".html"]},{value:"css",label:"CSS (.css)",description:"CSS代码",extensions:[".css"]},{value:"json",label:"JSON (.json)",description:"JSON格式",extensions:[".json"]},{value:"xml",label:"XML (.xml)",description:"XML格式",extensions:[".xml"]},{value:"yaml",label:"YAML (.yaml)",description:"YAML格式",extensions:[".yaml",".yml"]}],u=r(""),c=r({formatCode:!0,preserveComments:!0,optimizeCode:!1}),m=r({indentStyle:"spaces",indentSize:2,lineEnding:"lf"}),v=r([]),p=W(()=>v.value),w=r(!1),C=r(!1),_=r(""),d=r(""),f=r(""),y=r(0),h=r(""),g=r([]),k=r([]),E=["1. 上传文件：支持多种编程语言和配置文件格式，可批量上传","2. 系统自动识别源文件格式","3. 选择目标格式：系统会根据源格式显示可用的目标格式","4. 设置转换选项：是否格式化代码、保留注释、优化代码等",'5. 点击"开始转换"按钮进行处理',"6. 等待处理完成，系统会自动下载处理后的文件","7. 查看处理结果，确保代码格式正确"],z=l=>l.split(".").pop().toLowerCase(),P=l=>{if(l===0)return"0 B";const e=1024,s=["B","KB","MB","GB"],a=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,a)).toFixed(2))+" "+s[a]},R=l=>{v.value.splice(l,1),v.value.length===0?L():V()},J=l=>{v.value=l,l.length>0?V():(k.value=[],u.value=""),d.value="",C.value=!1},V=()=>{if(v.value.length===0){k.value=[];return}const l=z(v.value[0].name),e=[];M.forEach(s=>{s.extensions.some(a=>l===a.replace(".",""))||e.push(s)}),k.value=e,e.length>0?u.value=e[0].value:u.value=""},$=l=>{d.value=l,f.value=B(l)},B=l=>l.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":l.includes("文件类型")?"请确保上传的文件格式受支持":l.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",H=()=>new Promise(l=>{let e=0;const s=ee(()=>{e+=Math.floor(Math.random()*10)+5,e>100&&(e=100),y.value=e,e<30?h.value="正在分析代码文件...":e<70?h.value="正在转换格式...":h.value="正在生成结果...",e===100&&(clearInterval(s),setTimeout(l,500))},500)}),N=async()=>{if(p.length===0){d.value="请选择文件";return}if(!u.value){d.value="请选择目标格式";return}w.value=!0,d.value="",f.value="",C.value=!1,y.value=0,h.value="准备转换...",g.value=[];try{await H();const l={files:p.value,targetFormat:u.value,options:c.value,formatOptions:m.value};console.log("转换参数:",l);const e=M.find(s=>s.value===u.value);_.value=`成功将 ${p.length} 个文件转换为 ${e.label} 格式！`,C.value=!0,p.forEach((s,a)=>{const T=new Blob(["模拟转换后的代码内容"],{type:"application/octet-stream"}),O=URL.createObjectURL(T),A=`converted_${s.name.replace(/\.[^/.]+$/,`.${u.value}`)}`;g.value.push({url:O,filename:A})}),g.value.length>0&&setTimeout(()=>{const s=document.createElement("a");s.href=g.value[0].url,s.download=g.value[0].filename,document.body.appendChild(s),s.click(),document.body.removeChild(s)},1e3)}catch(l){d.value=`转换失败：${l.message||"未知错误"}`,f.value=B(d.value)}finally{w.value=!1}},L=()=>{v.value=[],u.value="",c.value={formatCode:!0,preserveComments:!0,optimizeCode:!1},m.value={indentStyle:"spaces",indentSize:2,lineEnding:"lf"},d.value="",f.value="",C.value=!1,_.value="",y.value=0,h.value="",g.value=[],k.value=[]};return(l,e)=>(o(),G(Q,{title:"代码格式转换",description:"不同编程语言代码格式转换",tips:E},{default:X(()=>[t("div",te,[I(Z,{multiple:!0,accept:[".js",".ts",".jsx",".tsx",".py",".java",".c",".cpp",".cs",".go",".rb",".php",".html",".css",".json",".xml",".yaml",".yml"],"max-size":50*1024*1024,modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),onFilesChanged:J,onError:$},null,8,["modelValue"]),p.value.length>0?(o(),n("div",se,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),t("div",le,[(o(!0),n(S,null,j(p.value,(s,a)=>(o(),n("div",{key:a,class:"flex items-center justify-between p-2 bg-white rounded border"},[t("div",oe,[e[8]||(e[8]=t("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("div",null,[t("div",ne,i(s.name),1),t("div",ae,i(z(s.name))+" • "+i(P(s.size)),1)])]),t("button",{onClick:T=>R(a),class:"text-red-500 hover:text-red-700"},[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,re)]))),128))])])):b("",!0),p.value.length>0&&k.value.length>0?(o(),n("div",ie,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold mb-4"},"目标格式",-1)),t("div",ue,[(o(!0),n(S,null,j(k.value,s=>(o(),n("label",{key:s.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[x(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),value:s.value,class:"w-4 h-4 text-blue-600"},null,8,de),[[D,u.value]]),t("div",null,[t("div",ce,i(s.label),1),t("div",ve,i(s.description),1)])]))),128))])])):b("",!0),p.value.length>0?(o(),n("div",pe,[t("div",null,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold mb-2"},"转换选项",-1)),t("div",me,[t("label",be,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=s=>c.value.formatCode=s),class:"w-4 h-4 text-blue-600"},null,512),[[F,c.value.formatCode]]),e[12]||(e[12]=t("span",null,"格式化代码",-1))]),t("label",ge,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>c.value.preserveComments=s),class:"w-4 h-4 text-blue-600"},null,512),[[F,c.value.preserveComments]]),e[13]||(e[13]=t("span",null,"保留注释",-1))]),t("label",xe,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>c.value.optimizeCode=s),class:"w-4 h-4 text-blue-600"},null,512),[[F,c.value.optimizeCode]]),e[14]||(e[14]=t("span",null,"优化代码",-1))])])]),c.value.formatCode?(o(),n("div",fe,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold mb-3"},"代码格式化选项",-1)),t("div",ye,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"缩进风格",-1)),x(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>m.value.indentStyle=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[16]||(e[16]=[t("option",{value:"spaces"},"空格",-1),t("option",{value:"tabs"},"制表符",-1)])],512),[[U,m.value.indentStyle]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"缩进大小",-1)),x(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>m.value.indentSize=s),type:"number",min:"1",max:"8",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Y,m.value.indentSize,void 0,{number:!0}]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"换行风格",-1)),x(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>m.value.lineEnding=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[t("option",{value:"lf"},"LF (Unix)",-1),t("option",{value:"crlf"},"CRLF (Windows)",-1),t("option",{value:"cr"},"CR (Mac)",-1)])],512),[[U,m.value.lineEnding]])])])])):b("",!0)])):b("",!0),t("div",he,[t("button",{onClick:N,disabled:!p.value.length||!u.value||w.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[w.value?(o(),n("span",Ce,[e[22]||(e[22]=t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),q(" 处理中... "+i(y.value)+"% ",1)])):(o(),n("span",we,"开始转换"))],8,ke),t("button",{onClick:L,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),w.value?(o(),n("div",_e,[t("div",Se,[e[23]||(e[23]=t("h4",{class:"font-semibold text-blue-800"},"转换进度",-1)),t("span",je,i(y.value)+"%",1)]),t("div",Fe,[t("div",{class:"bg-blue-600 h-2.5 rounded-full",style:K({width:y.value+"%"})},null,4)]),t("p",Me,i(h.value),1)])):b("",!0),C.value?(o(),n("div",ze,[e[24]||(e[24]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"转换成功")],-1)),t("p",Ve,i(_.value),1),t("div",Be,[(o(!0),n(S,null,j(g.value,(s,a)=>(o(),n("a",{key:a,href:s.url,download:s.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载转换结果 "+i(a+1),9,Le))),128))])])):b("",!0),d.value?(o(),n("div",Te,[e[25]||(e[25]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"转换失败")],-1)),t("p",Ue,i(d.value),1),f.value?(o(),n("p",Ee,"建议："+i(f.value),1)):b("",!0)])):b("",!0)])]),_:1}))}};export{Ie as default};
