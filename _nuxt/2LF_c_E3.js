import{i as B,w as M,o as i,a as l,b as j,j as u,v as F,c as d,k as w,y,t as k,d as L,f as P,l as o,m as z}from"./-R7zUpUx.js";import{_ as R}from"./1SagYtif.js";import{G as E}from"./zseaTYbb.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const N={class:"space-y-6"},T={class:"bg-gray-50 p-4 rounded-lg"},$={class:"flex space-x-4"},G={class:"flex items-center space-x-2 cursor-pointer"},O={class:"flex items-center space-x-2 cursor-pointer"},S={key:0,class:"space-y-4"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"flex items-center space-x-2"},q={class:"flex items-center space-x-2"},I={class:"flex items-center space-x-2"},J={class:"flex items-center space-x-2"},K={key:1,class:"space-y-4"},Q={class:"flex space-x-4"},W=["disabled"],X={key:0},Y={key:1,class:"flex items-center justify-center"},Z={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-4"},_={class:"mt-2 text-green-700"},ee={key:3,class:"bg-red-50 border border-red-200 rounded-lg p-4"},le={class:"mt-2 text-red-700"},ie={__name:"security",setup(se){const t=o("encrypt"),p=o(""),c=o(""),n=o({print:!0,copy:!0,modify:!1,annotate:!1}),v=o(""),b=o([]),m=z(()=>b.value[0]||null),f=o(!1),x=o(!1),g=o(""),a=o(""),D=["1. 选择操作类型：加密PDF或解密PDF","2. 加密操作：设置打开密码、权限密码和权限选项","3. 解密操作：输入PDF文件的密码",'4. 点击"选择文件"按钮上传PDF文件','5. 点击"开始加密"或"开始解密"按钮进行处理',"6. 处理完成后，系统会自动下载处理后的PDF文件"],V=r=>{},h=r=>{a.value=r},U=async()=>{if(!m.value){a.value="请选择PDF文件";return}if(t.value==="encrypt"){if(!p.value&&!c.value){a.value="请至少设置一个密码";return}}else if(!v.value){a.value="请输入PDF密码";return}f.value=!0,a.value="",x.value=!1;try{await new Promise(r=>setTimeout(r,2e3)),g.value=t.value==="encrypt"?"PDF文件加密成功！已为文件设置密码保护。":"PDF文件解密成功！已移除密码保护。",x.value=!0,setTimeout(()=>{const r=new Blob(["模拟PDF文件内容"],{type:"application/pdf"}),e=URL.createObjectURL(r),s=document.createElement("a");s.href=e,s.download=t.value==="encrypt"?`encrypted_${m.value.name}`:`decrypted_${m.value.name}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)},1e3)}catch(r){a.value=`操作失败：${r.message||"未知错误"}`}finally{f.value=!1}},C=()=>{t.value="encrypt",p.value="",c.value="",n.value={print:!0,copy:!0,modify:!1,annotate:!1},v.value="",removeFile(),a.value="",x.value=!1,g.value=""};return(r,e)=>(i(),B(R,{title:"PDF加密/解密",description:"为PDF文件设置密码保护或移除密码",tips:D},{default:M(()=>[l("div",N,[j(E,{multiple:!1,accept:".pdf","max-size":100*1024*1024,modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),onFilesChanged:V,onError:h},null,8,["modelValue"]),l("div",T,[e[12]||(e[12]=l("h3",{class:"text-lg font-semibold mb-4"},"功能选择",-1)),l("div",$,[l("label",G,[u(l("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>t.value=s),value:"encrypt",class:"w-4 h-4 text-blue-600"},null,512),[[F,t.value]]),e[10]||(e[10]=l("span",null,"加密PDF",-1))]),l("label",O,[u(l("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=s=>t.value=s),value:"decrypt",class:"w-4 h-4 text-blue-600"},null,512),[[F,t.value]]),e[11]||(e[11]=l("span",null,"解密PDF",-1))])])]),t.value==="encrypt"?(i(),d("div",S,[l("div",null,[e[13]||(e[13]=l("h3",{class:"text-lg font-semibold mb-2"},"打开密码",-1)),u(l("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),type:"password",placeholder:"设置PDF打开密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,p.value]]),e[14]||(e[14]=l("p",{class:"text-sm text-gray-500 mt-1"},"设置后，打开PDF需要输入此密码",-1))]),l("div",null,[e[15]||(e[15]=l("h3",{class:"text-lg font-semibold mb-2"},"权限密码",-1)),u(l("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>c.value=s),type:"password",placeholder:"设置PDF权限密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,c.value]]),e[16]||(e[16]=l("p",{class:"text-sm text-gray-500 mt-1"},"设置后，修改PDF权限需要输入此密码",-1))]),l("div",null,[e[21]||(e[21]=l("h3",{class:"text-lg font-semibold mb-2"},"权限设置",-1)),l("div",A,[l("label",H,[u(l("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>n.value.print=s),class:"w-4 h-4 text-blue-600"},null,512),[[y,n.value.print]]),e[17]||(e[17]=l("span",null,"允许打印",-1))]),l("label",q,[u(l("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>n.value.copy=s),class:"w-4 h-4 text-blue-600"},null,512),[[y,n.value.copy]]),e[18]||(e[18]=l("span",null,"允许复制内容",-1))]),l("label",I,[u(l("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>n.value.modify=s),class:"w-4 h-4 text-blue-600"},null,512),[[y,n.value.modify]]),e[19]||(e[19]=l("span",null,"允许修改",-1))]),l("label",J,[u(l("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=s=>n.value.annotate=s),class:"w-4 h-4 text-blue-600"},null,512),[[y,n.value.annotate]]),e[20]||(e[20]=l("span",null,"允许添加注释",-1))])])])])):(i(),d("div",K,[l("div",null,[e[22]||(e[22]=l("h3",{class:"text-lg font-semibold mb-2"},"PDF密码",-1)),u(l("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>v.value=s),type:"password",placeholder:"输入PDF密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,v.value]]),e[23]||(e[23]=l("p",{class:"text-sm text-gray-500 mt-1"},"输入PDF的打开密码或权限密码",-1))])])),l("div",Q,[l("button",{onClick:U,disabled:!m.value||f.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[f.value?(i(),d("span",Y,[...e[24]||(e[24]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),L(" 处理中... ",-1)])])):(i(),d("span",X,"开始"+k(t.value==="encrypt"?"加密":"解密"),1))],8,W),l("button",{onClick:C,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),x.value?(i(),d("div",Z,[e[25]||(e[25]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),l("h4",{class:"font-semibold text-green-800"},"操作成功")],-1)),l("p",_,k(g.value),1)])):P("",!0),a.value?(i(),d("div",ee,[e[26]||(e[26]=l("div",{class:"flex items-center"},[l("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),l("h4",{class:"font-semibold text-red-800"},"操作失败")],-1)),l("p",le,k(a.value),1)])):P("",!0)])]),_:1}))}};export{ie as default};
