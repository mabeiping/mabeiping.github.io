const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CksKCXqW.js","./Dh5_xY7C.js"])))=>i.map(i=>d[i]);
import{j as I,w as N,o as d,a as t,c as p,t as y,l as f,q as D,y as U,s as z,d as L,b as $,r,_ as T}from"./5KiIeb3O.js";import{_ as O}from"./D50zL9At.js";import{P as q}from"./BvpkkP1O.js";import{_ as H}from"./DlAUqK2U.js";import"./drxn0VFK.js";import"./7YFkQcuL.js";import"./BrGRrvQ4.js";import"./bvqDPNRK.js";const G={class:"space-y-6"},J={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"},K={class:"flex flex-col items-center justify-center"},Q={key:0,class:"mt-4"},W={class:"flex items-center justify-between bg-gray-100 p-3 rounded"},X={class:"flex items-center space-x-3"},Y={class:"text-sm font-medium"},Z={class:"bg-white p-4 rounded-lg shadow"},ee={class:"space-y-3"},te={class:"flex space-x-4"},le={class:"flex-1"},se={key:0,class:"flex-1"},oe={key:0,class:"mt-6"},ae=["disabled"],ne={key:0,class:"mr-2 animate-spin"},re={key:1,class:"mt-4"},ie={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},ue={class:"space-y-2 text-sm text-green-700"},de={key:0},ce={__name:"split",setup(ve){let w=null;const M=async()=>(w||(w=(await T(async()=>{const{default:s}=await import("./CksKCXqW.js");return{default:s}},__vite__mapDeps([0,1]),import.meta.url)).default),w),i=r([]),k=r(null),u=r("range"),m=r(""),c=r(!1),g=r(0),C=r(null),b=r(null),_=r(0),x=r(0),S=s=>new Promise(e=>{const o=new FileReader;o.onload=h=>{const P=h.target.result,l=new Uint8Array(P);let v=0;for(let a=0;a<l.length-100;a++)if(l[a]===47&&l[a+1]===67&&l[a+2]===111&&l[a+3]===117&&l[a+4]===110&&l[a+5]===116){let n=a+6;for(;n<l.length&&(l[n]<48||l[n]>57);)n++;let F="";for(;n<l.length&&l[n]>=48&&l[n]<=57;)F+=String.fromCharCode(l[n]),n++;if(F){v=parseInt(F);break}}e(v)},o.onerror=()=>{e(0)},o.readAsArrayBuffer(s)}),R=async s=>{const e=s.target.files[0];if(e){i.value=[e];const o=await S(e);x.value=o}else i.value=[],x.value=0},V=()=>{i.value=[],x.value=0,k.value&&(k.value.value="")},j=()=>{console.log("处理开始")},B=s=>{console.log("处理结束:",s)},A=async()=>{if(i.value.length!==0){c.value=!0,g.value=0,C.value=null,b.value=null,_.value=0,j();try{const s=await M();g.value=30;const e=await s.pdfSplit({file:i.value[0],splitMode:u.value,pageRange:m.value});g.value=100,setTimeout(()=>{c.value=!1;const o=e,h=URL.createObjectURL(o);if(b.value=h,u.value==="range"){const P=m.value.split(/[,，\s]+/).filter(v=>v.trim()!=="");let l=0;P.forEach(v=>{if(v.includes("-")){const[a,n]=v.split("-").map(Number);l+=n-a+1}else l+=1}),_.value=1}else _.value=x.value||0;E(),B({success:!0,url:h,fileCount:_.value})},500)}catch(s){c.value=!1,C.value=s.message,B({success:!1,error:s.message})}}},E=()=>{if(!b.value)return;const s=u.value==="range"?`split_${m.value}.pdf`:"split_each.zip",e=document.createElement("a");e.href=b.value,e.download=s,document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(s,e)=>(d(),I(O,{title:"PDF拆分",description:"将PDF文件按页面范围或每页单独拆分","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择拆分方式：","   • 指定页面范围：输入要拆分的页面范围（例如：1-3,5-7）","   • 每页单独拆分：将PDF的每一页拆分为单独的文件","4. 页面范围输入说明：","   • 支持单个页码：如 '5'","   • 支持页码范围：如 '1-3'","   • 支持多个范围：如 '1-3,5-7'","   • 支持中英文逗号和空格作为分隔符","5. 点击'开始拆分'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看拆分结果信息，包括成功拆分的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:N(()=>[t("div",G,[t("div",J,[t("div",K,[e[3]||(e[3]=t("svg",{class:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e[4]||(e[4]=t("h3",{class:"text-lg font-medium mb-2"},"选择PDF文件",-1)),e[5]||(e[5]=t("p",{class:"text-gray-500 mb-4"},"支持单个PDF文件，最大100MB",-1)),t("input",{type:"file",ref_key:"fileInput",ref:k,onChange:R,accept:".pdf",class:"hidden"},null,544),t("button",{onClick:e[0]||(e[0]=o=>s.$refs.fileInput.click()),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 选择文件 ")]),i.value.length>0?(d(),p("div",Q,[t("div",W,[t("div",X,[e[6]||(e[6]=t("svg",{class:"w-6 h-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zM2 12a1 1 0 110-2 1 1 0 010 2zm14 0a1 1 0 110-2 1 1 0 010 2z","clip-rule":"evenodd"})],-1)),t("span",Y,y(i.value[0].name),1)]),t("button",{onClick:V,class:"text-red-500 hover:text-red-700 text-sm"}," 移除 ")])])):f("",!0)]),t("div",Z,[e[10]||(e[10]=t("h3",{class:"font-semibold mb-3"},"拆分设置",-1)),t("div",ee,[t("div",te,[t("div",le,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分方式",-1)),D(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[7]||(e[7]=[t("option",{value:"range"},"指定页面范围",-1),t("option",{value:"each"},"每页单独拆分",-1)])],512),[[U,u.value]])]),u.value==="range"?(d(),p("div",se,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面范围 (例如: 1-3,5-7)",-1)),D(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入页面范围"},null,512),[[z,m.value]])])):f("",!0)])])]),i.value.length>0?(d(),p("div",oe,[t("button",{onClick:A,disabled:c.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[c.value?(d(),p("span",ne,"⏳")):f("",!0),L(" "+y(c.value?"处理中...":"开始拆分"),1)],8,ae)])):f("",!0),c.value?(d(),p("div",re,[$(q,{progress:g.value,label:`处理进度: ${g.value}%`,error:C.value},null,8,["progress","label","error"])])):f("",!0),b.value?(d(),p("div",ie,[e[12]||(e[12]=t("h3",{class:"font-semibold text-green-700 mb-2"},"拆分成功",-1)),t("div",ue,[t("p",null,"成功拆分："+y(_.value)+" 个文件",1),t("p",null,"拆分方式："+y(u.value==="range"?"指定页面范围":"每页单独拆分"),1),u.value==="range"?(d(),p("p",de,"页面范围："+y(m.value),1)):f("",!0),e[11]||(e[11]=t("p",null,"文件已自动开始下载",-1))])])):f("",!0)])]),_:1}))}},he=H(ce,[["__scopeId","data-v-963891b3"]]);export{he as default};
