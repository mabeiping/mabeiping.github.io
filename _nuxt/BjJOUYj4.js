import{n as e,p as l,x as a,D as s,F as t,u as o,z as r,a8 as n,J as u,K as d,H as i,L as c,l as p,k as v,m as b,E as m,I as g}from"./DwDdtX2U.js";import{s as y}from"./Ta3x3s_8.js";import{_ as x}from"./DwL8tNwU.js";import"./DFiMgQNB.js";const f={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},h={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},w=["accept"],k={key:0,class:"mt-4 p-3 bg-gray-50 rounded"},z={class:"font-medium"},C={class:"text-gray-500 ml-2"},P={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},I=["value"],R={class:"group"},U={class:"mt-3 p-4 border rounded-lg"},Z={class:"space-y-3"},_={class:"flex items-center"},j={key:0},B={class:"flex items-center"},L={key:1},M=["disabled"],V={key:0,class:"mt-6"},A={class:"w-full bg-gray-200 rounded-full h-2.5"},F={class:"text-center mt-2 text-gray-600"},$={key:1,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},K={class:"text-green-600 mb-4"},S=["href"],T={key:2,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},D={class:"text-red-600"},E=x({__name:"index",setup(x){const E=v(null),G=v(null),H=v("zip"),J=v(!1),N=v(0),q=v(null),O=v(null),Q=v({enableCompression:!0,compressionLevel:"normal",includePassword:!1,password:""}),W=p(()=>".zip,.rar,.7z,.tar,.gz"),X=[{value:"zip",label:"ZIP",description:"最通用的压缩格式"},{value:"rar",label:"RAR",description:"高压缩率格式"},{value:"7z",label:"7Z",description:"极高压缩率格式"},{value:"tar",label:"TAR",description:"归档格式"}],Y=e=>{const l=e.target.files[0];l&&(G.value=l,O.value=null)},ee=()=>{G.value=null,E.value.value=""},le=e=>{if(0===e)return"0 Bytes";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB"][l]},ae=e=>{const l=X.find(l=>l.value===e);return l?l.label:e},se=async()=>{if(G.value){J.value=!0,N.value=0,O.value=null;try{await new Promise(e=>{const l=y(()=>{N.value+=5,N.value>=100&&(clearInterval(l),setTimeout(e,500))},200)}),q.value={downloadUrl:"#",fileName:G.value.name.replace(/\.[^/.]+$/,`.${H.value}`),fileSize:G.value.size}}catch(e){O.value="转换失败，请重试"}finally{J.value=!1}}else O.value="请选择要转换的文件"},te=()=>{G.value=null,E.value.value="",H.value="zip",q.value=null,N.value=0,O.value=null,Q.value={enableCompression:!0,compressionLevel:"normal",includePassword:!1,password:""}};return(p,v)=>(b(),e("div",f,[v[16]||(v[16]=l("h1",{class:"text-2xl font-bold mb-6 text-center"},"压缩包格式转换",-1)),v[17]||(v[17]=l("div",{class:"mb-8"},[l("p",{class:"text-gray-600 mb-4"},"支持ZIP/RAR/7Z等压缩格式互转，操作简单快捷")],-1)),l("form",{onSubmit:i(se,["prevent"]),class:"space-y-6"},[l("div",h,[l("input",{type:"file",ref_key:"fileInput",ref:E,class:"hidden",accept:W.value,onChange:Y},null,40,w),l("button",{type:"button",onClick:v[0]||(v[0]=e=>p.$refs.fileInput.click()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"}," 选择文件 "),v[7]||(v[7]=l("p",{class:"text-gray-500 mt-2"},"支持 ZIP、RAR、7Z 等格式",-1)),G.value?(b(),e("div",k,[l("span",z,a(G.value.name),1),l("span",C,"("+a(le(G.value.size))+")",1),l("button",{type:"button",onClick:ee,class:"ml-2 text-red-500 hover:text-red-700"}," 移除 ")])):s("",!0)]),l("div",null,[v[8]||(v[8]=l("label",{class:"block text-gray-700 font-medium mb-2"},"转换为",-1)),l("div",P,[(b(),e(t,null,o(X,e=>l("label",{key:e.value,class:m(["flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500 transition duration-200",{"border-blue-500 bg-blue-50":H.value===e.value}])},[r(l("input",{type:"radio",value:e.value,"onUpdate:modelValue":v[1]||(v[1]=e=>H.value=e),class:"mr-2"},null,8,I),[[g,H.value]]),l("span",null,a(e.label),1)],2)),64))])]),l("div",null,[l("details",R,[v[14]||(v[14]=l("summary",{class:"cursor-pointer list-none flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[l("span",{class:"font-medium"},"高级选项"),l("span",{class:"transition-transform duration-300 group-open:rotate-180"},"▼")],-1)),l("div",U,[l("div",Z,[l("label",_,[r(l("input",{type:"checkbox","onUpdate:modelValue":v[2]||(v[2]=e=>Q.value.enableCompression=e),class:"mr-2"},null,512),[[n,Q.value.enableCompression]]),v[9]||(v[9]=l("span",null,"启用压缩",-1))]),Q.value.enableCompression?(b(),e("div",j,[v[11]||(v[11]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"压缩级别",-1)),r(l("select",{"onUpdate:modelValue":v[3]||(v[3]=e=>Q.value.compressionLevel=e),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...v[10]||(v[10]=[l("option",{value:"store"},"无压缩",-1),l("option",{value:"fast"},"快速压缩",-1),l("option",{value:"normal"},"标准压缩",-1),l("option",{value:"maximum"},"最大压缩",-1)])],512),[[u,Q.value.compressionLevel]])])):s("",!0),l("label",B,[r(l("input",{type:"checkbox","onUpdate:modelValue":v[4]||(v[4]=e=>Q.value.includePassword=e),class:"mr-2"},null,512),[[n,Q.value.includePassword]]),v[12]||(v[12]=l("span",null,"添加密码保护",-1))]),Q.value.includePassword?(b(),e("div",L,[v[13]||(v[13]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"密码",-1)),r(l("input",{"onUpdate:modelValue":v[5]||(v[5]=e=>Q.value.password=e),type:"password",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"请输入密码"},null,512),[[d,Q.value.password]])])):s("",!0)])])])]),l("button",{type:"submit",disabled:!G.value||J.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},a(J.value?"转换中...":"开始转换"),9,M)],32),J.value?(b(),e("div",V,[l("div",A,[l("div",{class:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:c({width:N.value+"%"})},null,4)]),l("p",F,a(N.value)+"%",1)])):s("",!0),q.value?(b(),e("div",$,[v[15]||(v[15]=l("h3",{class:"font-semibold text-green-700 mb-2"},"转换成功",-1)),l("p",K,"文件已成功转换为 "+a(ae(H.value))+" 格式",1),l("a",{href:q.value.downloadUrl,class:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300",download:""}," 下载文件 ",8,S),l("button",{onClick:te,class:"ml-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-300"}," 再次转换 ")])):s("",!0),O.value?(b(),e("div",T,[l("p",D,a(O.value),1),l("button",{onClick:v[6]||(v[6]=e=>O.value=null),class:"mt-2 text-red-600 hover:text-red-800 text-sm"}," 关闭 ")])):s("",!0)]))}},[["__scopeId","data-v-0ddb270c"]]);export{E as default};
