import{h as H,w as N,o as l,a as t,c as a,i as p,k as m,j as c,v as x,D as O,A as F,x as k,p as _,t as i,F as E,r as J}from"./vIjrQGDC.js";import{_ as Z}from"./CQUG57wd.js";import"./CA1_4N2w.js";import"./CQENOYst.js";const q={class:"space-y-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I={class:"space-y-4"},Q={class:"relative"},K=["type"],W={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y={key:0,class:"mt-2"},ee={class:"flex items-center gap-2"},te={class:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},se=["disabled"],oe={class:"space-y-4"},re={class:"flex items-center justify-between"},le={class:"text-lg font-semibold text-text-primary"},ne={class:"flex gap-2"},ae={class:"space-y-2 max-h-[500px] overflow-y-auto"},ie={class:"flex items-start justify-between mb-2"},ue={class:"flex-1"},de={class:"font-semibold text-text-primary"},ce={class:"text-sm text-text-secondary"},ve={class:"flex gap-1"},me=["onClick"],pe=["onClick"],xe=["onClick"],ge={key:0,class:"text-sm text-text-secondary mb-2"},fe=["href"],be={key:1,class:"text-sm text-text-secondary"},ye={class:"mt-2 text-xs text-text-secondary"},he={key:0,class:"text-center py-8 text-text-secondary"},Le={__name:"password-manager",setup(we){const r=c({name:"",username:"",password:"",url:"",notes:""}),n=c([]),g=c(""),f=c(!1),b=c(!1),y=c(""),C=c("success"),j=k(()=>r.value.name&&r.value.username&&r.value.password),L=k(()=>{if(!g.value)return n.value;const s=g.value.toLowerCase();return n.value.filter(e=>e.name.toLowerCase().includes(s)||e.username.toLowerCase().includes(s)||e.url?.toLowerCase().includes(s))}),h=k(()=>{const s=r.value.password;if(!s)return 0;let e=0;return s.length>=8&&(e+=25),s.length>=12&&(e+=15),/[a-z]/.test(s)&&(e+=15),/[A-Z]/.test(s)&&(e+=15),/[0-9]/.test(s)&&(e+=15),/[^a-zA-Z0-9]/.test(s)&&(e+=15),Math.min(e,100)}),M=s=>s<30?"bg-red-500 text-red-500":s<60?"bg-yellow-500 text-yellow-500":s<80?"bg-blue-500 text-blue-500":"bg-green-500 text-green-500",B=s=>s<30?"弱":s<60?"中等":s<80?"强":"非常强",S=()=>{j.value&&(b.value=!0,setTimeout(()=>{n.value.push({id:Date.now(),...r.value,createdAt:new Date().toISOString()}),r.value={name:"",username:"",password:"",url:"",notes:""},b.value=!1,d("密码添加成功","success")},500))},A=s=>{r.value={name:s.name,username:s.username,password:s.password,url:s.url,notes:s.notes},z(s.id),d("密码已加载到编辑表单","success")},z=s=>{n.value=n.value.filter(e=>e.id!==s),d("密码已删除","success")},D=s=>{navigator.clipboard.writeText(s).then(()=>{d("密码已复制到剪贴板","success")}).catch(()=>{d("复制失败","error")})},U=s=>{if(n.value.length===0){d("没有可导出的密码","error");return}let e,o,v;if(s==="json")e=JSON.stringify(n.value,null,2),o="passwords.json",v="application/json";else{const R=["名称","用户名","密码","URL","备注","创建时间"],T=n.value.map(u=>[u.name,u.username,u.password,u.url||"",u.notes||"",u.createdAt]);e=[R,...T].map(u=>u.join(",")).join(`
`),o="passwords.csv",v="text/csv"}const P=new Blob([e],{type:v}),V=URL.createObjectURL(P),w=document.createElement("a");w.href=V,w.download=o,w.click(),URL.revokeObjectURL(V),d(`已导出为 ${s.toUpperCase()}`,"success")},$=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),d=(s,e)=>{y.value=s,C.value=e,setTimeout(()=>{y.value=""},3e3)};return(s,e)=>(l(),H(Z,{title:"密码管理器",description:"安全地存储和管理您的密码"},{default:N(()=>[t("div",q,[t("div",G,[t("div",I,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-text-primary"},"添加密码",-1)),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"网站/应用名称 *",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.name=o),type:"text",placeholder:"例如：Google",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[x,r.value.name]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"用户名/邮箱 *",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.username=o),type:"text",placeholder:"your@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[x,r.value.username]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"密码 *",-1)),t("div",Q,[m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.password=o),type:f.value?"text":"password",placeholder:"输入密码",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,8,K),[[O,r.value.password]]),t("button",{onClick:e[3]||(e[3]=o=>f.value=!f.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-text-secondary hover:text-primary"},[f.value?(l(),a("svg",W,[...e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(l(),a("svg",X,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),r.value.password?(l(),a("div",Y,[t("div",ee,[t("div",te,[t("div",{class:_(["h-full transition-all duration-300",M(h.value)]),style:F({width:`${h.value}%`})},null,6)]),t("span",{class:_(["text-sm font-medium",M(h.value)])},i(B(h.value)),3)])])):p("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"URL",-1)),m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.url=o),type:"url",placeholder:"https://example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[x,r.value.url]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"备注",-1)),m(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.notes=o),rows:"2",placeholder:"添加备注信息...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-none"},null,512),[[x,r.value.notes]])]),t("button",{onClick:S,disabled:!j.value||b.value,class:"w-full py-2 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},i(b.value?"处理中...":"添加密码"),9,se)]),t("div",oe,[t("div",re,[t("h3",le,"密码库 ("+i(n.value.length)+")",1),t("div",ne,[t("button",{onClick:e[6]||(e[6]=o=>U("json")),class:"px-3 py-1.5 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors"}," 导出JSON "),t("button",{onClick:e[7]||(e[7]=o=>U("csv")),class:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors"}," 导出CSV ")])]),t("div",null,[m(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>g.value=o),type:"text",placeholder:"搜索密码...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[x,g.value]])]),t("div",ae,[(l(!0),a(E,null,J(L.value,o=>(l(),a("div",{key:o.id,class:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-primary transition-colors"},[t("div",ie,[t("div",ue,[t("h4",de,i(o.name),1),t("p",ce,i(o.username),1)]),t("div",ve,[t("button",{onClick:v=>D(o.password),class:"p-1.5 text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"复制密码"},[...e[17]||(e[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,me),t("button",{onClick:v=>A(o),class:"p-1.5 text-yellow-500 hover:bg-yellow-50 rounded transition-colors",title:"编辑"},[...e[18]||(e[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,pe),t("button",{onClick:v=>z(o.id),class:"p-1.5 text-red-500 hover:bg-red-50 rounded transition-colors",title:"删除"},[...e[19]||(e[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,xe)])]),o.url?(l(),a("div",ge,[t("a",{href:o.url,target:"_blank",class:"text-primary hover:underline"},i(o.url),9,fe)])):p("",!0),o.notes?(l(),a("div",be,i(o.notes),1)):p("",!0),t("div",ye," 创建于: "+i($(o.createdAt)),1)]))),128)),L.value.length===0?(l(),a("div",he,[...e[20]||(e[20]=[t("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("p",null,"暂无密码记录",-1)])])):p("",!0)])])]),y.value?(l(),a("div",{key:0,class:_(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",C.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},i(y.value),3)):p("",!0)])]),_:1}))}};export{Le as default};
