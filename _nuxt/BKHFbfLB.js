import{_ as N,r as u,c as a,a as e,m as f,y as C,t as c,F as _,l as b,n as v,v as O,d as F,z as B,o as i,p as x,B as X}from"./CXV6dDrr.js";const E={class:"ebook-converter-page"},S={class:"converter-container"},$={class:"upload-section"},A={key:0,class:"file-list"},L={class:"file-items"},R={class:"file-name"},q={class:"file-size"},G=["onClick"],K={class:"options-section"},j={class:"option-group"},H={class:"format-options"},J=["value"],Q={class:"format-icon"},W={class:"format-name"},Y={class:"option-group"},Z={class:"option-group"},ee={class:"option-label"},se={class:"option-group"},le={class:"option-label"},oe={class:"action-section"},te=["disabled"],ne={key:0},ae={key:1},ie=["disabled"],ue={key:0,class:"results-section"},ce={class:"result-items"},de={class:"result-icon"},re={class:"result-name"},pe=["onClick"],ve={__name:"ebook-converter",setup(me){const k=u(null),t=u([]),d=u("pdf"),g=u("medium"),h=u(!0),y=u(!0),r=u(!1),p=u([]),M=[{value:"pdf",name:"PDF",icon:"📕"},{value:"epub",name:"EPUB",icon:"📖"},{value:"mobi",name:"MOBI",icon:"📱"},{value:"txt",name:"TXT",icon:"📝"},{value:"docx",name:"DOCX",icon:"📘"}],D=()=>{k.value.click()},w=o=>{const s=Array.from(o.target.files);t.value=[...t.value,...s]},T=o=>{const l=Array.from(o.dataTransfer.files).filter(n=>{const m=n.name.split(".").pop().toLowerCase();return["epub","pdf","mobi","txt","docx"].includes(m)});t.value=[...t.value,...l]},I=o=>{t.value.splice(o,1)},U=o=>{if(o===0)return"0 B";const s=1024,l=["B","KB","MB","GB"],n=Math.floor(Math.log(o)/Math.log(s));return Math.round(o/Math.pow(s,n)*100)/100+" "+l[n]},P=async()=>{if(t.value.length!==0){r.value=!0,p.value=[];for(const o of t.value){await new Promise(l=>setTimeout(l,1e3));const s=Math.random()>.2;p.value.push({fileName:o.name,success:s,message:s?`转换成功 (${d.value.toUpperCase()})`:"转换失败，请重试",file:s?o:null})}r.value=!1}},V=o=>{const s=document.createElement("a");s.href="#",s.download=o.fileName.replace(/\.[^/.]+$/,"")+"."+d.value,s.click()},z=()=>{t.value=[],p.value=[]};return(o,s)=>(i(),a("div",E,[s[15]||(s[15]=e("h1",{class:"page-title"},"电子书格式转换工具",-1)),e("div",S,[e("div",$,[e("div",{class:"upload-area",onClick:D,onDragover:s[0]||(s[0]=C(()=>{},["prevent"])),onDrop:C(T,["prevent"])},[s[5]||(s[5]=e("div",{class:"upload-icon"},"📚",-1)),s[6]||(s[6]=e("div",{class:"upload-text"},[e("p",null,"拖拽文件到此处或点击上传"),e("p",{class:"upload-hint"},"支持 EPUB, PDF, MOBI, TXT, DOCX 格式")],-1)),e("input",{type:"file",ref_key:"fileInput",ref:k,onChange:w,accept:".epub,.pdf,.mobi,.txt,.docx",multiple:"",style:{display:"none"}},null,544)],32),t.value.length>0?(i(),a("div",A,[e("h3",null,"已选择文件 ("+c(t.value.length)+")",1),e("div",L,[(i(!0),a(_,null,b(t.value,(l,n)=>(i(),a("div",{key:n,class:"file-item"},[s[7]||(s[7]=e("span",{class:"file-icon"},"📄",-1)),e("span",R,c(l.name),1),e("span",q,c(U(l.size)),1),e("button",{class:"remove-button",onClick:m=>I(n)},"✕",8,G)]))),128))])])):f("",!0)]),e("div",K,[s[13]||(s[13]=e("h3",null,"转换选项",-1)),e("div",j,[s[8]||(s[8]=e("label",{class:"option-label"},"目标格式",-1)),e("div",H,[(i(),a(_,null,b(M,l=>e("label",{key:l.value,class:x(["format-option",{active:d.value===l.value}])},[v(e("input",{type:"radio","onUpdate:modelValue":s[1]||(s[1]=n=>d.value=n),value:l.value,name:"outputFormat"},null,8,J),[[X,d.value]]),e("span",Q,c(l.icon),1),e("span",W,c(l.name),1)],2)),64))])]),e("div",Y,[s[10]||(s[10]=e("label",{class:"option-label"},"输出质量",-1)),v(e("select",{class:"option-select","onUpdate:modelValue":s[2]||(s[2]=l=>g.value=l)},[...s[9]||(s[9]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"标准质量",-1),e("option",{value:"low"},"低质量（文件更小）",-1)])],512),[[O,g.value]])]),e("div",Z,[e("label",ee,[v(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=l=>h.value=l)},null,512),[[B,h.value]]),s[11]||(s[11]=F(" 保留图片 ",-1))])]),e("div",se,[e("label",le,[v(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=l=>y.value=l)},null,512),[[B,y.value]]),s[12]||(s[12]=F(" 保留格式 ",-1))])])]),e("div",oe,[e("button",{class:"convert-button",onClick:P,disabled:t.value.length===0||r.value},[r.value?(i(),a("span",ae,"⏳ 转换中...")):(i(),a("span",ne,"🔄 开始转换"))],8,te),e("button",{class:"clear-button",onClick:z,disabled:r.value}," 🗑️ 清空 ",8,ie)]),p.value.length>0?(i(),a("div",ue,[s[14]||(s[14]=e("h3",null,"转换结果",-1)),e("div",ce,[(i(!0),a(_,null,b(p.value,(l,n)=>(i(),a("div",{key:n,class:"result-item"},[e("span",de,c(l.success?"✅":"❌"),1),e("span",re,c(l.fileName),1),e("span",{class:x(["result-status",l.success?"success":"error"])},c(l.message),3),l.success?(i(),a("button",{key:0,class:"download-button",onClick:m=>V(l)}," ⬇️ 下载 ",8,pe)):f("",!0)]))),128))])])):f("",!0)]),s[16]||(s[16]=e("div",{class:"info-section"},[e("h2",null,"功能说明"),e("p",null,"这是一个功能强大的电子书格式转换工具，支持多种格式之间的相互转换。"),e("ul",null,[e("li",null,"支持 EPUB, PDF, MOBI, TXT, DOCX 等常见电子书格式"),e("li",null,"批量转换，一次处理多个文件"),e("li",null,"支持拖拽上传，操作简便"),e("li",null,"可自定义输出质量和格式保留选项"),e("li",null,"转换速度快，保持原文档结构")])],-1))]))}},_e=N(ve,[["__scopeId","data-v-82acc47b"]]);export{_e as default};
