import{i as _,w as j,o as d,a as e,b as L,j as r,v as M,k as R,t as m,y as w,c as v,d as S,f as V,l as n,m as $}from"./-R7zUpUx.js";import{_ as E}from"./1SagYtif.js";import{G as N}from"./zseaTYbb.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const T={class:"space-y-6"},G={class:"bg-gray-50 p-4 rounded-lg"},O={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},A={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},H={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},K={class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},Q={class:"space-y-4"},q={class:"flex justify-between text-sm text-gray-500 mt-1"},I={class:"space-y-2"},J={class:"flex items-center space-x-2"},W={class:"flex items-center space-x-2"},X={class:"flex items-center space-x-2"},Y={class:"flex items-center space-x-2"},Z={class:"flex space-x-4"},ee=["disabled"],te={key:0},se={key:1,class:"flex items-center justify-center"},le={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},oe={class:"mt-2 text-green-700"},ae={key:0,class:"mt-1 text-green-700 text-sm"},ne={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},re={class:"mt-2 text-red-700"},ge={__name:"compress",setup(ie){const o=n("medium"),g=n(70),a=n({images:!0,fonts:!0,content:!0,removeMetadata:!0}),h=n([]),x=$(()=>h.value[0]||null),b=n(!1),f=n(!1),k=n(""),i=n(""),u=n(null),U=["1. 选择压缩级别：低压缩、中压缩或高压缩","2. 调整图片质量滑块，设置图片压缩程度","3. 选择需要的压缩选项：压缩图片、优化字体、压缩内容、移除元数据",'4. 点击"选择文件"按钮上传PDF文件','5. 点击"开始压缩"按钮进行处理',"6. 处理完成后，系统会自动下载压缩后的PDF文件"],y=l=>{if(l===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(t));return parseFloat((l/Math.pow(t,p)).toFixed(2))+" "+s[p]},B=l=>{},z=l=>{i.value=l},D=async()=>{if(!x.value){i.value="请选择PDF文件";return}b.value=!0,i.value="",f.value=!1,u.value=null;try{await new Promise(F=>setTimeout(F,2e3));const l=x.value.size,t=o.value==="low"?.8:o.value==="medium"?.6:.4,s=Math.round(l*t),p=Math.round((1-t)*100);u.value={originalSize:l,compressedSize:s,savings:p},k.value=`PDF文件压缩成功！文件大小从 ${y(l)} 减小到 ${y(s)}，节省了 ${p}% 的空间。`,f.value=!0,setTimeout(()=>{const F=new Blob(["模拟压缩后的PDF文件内容"],{type:"application/pdf"}),C=URL.createObjectURL(F),c=document.createElement("a");c.href=C,c.download=`compressed_${x.value.name}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(C)},1e3)}catch(l){i.value=`压缩失败：${l.message||"未知错误"}`}finally{b.value=!1}},P=()=>{o.value="medium",g.value=70,a.value={images:!0,fonts:!0,content:!0,removeMetadata:!0},removeFile(),i.value="",f.value=!1,k.value="",u.value=null};return(l,t)=>(d(),_(E,{title:"PDF压缩",description:"减小PDF文件大小，便于传输和存储",tips:U},{default:j(()=>[e("div",T,[L(N,{multiple:!1,accept:".pdf","max-size":100*1024*1024,modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),onFilesChanged:B,onError:z},null,8,["modelValue"]),e("div",G,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold mb-4"},"压缩级别",-1)),e("div",O,[e("label",A,[r(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=s=>o.value=s),value:"low",class:"w-4 h-4 text-blue-600"},null,512),[[M,o.value]]),t[9]||(t[9]=e("div",null,[e("div",{class:"font-medium"},"低压缩"),e("div",{class:"text-sm text-gray-500"},"文件质量高，压缩效果小")],-1))]),e("label",H,[r(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=s=>o.value=s),value:"medium",class:"w-4 h-4 text-blue-600"},null,512),[[M,o.value]]),t[10]||(t[10]=e("div",null,[e("div",{class:"font-medium"},"中压缩"),e("div",{class:"text-sm text-gray-500"},"平衡质量和压缩效果")],-1))]),e("label",K,[r(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=s=>o.value=s),value:"high",class:"w-4 h-4 text-blue-600"},null,512),[[M,o.value]]),t[11]||(t[11]=e("div",null,[e("div",{class:"font-medium"},"高压缩"),e("div",{class:"text-sm text-gray-500"},"文件质量降低，压缩效果明显")],-1))])])]),e("div",Q,[e("div",null,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold mb-2"},"图片质量",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>g.value=s),type:"range",min:"10",max:"100",step:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[R,g.value]]),e("div",q,[t[13]||(t[13]=e("span",null,"低质量 (10%)",-1)),e("span",null,"当前: "+m(g.value)+"%",1),t[14]||(t[14]=e("span",null,"高质量 (100%)",-1))])]),e("div",null,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold mb-2"},"压缩选项",-1)),e("div",I,[e("label",J,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>a.value.images=s),class:"w-4 h-4 text-blue-600"},null,512),[[w,a.value.images]]),t[16]||(t[16]=e("span",null,"压缩图片",-1))]),e("label",W,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>a.value.fonts=s),class:"w-4 h-4 text-blue-600"},null,512),[[w,a.value.fonts]]),t[17]||(t[17]=e("span",null,"优化字体",-1))]),e("label",X,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>a.value.content=s),class:"w-4 h-4 text-blue-600"},null,512),[[w,a.value.content]]),t[18]||(t[18]=e("span",null,"压缩内容",-1))]),e("label",Y,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>a.value.removeMetadata=s),class:"w-4 h-4 text-blue-600"},null,512),[[w,a.value.removeMetadata]]),t[19]||(t[19]=e("span",null,"移除元数据",-1))])])])]),e("div",Z,[e("button",{onClick:D,disabled:!x.value||b.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[b.value?(d(),v("span",se,[...t[21]||(t[21]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" 处理中... ",-1)])])):(d(),v("span",te,"开始压缩"))],8,ee),e("button",{onClick:P,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),f.value?(d(),v("div",le,[t[22]||(t[22]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h4",{class:"font-semibold text-green-800"},"压缩成功")],-1)),e("p",oe,m(k.value),1),u.value?(d(),v("p",ae," 原始大小: "+m(y(u.value.originalSize))+" → 压缩后: "+m(y(u.value.compressedSize))+" (节省 "+m(u.value.savings)+"%) ",1)):V("",!0)])):V("",!0),i.value?(d(),v("div",ne,[t[23]||(t[23]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("h4",{class:"font-semibold text-red-800"},"压缩失败")],-1)),e("p",re,m(i.value),1)])):V("",!0)])]),_:1}))}};export{ge as default};
