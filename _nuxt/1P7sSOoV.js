import{_ as C}from"./DcxfYlri.js";import{u as V,h as L,w as R,o as v,a as e,c as g,i as b,j as r,f as o,t as x,k as p,l as c,v as w,m as k}from"./Bbp9ol3F.js";import"./DxtqSkkZ.js";import"./CymrFrSx.js";const _={class:"space-y-6"},B={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors"},j={class:"space-y-4"},z={key:0,class:"text-sm text-text-secondary"},E={class:"space-y-4"},N={class:"grid grid-cols-2 gap-4"},S=["disabled"],T={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},q={__name:"encrypt",setup(I){const y=r(null),n=r(null),a=r(""),i=r(""),m=r("128"),f=r("none"),d=r(!1),u=r(null),h=()=>{y.value?.click()},F=l=>{const t=l.target.files[0];t&&t.type==="application/pdf"&&(n.value=t)},D=async()=>{if(!n.value){alert("请先选择PDF文件");return}if(!a.value){alert("请输入密码");return}if(a.value!==i.value){alert("两次输入的密码不一致");return}d.value=!0;try{await new Promise(l=>setTimeout(l,2e3)),u.value={fileName:`encrypted_${n.value.name}`,originalSize:n.value.size}}catch(l){console.error("Encryption error:",l),alert("加密失败，请重试")}finally{d.value=!1}},P=()=>{if(!u.value||!n.value)return;const l=document.createElement("a");l.href=URL.createObjectURL(n.value),l.download=u.value.fileName,l.click(),URL.revokeObjectURL(l.href)};return V({title:"PDF加密 - Office Tools",meta:[{name:"description",content:"为PDF文件添加密码保护"}]}),(l,t)=>{const U=C;return v(),L(U,{title:"PDF加密",description:"为PDF文件添加密码保护"},{default:R(()=>[e("div",_,[e("div",B,[e("input",{ref_key:"fileInput",ref:y,type:"file",accept:".pdf",class:"hidden",onChange:F},null,544),e("div",j,[t[4]||(t[4]=e("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),e("button",{onClick:h,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors"}," 选择PDF文件 "),o(n)?(v(),g("p",z,x(o(n).name),1)):b("",!0)])]),e("div",E,[t[11]||(t[11]=e("h3",{class:"text-lg font-bold text-text-primary"},"加密设置",-1)),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"密码",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c(a)?a.value=s:null),type:"password",placeholder:"请输入密码",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[w,o(a)]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"确认密码",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c(i)?i.value=s:null),type:"password",placeholder:"请再次输入密码",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[w,o(i)]])]),e("div",N,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"加密级别",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>c(m)?m.value=s:null),class:"w-full px-3 py-2 border rounded-lg focus:outline-none"},[...t[7]||(t[7]=[e("option",{value:"128"},"128位（标准）",-1),e("option",{value:"256"},"256位（高安全）",-1)])],512),[[k,o(m)]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-text-primary mb-2"},"权限",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>c(f)?f.value=s:null),class:"w-full px-3 py-2 border rounded-lg focus:outline-none"},[...t[9]||(t[9]=[e("option",{value:"none"},"无限制",-1),e("option",{value:"print"},"允许打印",-1),e("option",{value:"copy"},"允许复制",-1),e("option",{value:"all"},"全部允许",-1)])],512),[[k,o(f)]])])]),e("button",{onClick:D,disabled:o(d)||!o(n),class:"w-full py-3 bg-gradient-to-r from-primary to-primary-light text-white rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},x(o(d)?"加密中...":"开始加密"),9,S)]),o(u)?(v(),g("div",T,[t[12]||(t[12]=e("h3",{class:"font-bold text-green-800 mb-2"},"加密成功！",-1)),e("button",{onClick:P,class:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," 下载加密后的文件 ")])):b("",!0)])]),_:1})}}};export{q as default};
