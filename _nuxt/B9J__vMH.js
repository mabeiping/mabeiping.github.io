import{j as e,w as l,o as a,a as t,c as s,F as o,p as r,q as u,v as n,t as i,b as d,l as c,y as v,C as p,s as m,d as g,B as b,r as f,x}from"./HXycOAlW.js";import{_ as y}from"./D1uvpjsy.js";import{G as h}from"./0iwS8AcL.js";import{s as w}from"./BxyD9DOn.js";import"./CP1Hj45X.js";import"./CPBe7JJp.js";import"./BadZoQ71.js";import"./Dyo0McTI.js";import"./BCo6x5W8.js";const k={class:"space-y-6"},j={class:"bg-gray-50 p-4 rounded-lg"},z={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},U=["value"],B={class:"font-medium"},F={class:"text-sm text-gray-500"},P={key:0,class:"bg-gray-50 p-4 rounded-lg"},C={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},M={class:"flex justify-center mb-3"},V=["src"],L={key:1,class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D={class:"text-center"},$={class:"font-medium truncate"},S={class:"text-sm text-gray-500"},_=["onClick"],R={key:1,class:"space-y-4"},T={key:0,class:"bg-gray-50 p-4 rounded-lg"},E={class:"space-y-3"},K={class:"flex items-center space-x-2"},O={key:1,class:"bg-gray-50 p-4 rounded-lg"},G={class:"space-y-3"},H={key:0},q={key:1},A={class:"flex items-center space-x-2"},I={class:"flex space-x-4"},W=["disabled"],Y={key:0},Z={key:1,class:"flex items-center justify-center"},J={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},N={class:"flex items-center justify-between mb-2"},Q={class:"text-blue-700"},X={class:"w-full bg-gray-200 rounded-full h-2.5"},ee={class:"mt-2 text-sm text-blue-700"},le={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ae={class:"mt-2 text-green-700"},te={class:"mt-3 space-y-2"},se=["href","download"],oe={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},re={class:"mt-2 text-red-700"},ue={key:0,class:"mt-2 text-sm text-gray-600"},ne={__name:"index",setup(ne){const ie=[{value:"merge-images",label:"图片合并",description:"将多张图片合并为PDF或PPT"},{value:"split-files",label:"文件拆分",description:"将PDF或图片拆分为多个文件"}],de=f(""),ce=f({targetFormat:"pdf",order:"upload",optimize:!0}),ve=f({mode:"page",range:"",targetSize:1,targetSizeUnit:"MB"}),pe=f([]),me=x(()=>pe.value),ge=f(!1),be=f(!1),fe=f(""),xe=f(""),ye=f(""),he=f(0),we=f(""),ke=f([]),je=["1. 选择需要的功能：图片合并或文件拆分","2. 上传相关文件：支持图片、PDF等格式","3. 根据选择的功能设置相应的选项",'4. 点击"开始处理"按钮进行操作',"5. 等待处理完成，系统会自动下载处理后的文件","6. 查看处理结果，确保操作符合预期"],ze=e=>e.split(".").pop().toLowerCase(),Ue=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},Be=e=>{const l=e.toLowerCase();return[".png",".jpg",".jpeg",".webp",".gif"].some(e=>l.endsWith(e))},Fe=e=>{pe.value=e,xe.value="",be.value=!1},Pe=e=>{xe.value=e,ye.value=Ce(e)},Ce=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Me=async()=>{if(0!==me.length)if(de.value){ge.value=!0,xe.value="",ye.value="",be.value=!1,he.value=0,we.value="准备处理...",ke.value=[];try{await new Promise(e=>{let l=0;const a=w(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),he.value=l,we.value=l<30?"正在分析文件...":l<70?"正在处理文件...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});let e={feature:de.value,files:me.value};"merge-images"===de.value?e.options=ce.value:"split-files"===de.value&&(e.options=ve.value);const l=ie.find(e=>e.value===de.value);if(fe.value=`成功${l.label} ${me.length} 个文件！`,be.value=!0,"merge-images"===de.value){const e=ce.value.targetFormat,l=new Blob(["模拟合并后的文件内容"],{type:`application/${e}`}),a=URL.createObjectURL(l),t=`merged_result.${e}`;ke.value.push({url:a,filename:t})}else"split-files"===de.value&&me.forEach((e,l)=>{const a=ze(e.name),t=new Blob(["模拟拆分后的文件内容"],{type:`application/${a}`}),s=URL.createObjectURL(t),o=`split_${l+1}.${a}`;ke.value.push({url:s,filename:o})});ke.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=ke.value[0].url,e.download=ke.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){xe.value=`处理失败：${e.message||"未知错误"}`,ye.value=Ce(xe.value)}finally{ge.value=!1}}else xe.value="请选择功能";else xe.value="请选择文件"},Ve=()=>{pe.value=[],de.value="",ce.value={targetFormat:"pdf",order:"upload",optimize:!0},ve.value={mode:"page",range:"",targetSize:1,targetSizeUnit:"MB"},xe.value="",ye.value="",be.value=!1,fe.value="",he.value=0,we.value="",ke.value=[]};return(f,x)=>(a(),e(y,{title:"图片PDF混合处理",description:"支持多图合并PDF/PPT、PDF/图片批量拼接拆分",tips:je},{default:l(()=>[t("div",k,[t("div",j,[x[9]||(x[9]=t("h3",{class:"text-lg font-semibold mb-4"},"选择功能",-1)),t("div",z,[(a(),s(o,null,r(ie,e=>t("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[u(t("input",{type:"radio","onUpdate:modelValue":x[0]||(x[0]=e=>de.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,U),[[n,de.value]]),t("div",null,[t("div",B,i(e.label),1),t("div",F,i(e.description),1)])])),64))])]),d(h,{multiple:!0,accept:"merge-images"===de.value?".png,.jpg,.jpeg,.webp":(de.value,".pdf,.png,.jpg,.jpeg,.webp"),"max-size":104857600,modelValue:pe.value,"onUpdate:modelValue":x[1]||(x[1]=e=>pe.value=e),onFilesChanged:Fe,onError:Pe},null,8,["accept","modelValue"]),me.value.length>0?(a(),s("div",P,[x[11]||(x[11]=t("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),t("div",C,[(a(!0),s(o,null,r(me.value,(e,l)=>(a(),s("div",{key:l,class:"bg-white rounded border p-3"},[t("div",M,[Be(e.name)?(a(),s("img",{key:0,src:f.URL.createObjectURL(e),class:"max-h-32 object-contain",alt:"Preview"},null,8,V)):(a(),s("svg",L,[...x[10]||(x[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))]),t("div",D,[t("div",$,i(e.name),1),t("div",S,i(ze(e.name))+" • "+i(Ue(e.size)),1)]),t("button",{onClick:e=>(e=>{pe.value.splice(e,1),0===pe.value.length&&Ve()})(l),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,_)]))),128))])])):c("",!0),me.value.length>0&&de.value?(a(),s("div",R,["merge-images"===de.value?(a(),s("div",T,[x[17]||(x[17]=t("h3",{class:"text-lg font-semibold mb-3"},"合并选项",-1)),t("div",E,[t("div",null,[x[13]||(x[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"目标格式",-1)),u(t("select",{"onUpdate:modelValue":x[2]||(x[2]=e=>ce.value.targetFormat=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[12]||(x[12]=[t("option",{value:"pdf"},"PDF",-1),t("option",{value:"ppt"},"PPT",-1)])],512),[[v,ce.value.targetFormat]])]),t("div",null,[x[15]||(x[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"合并顺序",-1)),u(t("select",{"onUpdate:modelValue":x[3]||(x[3]=e=>ce.value.order=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[14]||(x[14]=[t("option",{value:"upload"},"按上传顺序",-1),t("option",{value:"name"},"按文件名排序",-1),t("option",{value:"size"},"按文件大小",-1)])],512),[[v,ce.value.order]])]),t("div",null,[t("label",K,[u(t("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=e=>ce.value.optimize=e),class:"w-4 h-4 text-blue-600"},null,512),[[p,ce.value.optimize]]),x[16]||(x[16]=t("span",null,"优化输出文件大小",-1))])])])])):c("",!0),"split-files"===de.value?(a(),s("div",O,[x[23]||(x[23]=t("h3",{class:"text-lg font-semibold mb-3"},"拆分选项",-1)),t("div",G,[t("div",null,[x[19]||(x[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分方式",-1)),u(t("select",{"onUpdate:modelValue":x[5]||(x[5]=e=>ve.value.mode=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[18]||(x[18]=[t("option",{value:"page"},"按页码拆分（PDF）",-1),t("option",{value:"size"},"按文件大小拆分",-1),t("option",{value:"every-page"},"每页拆分（PDF）",-1)])],512),[[v,ve.value.mode]])]),"page"===ve.value.mode?(a(),s("div",H,[x[20]||(x[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分区间",-1)),u(t("input",{"onUpdate:modelValue":x[6]||(x[6]=e=>ve.value.range=e),type:"text",placeholder:"例如：1-3,5,7-9",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[m,ve.value.range]])])):c("",!0),"size"===ve.value.mode?(a(),s("div",q,[x[22]||(x[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"目标文件大小",-1)),t("div",A,[u(t("input",{"onUpdate:modelValue":x[7]||(x[7]=e=>ve.value.targetSize=e),type:"number",min:"0.1",step:"0.1",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[m,ve.value.targetSize,void 0,{number:!0}]]),u(t("select",{"onUpdate:modelValue":x[8]||(x[8]=e=>ve.value.targetSizeUnit=e),class:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[21]||(x[21]=[t("option",{value:"KB"},"KB",-1),t("option",{value:"MB"},"MB",-1)])],512),[[v,ve.value.targetSizeUnit]])])])):c("",!0)])])):c("",!0)])):c("",!0),t("div",I,[t("button",{onClick:Me,disabled:!me.value.length||!de.value||ge.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[ge.value?(a(),s("span",Z,[x[24]||(x[24]=t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),g(" 处理中... "+i(he.value)+"% ",1)])):(a(),s("span",Y,"开始处理"))],8,W),t("button",{onClick:Ve,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),ge.value?(a(),s("div",J,[t("div",N,[x[25]||(x[25]=t("h4",{class:"font-semibold text-blue-800"},"处理进度",-1)),t("span",Q,i(he.value)+"%",1)]),t("div",X,[t("div",{class:"bg-blue-600 h-2.5 rounded-full",style:b({width:he.value+"%"})},null,4)]),t("p",ee,i(we.value),1)])):c("",!0),be.value?(a(),s("div",le,[x[26]||(x[26]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"处理成功")],-1)),t("p",ae,i(fe.value),1),t("div",te,[(a(!0),s(o,null,r(ke.value,(e,l)=>(a(),s("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载处理结果 "+i(l+1),9,se))),128))])])):c("",!0),xe.value?(a(),s("div",oe,[x[27]||(x[27]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"处理失败")],-1)),t("p",re,i(xe.value),1),ye.value?(a(),s("p",ue,"建议："+i(ye.value),1)):c("",!0)])):c("",!0)])]),_:1}))}};export{ne as default};
