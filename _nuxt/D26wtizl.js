import{i as A,w as H,o,a as e,c as n,F as B,r as U,j as b,v as W,t as u,b as q,f as p,p as F,y as J,k as S,d as Q,x as X,l as d,m as Y}from"./-R7zUpUx.js";import{_ as Z}from"./1SagYtif.js";import{G as ee}from"./zseaTYbb.js";import{s as te}from"./CI8PMl9t.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./DlAUqK2U.js";const se={class:"space-y-6"},le={class:"bg-gray-50 p-4 rounded-lg"},oe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ne=["value"],ae={class:"font-medium"},re={class:"text-sm text-gray-500"},ie={key:0,class:"bg-gray-50 p-4 rounded-lg"},ue={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},de={class:"flex justify-center mb-3"},ce=["src"],pe={key:1,class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve={class:"text-center"},me={class:"font-medium truncate"},ge={class:"text-sm text-gray-500"},be=["onClick"],fe={key:1,class:"space-y-4"},xe={key:0,class:"bg-gray-50 p-4 rounded-lg"},ye={class:"space-y-3"},he={class:"flex items-center space-x-2"},ke={key:1,class:"bg-gray-50 p-4 rounded-lg"},we={class:"space-y-3"},_e={key:0},Fe={key:1},ze={class:"flex items-center space-x-2"},Pe={class:"flex space-x-4"},Be=["disabled"],Ue={key:0},je={key:1,class:"flex items-center justify-center"},Ce={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ve={class:"flex items-center justify-between mb-2"},Me={class:"text-blue-700"},Se={class:"w-full bg-gray-200 rounded-full h-2.5"},De={class:"mt-2 text-sm text-blue-700"},Le={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},$e={class:"mt-2 text-green-700"},Ee={class:"mt-3 space-y-2"},Re=["href","download"],Te={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Oe={class:"mt-2 text-red-700"},Ie={key:0,class:"mt-2 text-sm text-gray-600"},Qe={__name:"index",setup(Ne){const j=[{value:"merge-images",label:"图片合并",description:"将多张图片合并为PDF或PPT"},{value:"split-files",label:"文件拆分",description:"将PDF或图片拆分为多个文件"}],a=d(""),v=d({targetFormat:"pdf",order:"upload",optimize:!0}),i=d({mode:"page",range:"",targetSize:1,targetSizeUnit:"MB"}),f=d([]),m=Y(()=>f.value),k=d(!1),w=d(!1),z=d(""),c=d(""),x=d(""),y=d(0),h=d(""),g=d([]),D=["1. 选择需要的功能：图片合并或文件拆分","2. 上传相关文件：支持图片、PDF等格式","3. 根据选择的功能设置相应的选项",'4. 点击"开始处理"按钮进行操作',"5. 等待处理完成，系统会自动下载处理后的文件","6. 查看处理结果，确保操作符合预期"],C=l=>l.split(".").pop().toLowerCase(),L=l=>{if(l===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],r=Math.floor(Math.log(l)/Math.log(t));return parseFloat((l/Math.pow(t,r)).toFixed(2))+" "+s[r]},$=l=>{const t=[".png",".jpg",".jpeg",".webp",".gif"],s=l.toLowerCase();return t.some(r=>s.endsWith(r))},E=()=>a.value==="merge-images"?".png,.jpg,.jpeg,.webp":(a.value==="split-files",".pdf,.png,.jpg,.jpeg,.webp"),R=l=>{f.value.splice(l,1),f.value.length===0&&M()},T=l=>{f.value=l,c.value="",w.value=!1},O=l=>{c.value=l,x.value=V(l)},V=l=>l.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":l.includes("文件类型")?"请确保上传的文件格式受支持":l.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",I=()=>new Promise(l=>{let t=0;const s=te(()=>{t+=Math.floor(Math.random()*10)+5,t>100&&(t=100),y.value=t,t<30?h.value="正在分析文件...":t<70?h.value="正在处理文件...":h.value="正在生成结果...",t===100&&(clearInterval(s),setTimeout(l,500))},500)}),N=async()=>{if(m.length===0){c.value="请选择文件";return}if(!a.value){c.value="请选择功能";return}k.value=!0,c.value="",x.value="",w.value=!1,y.value=0,h.value="准备处理...",g.value=[];try{await I();let l={feature:a.value,files:m.value};a.value==="merge-images"?l.options=v.value:a.value==="split-files"&&(l.options=i.value),console.log("处理参数:",l);const t=j.find(s=>s.value===a.value);if(z.value=`成功${t.label} ${m.length} 个文件！`,w.value=!0,a.value==="merge-images"){const s=v.value.targetFormat,r=new Blob(["模拟合并后的文件内容"],{type:`application/${s}`}),_=URL.createObjectURL(r),P=`merged_result.${s}`;g.value.push({url:_,filename:P})}else a.value==="split-files"&&m.forEach((s,r)=>{const _=C(s.name),P=new Blob(["模拟拆分后的文件内容"],{type:`application/${_}`}),G=URL.createObjectURL(P),K=`split_${r+1}.${_}`;g.value.push({url:G,filename:K})});g.value.length>0&&setTimeout(()=>{const s=document.createElement("a");s.href=g.value[0].url,s.download=g.value[0].filename,document.body.appendChild(s),s.click(),document.body.removeChild(s)},1e3)}catch(l){c.value=`处理失败：${l.message||"未知错误"}`,x.value=V(c.value)}finally{k.value=!1}},M=()=>{f.value=[],a.value="",v.value={targetFormat:"pdf",order:"upload",optimize:!0},i.value={mode:"page",range:"",targetSize:1,targetSizeUnit:"MB"},c.value="",x.value="",w.value=!1,z.value="",y.value=0,h.value="",g.value=[]};return(l,t)=>(o(),A(Z,{title:"图片PDF混合处理",description:"支持多图合并PDF/PPT、PDF/图片批量拼接拆分",tips:D},{default:H(()=>[e("div",se,[e("div",le,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold mb-4"},"选择功能",-1)),e("div",oe,[(o(),n(B,null,U(j,s=>e("label",{key:s.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[b(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),value:s.value,class:"w-4 h-4 text-blue-600"},null,8,ne),[[W,a.value]]),e("div",null,[e("div",ae,u(s.label),1),e("div",re,u(s.description),1)])])),64))])]),q(ee,{multiple:!0,accept:E(),"max-size":100*1024*1024,modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),onFilesChanged:T,onError:O},null,8,["accept","modelValue"]),m.value.length>0?(o(),n("div",ie,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),e("div",ue,[(o(!0),n(B,null,U(m.value,(s,r)=>(o(),n("div",{key:r,class:"bg-white rounded border p-3"},[e("div",de,[$(s.name)?(o(),n("img",{key:0,src:l.URL.createObjectURL(s),class:"max-h-32 object-contain",alt:"Preview"},null,8,ce)):(o(),n("svg",pe,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))]),e("div",ve,[e("div",me,u(s.name),1),e("div",ge,u(C(s.name))+" • "+u(L(s.size)),1)]),e("button",{onClick:_=>R(r),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,be)]))),128))])])):p("",!0),m.value.length>0&&a.value?(o(),n("div",fe,[a.value==="merge-images"?(o(),n("div",xe,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold mb-3"},"合并选项",-1)),e("div",ye,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"目标格式",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value.targetFormat=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[12]||(t[12]=[e("option",{value:"pdf"},"PDF",-1),e("option",{value:"ppt"},"PPT",-1)])],512),[[F,v.value.targetFormat]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"合并顺序",-1)),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value.order=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[14]||(t[14]=[e("option",{value:"upload"},"按上传顺序",-1),e("option",{value:"name"},"按文件名排序",-1),e("option",{value:"size"},"按文件大小",-1)])],512),[[F,v.value.order]])]),e("div",null,[e("label",he,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>v.value.optimize=s),class:"w-4 h-4 text-blue-600"},null,512),[[J,v.value.optimize]]),t[16]||(t[16]=e("span",null,"优化输出文件大小",-1))])])])])):p("",!0),a.value==="split-files"?(o(),n("div",ke,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold mb-3"},"拆分选项",-1)),e("div",we,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分方式",-1)),b(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.mode=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[18]||(t[18]=[e("option",{value:"page"},"按页码拆分（PDF）",-1),e("option",{value:"size"},"按文件大小拆分",-1),e("option",{value:"every-page"},"每页拆分（PDF）",-1)])],512),[[F,i.value.mode]])]),i.value.mode==="page"?(o(),n("div",_e,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"拆分区间",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>i.value.range=s),type:"text",placeholder:"例如：1-3,5,7-9",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[S,i.value.range]])])):p("",!0),i.value.mode==="size"?(o(),n("div",Fe,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"目标文件大小",-1)),e("div",ze,[b(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.targetSize=s),type:"number",min:"0.1",step:"0.1",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[S,i.value.targetSize,void 0,{number:!0}]]),b(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>i.value.targetSizeUnit=s),class:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[21]||(t[21]=[e("option",{value:"KB"},"KB",-1),e("option",{value:"MB"},"MB",-1)])],512),[[F,i.value.targetSizeUnit]])])])):p("",!0)])])):p("",!0)])):p("",!0),e("div",Pe,[e("button",{onClick:N,disabled:!m.value.length||!a.value||k.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[k.value?(o(),n("span",je,[t[24]||(t[24]=e("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Q(" 处理中... "+u(y.value)+"% ",1)])):(o(),n("span",Ue,"开始处理"))],8,Be),e("button",{onClick:M,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),k.value?(o(),n("div",Ce,[e("div",Ve,[t[25]||(t[25]=e("h4",{class:"font-semibold text-blue-800"},"处理进度",-1)),e("span",Me,u(y.value)+"%",1)]),e("div",Se,[e("div",{class:"bg-blue-600 h-2.5 rounded-full",style:X({width:y.value+"%"})},null,4)]),e("p",De,u(h.value),1)])):p("",!0),w.value?(o(),n("div",Le,[t[26]||(t[26]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h4",{class:"font-semibold text-green-800"},"处理成功")],-1)),e("p",$e,u(z.value),1),e("div",Ee,[(o(!0),n(B,null,U(g.value,(s,r)=>(o(),n("a",{key:r,href:s.url,download:s.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载处理结果 "+u(r+1),9,Re))),128))])])):p("",!0),c.value?(o(),n("div",Te,[t[27]||(t[27]=e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("h4",{class:"font-semibold text-red-800"},"处理失败")],-1)),e("p",Oe,u(c.value),1),x.value?(o(),n("p",Ie,"建议："+u(x.value),1)):p("",!0)])):p("",!0)])]),_:1}))}};export{Qe as default};
