import{c as r,a as t,t as n,f as b,F as S,r as A,j as m,k as w,p as _,y as h,s as R,x as W,m as k,l as d,o as v,q as $,v as j}from"./-R7zUpUx.js";import{s as H}from"./CI8PMl9t.js";import{_ as N}from"./DlAUqK2U.js";const D={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},L={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},O=["accept"],T={key:0,class:"mt-4 p-3 bg-gray-50 rounded"},q={class:"font-medium"},E={class:"text-gray-500 ml-2"},G={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},K=["value"],J={class:"group"},X={class:"mt-3 p-4 border rounded-lg"},Y={key:0},Z={class:"space-y-3"},ee={class:"text-right text-sm text-gray-500"},te={key:1},le={class:"space-y-3"},se={class:"text-right text-sm text-gray-500"},oe={class:"mt-4"},ae={class:"space-y-3"},ne={class:"flex items-center"},ue={class:"flex items-center"},ie=["disabled"],re={key:0,class:"mt-6"},de={class:"w-full bg-gray-200 rounded-full h-2.5"},ve={class:"text-center mt-2 text-gray-600"},me={key:1,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},pe={class:"text-green-600 mb-4"},be=["href"],ce={key:2,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},ge={class:"text-red-600"},ye={__name:"index",setup(fe){const x=d(null),a=d(null),u=d("mp3"),c=d(!1),p=d(0),g=d(null),i=d(null),o=d({audioQuality:80,videoQuality:80,sampleRate:"44100",resolution:"720p",optimizeForWeb:!1,enableCompression:!0}),F=k(()=>".mp3,.mp4,.wav,.avi,.mov,.flv,.wmv,.mkv,.aac,.ogg"),y=[{value:"mp3",label:"MP3 (音频)",type:"audio"},{value:"mp4",label:"MP4 (视频)",type:"video"},{value:"wav",label:"WAV (音频)",type:"audio"},{value:"avi",label:"AVI (视频)",type:"video"}],M=k(()=>{const s=y.find(e=>e.value===u.value);return s&&s.type==="audio"}),V=k(()=>{const s=y.find(e=>e.value===u.value);return s&&s.type==="video"}),C=s=>{const e=s.target.files[0];e&&(a.value=e,i.value=null)},z=()=>{a.value=null,x.value.value=""},U=s=>{if(s===0)return"0 Bytes";const e=1024,l=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,f)).toFixed(2))+" "+l[f]},B=s=>{const e=y.find(l=>l.value===s);return e?e.label:s},I=()=>new Promise(s=>{const e=H(()=>{p.value+=5,p.value>=100&&(clearInterval(e),setTimeout(s,500))},200)}),Q=async()=>{if(!a.value){i.value="请选择要转换的文件";return}c.value=!0,p.value=0,i.value=null;try{await I(),g.value={downloadUrl:"#",fileName:a.value.name.replace(/\.[^/.]+$/,`.${u.value}`),fileSize:a.value.size}}catch{i.value="转换失败，请重试"}finally{c.value=!1}},P=()=>{a.value=null,x.value.value="",u.value="mp3",g.value=null,p.value=0,i.value=null};return(s,e)=>(v(),r("div",D,[e[24]||(e[24]=t("h1",{class:"text-2xl font-bold mb-6 text-center"},"音视频格式转换",-1)),e[25]||(e[25]=t("div",{class:"mb-8"},[t("p",{class:"text-gray-600 mb-4"},"支持音视频格式转换、压缩、切割，操作简单快捷")],-1)),t("form",{onSubmit:R(Q,["prevent"]),class:"space-y-6"},[t("div",L,[t("input",{type:"file",ref_key:"fileInput",ref:x,class:"hidden",accept:F.value,onChange:C},null,40,O),t("button",{type:"button",onClick:e[0]||(e[0]=l=>s.$refs.fileInput.click()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"}," 选择文件 "),e[9]||(e[9]=t("p",{class:"text-gray-500 mt-2"},"支持 MP3、MP4、WAV、AVI、MOV 等格式",-1)),a.value?(v(),r("div",T,[t("span",q,n(a.value.name),1),t("span",E,"("+n(U(a.value.size))+")",1),t("button",{type:"button",onClick:z,class:"ml-2 text-red-500 hover:text-red-700"}," 移除 ")])):b("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-gray-700 font-medium mb-2"},"转换为",-1)),t("div",G,[(v(),r(S,null,A(y,l=>t("label",{key:l.value,class:$(["flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500 transition duration-200",{"border-blue-500 bg-blue-50":u.value===l.value}])},[m(t("input",{type:"radio",value:l.value,"onUpdate:modelValue":e[1]||(e[1]=f=>u.value=f),class:"mr-2"},null,8,K),[[j,u.value]]),t("span",null,n(l.label),1)],2)),64))])]),t("div",null,[t("details",J,[e[22]||(e[22]=t("summary",{class:"cursor-pointer list-none flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("span",{class:"font-medium"},"高级选项"),t("span",{class:"transition-transform duration-300 group-open:rotate-180"},"▼")],-1)),t("div",X,[M.value?(v(),r("div",Y,[e[14]||(e[14]=t("h4",{class:"font-medium mb-3"},"音频设置",-1)),t("div",Z,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"音频质量",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.audioQuality=l),type:"range",min:"10",max:"100",class:"w-full"},null,512),[[w,o.value.audioQuality,void 0,{number:!0}]]),t("div",ee,n(o.value.audioQuality)+"%",1)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"采样率",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.sampleRate=l),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...e[12]||(e[12]=[t("option",{value:"44100"},"44.1 kHz (标准)",-1),t("option",{value:"48000"},"48 kHz (高清)",-1),t("option",{value:"22050"},"22.05 kHz (低质量)",-1)])],512),[[_,o.value.sampleRate]])])])])):b("",!0),V.value?(v(),r("div",te,[e[18]||(e[18]=t("h4",{class:"font-medium mb-3"},"视频设置",-1)),t("div",le,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"视频质量",-1)),m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.videoQuality=l),type:"range",min:"10",max:"100",class:"w-full"},null,512),[[w,o.value.videoQuality,void 0,{number:!0}]]),t("div",se,n(o.value.videoQuality)+"%",1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"分辨率",-1)),m(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.resolution=l),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...e[16]||(e[16]=[t("option",{value:"1080p"},"1080p (高清)",-1),t("option",{value:"720p"},"720p (标清)",-1),t("option",{value:"480p"},"480p (低清)",-1)])],512),[[_,o.value.resolution]])])])])):b("",!0),t("div",oe,[e[21]||(e[21]=t("h4",{class:"font-medium mb-3"},"通用设置",-1)),t("div",ae,[t("label",ne,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>o.value.optimizeForWeb=l),class:"mr-2"},null,512),[[h,o.value.optimizeForWeb]]),e[19]||(e[19]=t("span",null,"优化为web使用",-1))]),t("label",ue,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>o.value.enableCompression=l),class:"mr-2"},null,512),[[h,o.value.enableCompression]]),e[20]||(e[20]=t("span",null,"启用压缩",-1))])])])])])]),t("button",{type:"submit",disabled:!a.value||c.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},n(c.value?"转换中...":"开始转换"),9,ie)],32),c.value?(v(),r("div",re,[t("div",de,[t("div",{class:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:W({width:p.value+"%"})},null,4)]),t("p",ve,n(p.value)+"%",1)])):b("",!0),g.value?(v(),r("div",me,[e[23]||(e[23]=t("h3",{class:"font-semibold text-green-700 mb-2"},"转换成功",-1)),t("p",pe,"文件已成功转换为 "+n(B(u.value))+" 格式",1),t("a",{href:g.value.downloadUrl,class:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-300",download:""}," 下载文件 ",8,be),t("button",{onClick:P,class:"ml-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-300"}," 再次转换 ")])):b("",!0),i.value?(v(),r("div",ce,[t("p",ge,n(i.value),1),t("button",{onClick:e[8]||(e[8]=l=>i.value=null),class:"mt-2 text-red-600 hover:text-red-800 text-sm"}," 关闭 ")])):b("",!0)]))}},_e=N(ye,[["__scopeId","data-v-cba78580"]]);export{_e as default};
