import{j as e,w as l,o as a,a as s,b as t,c as o,F as n,p as u,t as r,l as i,q as d,v as c,C as v,y as p,d as m,B as b,r as g,x as f}from"./BGpdZ-s9.js";import{_ as x}from"./B4wm4ekp.js";import{G as h}from"./BtAA_ILT.js";import{s as y}from"./C2gVa5gV.js";import"./DILYegs3.js";import"./D_BBTi0O.js";import"./9Oz-M6e1.js";import"./DKLvglw8.js";import"./BCo6x5W8.js";const w={class:"space-y-6"},k={key:0,class:"bg-gray-50 p-4 rounded-lg"},V={class:"space-y-2"},C={class:"flex items-center"},M={class:"font-medium"},j={class:"text-sm text-gray-500"},S=["onClick"],z={key:1,class:"bg-gray-50 p-4 rounded-lg"},F={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},B=["value"],U={class:"font-medium"},L={class:"text-sm text-gray-500"},P={key:2,class:"space-y-4"},G={class:"space-y-2"},A={class:"flex items-center space-x-2"},E={class:"flex items-center space-x-2"},O={class:"flex items-center space-x-2"},$={key:0,class:"bg-white p-4 rounded-lg border"},_={class:"space-y-2"},I={class:"flex items-center space-x-2"},D={class:"flex items-center space-x-2"},H={key:1,class:"bg-white p-4 rounded-lg border"},R={class:"space-y-2"},T={class:"flex space-x-4"},W=["disabled"],q={key:0},K={key:1,class:"flex items-center justify-center"},Y={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Z={class:"flex items-center justify-between mb-2"},J={class:"text-blue-700"},N={class:"w-full bg-gray-200 rounded-full h-2.5"},Q={class:"mt-2 text-sm text-blue-700"},X={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ee={class:"mt-2 text-green-700"},le={class:"mt-3 space-y-2"},ae=["href","download"],se={key:5,class:"bg-red-50 border border-red-200 rounded-lg p-4"},te={class:"mt-2 text-red-700"},oe={key:0,class:"mt-2 text-sm text-gray-600"},ne={__name:"index",setup(ne){const ue=[{value:"svg",label:"SVG (.svg)",description:"可缩放矢量图形",extensions:[".svg"]},{value:"ai",label:"AI (.ai)",description:"Adobe Illustrator格式",extensions:[".ai"]},{value:"eps",label:"EPS (.eps)",description:"封装PostScript格式",extensions:[".eps"]},{value:"pdf",label:"PDF (.pdf)",description:"便携式文档格式",extensions:[".pdf"]},{value:"wmf",label:"WMF (.wmf)",description:"Windows图元文件",extensions:[".wmf"]},{value:"emf",label:"EMF (.emf)",description:"增强型图元文件",extensions:[".emf"]}],re=g(""),ie=g({preserveLayers:!0,optimizePaths:!0,includeMetadata:!1}),de=g({svgVersion:"1.1",minify:!1,embedFonts:!0}),ce=g({pageSize:"a4",pageOrientation:"portrait"}),ve=g([]),pe=f(()=>ve.value),me=g(!1),be=g(!1),ge=g(""),fe=g(""),xe=g(""),he=g(0),ye=g(""),we=g([]),ke=g([]),Ve=["1. 上传文件：支持SVG、AI、EPS等矢量图格式，可批量上传","2. 系统自动识别源文件格式","3. 选择目标格式：系统会根据源格式显示可用的目标格式","4. 设置转换选项：是否保留图层、优化路径、包含元数据等",'5. 点击"开始转换"按钮进行处理',"6. 等待处理完成，系统会自动下载处理后的文件","7. 查看处理结果，确保矢量图格式正确"],Ce=e=>e.split(".").pop().toLowerCase(),Me=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},je=e=>{ve.value=e,e.length>0?Se():(ke.value=[],re.value=""),fe.value="",be.value=!1},Se=()=>{if(0===ve.value.length)return void(ke.value=[]);const e=Ce(ve.value[0].name),l=[];ue.forEach(a=>{a.extensions.some(l=>e===l.replace(".",""))||l.push(a)}),ke.value=l,l.length>0?re.value=l[0].value:re.value=""},ze=e=>{fe.value=e,xe.value=Fe(e)},Fe=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Be=async()=>{if(0!==pe.length)if(re.value){me.value=!0,fe.value="",xe.value="",be.value=!1,he.value=0,ye.value="准备转换...",we.value=[];try{await new Promise(e=>{let l=0;const a=y(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),he.value=l,ye.value=l<30?"正在分析矢量图...":l<70?"正在转换格式...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});let e={files:pe.value,targetFormat:re.value,options:ie.value};"svg"===re.value?e.svgOptions=de.value:"pdf"===re.value&&(e.pdfOptions=ce.value);const l=ue.find(e=>e.value===re.value);ge.value=`成功将 ${pe.length} 个文件转换为 ${l.label} 格式！`,be.value=!0,pe.forEach((e,l)=>{const a=new Blob(["模拟转换后的矢量图内容"],{type:"application/octet-stream"}),s=URL.createObjectURL(a),t=`converted_${e.name.replace(/\.[^/.]+$/,`.${re.value}`)}`;we.value.push({url:s,filename:t})}),we.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=we.value[0].url,e.download=we.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){fe.value=`转换失败：${e.message||"未知错误"}`,xe.value=Fe(fe.value)}finally{me.value=!1}}else fe.value="请选择目标格式";else fe.value="请选择文件"},Ue=()=>{ve.value=[],re.value="",ie.value={preserveLayers:!0,optimizePaths:!0,includeMetadata:!1},de.value={svgVersion:"1.1",minify:!1,embedFonts:!0},ce.value={pageSize:"a4",pageOrientation:"portrait"},fe.value="",xe.value="",be.value=!1,ge.value="",he.value=0,ye.value="",we.value=[],ke.value=[]};return(g,f)=>(a(),e(x,{title:"矢量图转换",description:"SVG/AI/EPS等矢量图格式互转",tips:Ve},{default:l(()=>[s("div",w,[t(h,{multiple:!0,accept:[".svg",".ai",".eps",".pdf",".wmf",".emf"],"max-size":209715200,modelValue:ve.value,"onUpdate:modelValue":f[0]||(f[0]=e=>ve.value=e),onFilesChanged:je,onError:ze},null,8,["modelValue"]),pe.value.length>0?(a(),o("div",k,[f[12]||(f[12]=s("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),s("div",V,[(a(!0),o(n,null,u(pe.value,(e,l)=>(a(),o("div",{key:l,class:"flex items-center justify-between p-2 bg-white rounded border"},[s("div",C,[f[10]||(f[10]=s("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),s("div",null,[s("div",M,r(e.name),1),s("div",j,r(Ce(e.name))+" • "+r(Me(e.size)),1)])]),s("button",{onClick:e=>(e=>{ve.value.splice(e,1),0===ve.value.length?Ue():Se()})(l),class:"text-red-500 hover:text-red-700"},[...f[11]||(f[11]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,S)]))),128))])])):i("",!0),pe.value.length>0&&ke.value.length>0?(a(),o("div",z,[f[13]||(f[13]=s("h3",{class:"text-lg font-semibold mb-4"},"目标格式",-1)),s("div",F,[(a(!0),o(n,null,u(ke.value,e=>(a(),o("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[d(s("input",{type:"radio","onUpdate:modelValue":f[1]||(f[1]=e=>re.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,B),[[c,re.value]]),s("div",null,[s("div",U,r(e.label),1),s("div",L,r(e.description),1)])]))),128))])])):i("",!0),pe.value.length>0?(a(),o("div",P,[s("div",null,[f[17]||(f[17]=s("h3",{class:"text-lg font-semibold mb-2"},"转换选项",-1)),s("div",G,[s("label",A,[d(s("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=e=>ie.value.preserveLayers=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ie.value.preserveLayers]]),f[14]||(f[14]=s("span",null,"保留图层",-1))]),s("label",E,[d(s("input",{type:"checkbox","onUpdate:modelValue":f[3]||(f[3]=e=>ie.value.optimizePaths=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ie.value.optimizePaths]]),f[15]||(f[15]=s("span",null,"优化路径",-1))]),s("label",O,[d(s("input",{type:"checkbox","onUpdate:modelValue":f[4]||(f[4]=e=>ie.value.includeMetadata=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,ie.value.includeMetadata]]),f[16]||(f[16]=s("span",null,"包含元数据",-1))])])]),"svg"===re.value?(a(),o("div",$,[f[22]||(f[22]=s("h3",{class:"text-lg font-semibold mb-3"},"SVG转换选项",-1)),s("div",_,[s("div",null,[f[19]||(f[19]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SVG版本",-1)),d(s("select",{"onUpdate:modelValue":f[5]||(f[5]=e=>de.value.svgVersion=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...f[18]||(f[18]=[s("option",{value:"1.1"},"SVG 1.1",-1),s("option",{value:"2.0"},"SVG 2.0",-1)])],512),[[p,de.value.svgVersion]])]),s("div",null,[s("label",I,[d(s("input",{type:"checkbox","onUpdate:modelValue":f[6]||(f[6]=e=>de.value.minify=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,de.value.minify]]),f[20]||(f[20]=s("span",null,"压缩SVG",-1))])]),s("div",null,[s("label",D,[d(s("input",{type:"checkbox","onUpdate:modelValue":f[7]||(f[7]=e=>de.value.embedFonts=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,de.value.embedFonts]]),f[21]||(f[21]=s("span",null,"嵌入字体",-1))])])])])):i("",!0),"pdf"===re.value?(a(),o("div",H,[f[27]||(f[27]=s("h3",{class:"text-lg font-semibold mb-3"},"PDF转换选项",-1)),s("div",R,[s("div",null,[f[24]||(f[24]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面大小",-1)),d(s("select",{"onUpdate:modelValue":f[8]||(f[8]=e=>ce.value.pageSize=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...f[23]||(f[23]=[s("option",{value:"a4"},"A4",-1),s("option",{value:"a3"},"A3",-1),s("option",{value:"letter"},"Letter",-1),s("option",{value:"custom"},"自定义",-1)])],512),[[p,ce.value.pageSize]])]),s("div",null,[f[26]||(f[26]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"页面方向",-1)),d(s("select",{"onUpdate:modelValue":f[9]||(f[9]=e=>ce.value.pageOrientation=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...f[25]||(f[25]=[s("option",{value:"portrait"},"纵向",-1),s("option",{value:"landscape"},"横向",-1)])],512),[[p,ce.value.pageOrientation]])])])])):i("",!0)])):i("",!0),s("div",T,[s("button",{onClick:Be,disabled:!pe.value.length||!re.value||me.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[me.value?(a(),o("span",K,[f[28]||(f[28]=s("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" 处理中... "+r(he.value)+"% ",1)])):(a(),o("span",q,"开始转换"))],8,W),s("button",{onClick:Ue,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),me.value?(a(),o("div",Y,[s("div",Z,[f[29]||(f[29]=s("h4",{class:"font-semibold text-blue-800"},"转换进度",-1)),s("span",J,r(he.value)+"%",1)]),s("div",N,[s("div",{class:"bg-blue-600 h-2.5 rounded-full",style:b({width:he.value+"%"})},null,4)]),s("p",Q,r(ye.value),1)])):i("",!0),be.value?(a(),o("div",X,[f[30]||(f[30]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),s("h4",{class:"font-semibold text-green-800"},"转换成功")],-1)),s("p",ee,r(ge.value),1),s("div",le,[(a(!0),o(n,null,u(we.value,(e,l)=>(a(),o("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载转换结果 "+r(l+1),9,ae))),128))])])):i("",!0),fe.value?(a(),o("div",se,[f[31]||(f[31]=s("div",{class:"flex items-center"},[s("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),s("h4",{class:"font-semibold text-red-800"},"转换失败")],-1)),s("p",te,r(fe.value),1),xe.value?(a(),o("p",oe,"建议："+r(xe.value),1)):i("",!0)])):i("",!0)])]),_:1}))}};export{ne as default};
