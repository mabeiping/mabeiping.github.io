import{$ as e,w as l,m as a,p as t,n as s,F as o,u,z as n,I as r,x as i,q as d,D as c,J as v,a8 as p,v as m,L as b,k as g,l as x}from"./DwDdtX2U.js";import{_ as h}from"./BGYMMrNt.js";import{G as f}from"./DaJPXVd5.js";import{s as y}from"./Ta3x3s_8.js";import"./DFiMgQNB.js";import"./DwL8tNwU.js";import"./Dzf--W9j.js";import"./DiBmY6iY.js";const w={class:"space-y-6"},k={class:"bg-gray-50 p-4 rounded-lg"},C={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},j=["value"],F={class:"font-medium"},O={class:"text-sm text-gray-500"},B={key:0,class:"bg-gray-50 p-4 rounded-lg"},L={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},V={class:"flex justify-center mb-3"},z=["src"],M={key:1,class:"w-16 h-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R={key:2,class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={class:"text-center"},T={class:"font-medium truncate"},D={class:"text-sm text-gray-500"},H=["onClick"],I={key:1,class:"space-y-4"},P={class:"bg-gray-50 p-4 rounded-lg"},E={class:"space-y-3"},$={class:"flex items-center space-x-2"},_={class:"flex items-center space-x-2"},W={class:"flex items-center space-x-2"},A={key:0,class:"bg-gray-50 p-4 rounded-lg"},G={class:"space-y-3"},q={key:0},J={key:1},K={key:2},N={class:"flex items-center space-x-2"},Q={class:"flex space-x-4"},S=["disabled"],X={key:0},Y={key:1,class:"flex items-center justify-center"},Z={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ee={class:"flex items-center justify-between mb-2"},le={class:"text-blue-700"},ae={class:"w-full bg-gray-200 rounded-full h-2.5"},te={class:"mt-2 text-sm text-blue-700"},se={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},oe={class:"mt-2 text-green-700"},ue={class:"mt-3 space-y-2"},ne=["href","download"],re={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ie={class:"mt-2 text-red-700"},de={key:0,class:"mt-2 text-sm text-gray-600"},ce={key:5,class:"bg-gray-50 p-4 rounded-lg"},ve={class:"bg-white p-4 rounded-lg border max-h-96 overflow-auto"},pe={class:"whitespace-pre-wrap"},me={__name:"index",setup(me){const be=[{value:"general",label:"通用文字识别",description:"识别图片中的文字内容"},{value:"idcard",label:"身份证识别",description:"识别身份证正反面信息"},{value:"invoice",label:"发票识别",description:"识别各类发票信息"},{value:"table",label:"表格识别",description:"识别表格并转换为Excel"},{value:"pdf",label:"PDF识别",description:"识别扫描PDF中的文字"},{value:"ofd",label:"OFD识别",description:"识别OFD文件中的文字"}],ge=g(""),xe=g({outputFormat:"text",enableBatch:!0,optimizeLayout:!0,includeImage:!1}),he=g({idcardType:"front",invoiceType:"vat",includeHeaders:!0}),fe=g([]),ye=x(()=>fe.value),we=g(!1),ke=g(!1),Ce=g(!1),je=g(""),Fe=g(""),Oe=g(""),Be=g(0),Le=g(""),Ve=g([]),ze=g(""),Me=["1. 选择OCR类型：通用文字识别、身份证识别、发票识别等","2. 上传文件：支持图片、扫描PDF、OFD格式","3. 设置OCR选项：输出格式、批量识别等","4. 对于专项识别，设置相应的专项选项",'5. 点击"开始识别"按钮进行处理',"6. 等待识别完成，系统会自动下载识别结果","7. 查看识别结果，确保内容的准确性"],Re=e=>e.split(".").pop().toLowerCase(),Ue=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},Te=e=>{const l=e.toLowerCase();return[".png",".jpg",".jpeg",".webp",".gif"].some(e=>l.endsWith(e))},De=e=>["idcard","invoice","table"].includes(e),He=e=>{fe.value=e,Fe.value="",ke.value=!1,Ce.value=!1},Ie=e=>{Fe.value=e,Oe.value=Pe(e)},Pe=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否清晰，或尝试使用其他文件",Ee=async()=>{if(0!==ye.length)if(ge.value){we.value=!0,Fe.value="",Oe.value="",ke.value=!1,Ce.value=!1,Be.value=0,Le.value="准备识别...",Ve.value=[],ze.value="";try{await new Promise(e=>{let l=0;const a=y(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),Be.value=l,Le.value=l<30?"正在分析文件...":l<70?"正在识别文字...":l<90?"正在优化排版...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});let e={ocrType:ge.value,files:ye.value,options:xe.value};De(ge.value)&&(e.specialOptions=he.value);const l=be.find(e=>e.value===ge.value);je.value=`成功${l.label} ${ye.length} 个文件！`,ke.value=!0,ze.value="这是模拟的OCR识别结果示例\n\n识别内容：\n- 测试文字识别\n- 表格内容识别\n- 身份证信息识别\n- 发票信息识别\n\n识别完成时间：2026-02-05",Ce.value=!0,ye.forEach((e,l)=>{const a=xe.value.outputFormat,t=new Blob(["模拟OCR识别结果内容"],{type:$e(a)}),s=URL.createObjectURL(t),o=`ocr_result_${l+1}.${a}`;Ve.value.push({url:s,filename:o})}),Ve.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=Ve.value[0].url,e.download=Ve.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){Fe.value=`识别失败：${e.message||"未知错误"}`,Oe.value=Pe(Fe.value)}finally{we.value=!1}}else Fe.value="请选择OCR类型";else Fe.value="请选择文件"},$e=e=>({text:"text/plain",excel:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",word:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",html:"text/html"}[e]||"application/octet-stream"),_e=()=>{fe.value=[],ge.value="",xe.value={outputFormat:"text",enableBatch:!0,optimizeLayout:!0,includeImage:!1},he.value={idcardType:"front",invoiceType:"vat",includeHeaders:!0},Fe.value="",Oe.value="",ke.value=!1,Ce.value=!1,je.value="",Be.value=0,Le.value="",Ve.value=[],ze.value=""};return(g,x)=>(a(),e(h,{title:"OCR文字识别",description:"集成腾讯云OCR API，支持图片/扫描PDF/OFD转文字/Excel/Word",tips:Me},{default:l(()=>[t("div",w,[t("div",k,[x[9]||(x[9]=t("h3",{class:"text-lg font-semibold mb-4"},"选择OCR类型",-1)),t("div",C,[(a(),s(o,null,u(be,e=>t("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[n(t("input",{type:"radio","onUpdate:modelValue":x[0]||(x[0]=e=>ge.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,j),[[r,ge.value]]),t("div",null,[t("div",F,i(e.label),1),t("div",O,i(e.description),1)])])),64))])]),d(f,{multiple:!0,accept:[".png",".jpg",".jpeg",".pdf",".ofd"],"max-size":104857600,modelValue:fe.value,"onUpdate:modelValue":x[1]||(x[1]=e=>fe.value=e),onFilesChanged:He,onError:Ie},null,8,["modelValue"]),ye.value.length>0?(a(),s("div",B,[x[12]||(x[12]=t("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),t("div",L,[(a(!0),s(o,null,u(ye.value,(e,l)=>{return a(),s("div",{key:l,class:"bg-white rounded border p-3"},[t("div",V,[Te(e.name)?(a(),s("img",{key:0,src:g.URL.createObjectURL(e),class:"max-h-32 object-contain",alt:"Preview"},null,8,z)):(o=e.name,o.toLowerCase().endsWith(".pdf")?(a(),s("svg",M,[...x[10]||(x[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):(a(),s("svg",R,[...x[11]||(x[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])))]),t("div",U,[t("div",T,i(e.name),1),t("div",D,i(Re(e.name))+" • "+i(Ue(e.size)),1)]),t("button",{onClick:e=>(e=>{fe.value.splice(e,1),0===fe.value.length&&_e()})(l),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,H)]);var o}),128))])])):c("",!0),ye.value.length>0?(a(),s("div",I,[t("div",P,[x[18]||(x[18]=t("h3",{class:"text-lg font-semibold mb-3"},"OCR选项",-1)),t("div",E,[t("div",null,[x[14]||(x[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"输出格式",-1)),n(t("select",{"onUpdate:modelValue":x[2]||(x[2]=e=>xe.value.outputFormat=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[13]||(x[13]=[t("option",{value:"text"},"纯文本",-1),t("option",{value:"excel"},"Excel",-1),t("option",{value:"word"},"Word",-1),t("option",{value:"html"},"HTML",-1)])],512),[[v,xe.value.outputFormat]])]),t("div",null,[t("label",$,[n(t("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=e=>xe.value.enableBatch=e),class:"w-4 h-4 text-blue-600"},null,512),[[p,xe.value.enableBatch]]),x[15]||(x[15]=t("span",null,"启用批量识别",-1))])]),t("div",null,[t("label",_,[n(t("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=e=>xe.value.optimizeLayout=e),class:"w-4 h-4 text-blue-600"},null,512),[[p,xe.value.optimizeLayout]]),x[16]||(x[16]=t("span",null,"优化识别结果排版",-1))])]),t("div",null,[t("label",W,[n(t("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=e=>xe.value.includeImage=e),class:"w-4 h-4 text-blue-600"},null,512),[[p,xe.value.includeImage]]),x[17]||(x[17]=t("span",null,"保留图片内容",-1))])])])]),De(ge.value)?(a(),s("div",A,[x[24]||(x[24]=t("h3",{class:"text-lg font-semibold mb-3"},"专项识别选项",-1)),t("div",G,["idcard"===ge.value?(a(),s("div",q,[x[20]||(x[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"身份证类型",-1)),n(t("select",{"onUpdate:modelValue":x[6]||(x[6]=e=>he.value.idcardType=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[19]||(x[19]=[t("option",{value:"front"},"正面",-1),t("option",{value:"back"},"背面",-1),t("option",{value:"both"},"正反面",-1)])],512),[[v,he.value.idcardType]])])):c("",!0),"invoice"===ge.value?(a(),s("div",J,[x[22]||(x[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"发票类型",-1)),n(t("select",{"onUpdate:modelValue":x[7]||(x[7]=e=>he.value.invoiceType=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[21]||(x[21]=[t("option",{value:"vat"},"增值税发票",-1),t("option",{value:"normal"},"普通发票",-1),t("option",{value:"transport"},"运输发票",-1),t("option",{value:"other"},"其他发票",-1)])],512),[[v,he.value.invoiceType]])])):c("",!0),"table"===ge.value?(a(),s("div",K,[t("label",N,[n(t("input",{type:"checkbox","onUpdate:modelValue":x[8]||(x[8]=e=>he.value.includeHeaders=e),class:"w-4 h-4 text-blue-600"},null,512),[[p,he.value.includeHeaders]]),x[23]||(x[23]=t("span",null,"识别表头",-1))])])):c("",!0)])])):c("",!0)])):c("",!0),t("div",Q,[t("button",{onClick:Ee,disabled:!ye.value.length||!ge.value||we.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[we.value?(a(),s("span",Y,[x[25]||(x[25]=t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" 识别中... "+i(Be.value)+"% ",1)])):(a(),s("span",X,"开始识别"))],8,S),t("button",{onClick:_e,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),we.value?(a(),s("div",Z,[t("div",ee,[x[26]||(x[26]=t("h4",{class:"font-semibold text-blue-800"},"识别进度",-1)),t("span",le,i(Be.value)+"%",1)]),t("div",ae,[t("div",{class:"bg-blue-600 h-2.5 rounded-full",style:b({width:Be.value+"%"})},null,4)]),t("p",te,i(Le.value),1)])):c("",!0),ke.value?(a(),s("div",se,[x[27]||(x[27]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"识别成功")],-1)),t("p",oe,i(je.value),1),t("div",ue,[(a(!0),s(o,null,u(Ve.value,(e,l)=>(a(),s("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载识别结果 "+i(l+1),9,ne))),128))])])):c("",!0),Fe.value?(a(),s("div",re,[x[28]||(x[28]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"识别失败")],-1)),t("p",ie,i(Fe.value),1),Oe.value?(a(),s("p",de,"建议："+i(Oe.value),1)):c("",!0)])):c("",!0),Ce.value&&ze.value?(a(),s("div",ce,[x[29]||(x[29]=t("h3",{class:"text-lg font-semibold mb-3"},"识别结果预览",-1)),t("div",ve,[t("pre",pe,i(ze.value),1)])])):c("",!0)])]),_:1}))}};export{me as default};
