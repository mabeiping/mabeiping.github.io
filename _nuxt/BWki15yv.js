import{x as N,w as P,o as d,a as e,c as n,j as y,k as p,m as u,E as U,v as h,F as S,r as B,D as H,t as o,q as W}from"./DNRRGdBn.js";import{_ as A}from"./BGQ_FiXL.js";import"./D0ErU5Eq.js";import"./D4IwebrK.js";const L={class:"space-y-6"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"space-y-4"},G={class:"space-y-2"},I={class:"flex items-center gap-2 cursor-pointer"},J={class:"flex items-center gap-2 cursor-pointer"},K={key:0},O={key:1},Q={class:"grid grid-cols-7 gap-2"},X=["value"],Z={class:"text-xs text-text-secondary"},tt={class:"flex items-center gap-2"},et=["disabled"],st={class:"space-y-4"},at={key:0,class:"space-y-4"},ot={key:0,class:"p-4 bg-blue-50 rounded-lg"},lt={class:"text-sm text-text-secondary mb-2"},rt={class:"text-3xl font-bold text-primary"},dt={class:"text-sm text-text-secondary mt-2"},nt={key:1,class:"space-y-3"},it={class:"p-4 bg-blue-50 rounded-lg"},ut={class:"flex items-center justify-between"},ct={class:"text-2xl font-bold text-primary"},xt={class:"p-4 bg-green-50 rounded-lg"},yt={class:"flex items-center justify-between"},pt={class:"text-2xl font-bold text-green-500"},mt={class:"p-4 bg-yellow-50 rounded-lg"},vt={class:"flex items-center justify-between"},gt={class:"text-2xl font-bold text-yellow-500"},bt={key:0,class:"p-4 bg-red-50 rounded-lg"},ft={class:"flex items-center justify-between"},wt={class:"text-2xl font-bold text-red-500"},kt={key:2,class:"p-4 bg-gray-50 rounded-lg"},_t={class:"space-y-1 text-sm"},Dt={class:"flex justify-between"},ht={class:"text-text-primary"},Ct={class:"flex justify-between"},Mt={class:"text-text-primary"},Vt={class:"flex justify-between"},jt={class:"text-text-primary"},$t={key:1,class:"p-6 bg-gray-50 rounded-lg text-center"},Ut={class:"space-y-4"},St={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Bt={class:"flex items-center justify-between mb-2"},Ht={class:"font-medium text-text-primary"},Ft={class:"text-xs px-2 py-1 bg-red-100 text-red-600 rounded"},zt={class:"text-sm text-text-secondary"},Tt={class:"space-y-4"},qt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Lt={__name:"workday-calculator",setup(Et){const l=u("add"),x=u(""),v=u(""),c=u(5),D=u([0,6]),g=u(!1),r=u(null),w=u(""),C=u("success"),F=["日","一","二","三","四","五","六"],z=u([{name:"元旦",date:"2024-01-01 至 2024-01-03",days:3},{name:"春节",date:"2024-02-10 至 2024-02-17",days:8},{name:"清明节",date:"2024-04-04 至 2024-04-06",days:3},{name:"劳动节",date:"2024-05-01 至 2024-05-05",days:5},{name:"端午节",date:"2024-06-08 至 2024-06-10",days:3},{name:"中秋节",date:"2024-09-15 至 2024-09-17",days:3},{name:"国庆节",date:"2024-10-01 至 2024-10-07",days:7}]),M=()=>{if(!x.value){m("请选择起始日期","error");return}if(l.value==="count"&&!v.value){m("请选择结束日期","error");return}if(l.value==="add"&&!c.value){m("请输入工作日数量","error");return}l.value==="add"?T():q()},T=()=>{const a=new Date(x.value);let t=new Date(a),s=Math.abs(c.value);const i=c.value>0?1:-1;for(;s>0;)t.setDate(t.getDate()+i),!V(t)&&!j(t)&&s--;r.value={targetDate:b(t),weekday:E(t)},m("计算完成","success")},q=()=>{const a=new Date(x.value),t=new Date(v.value);if(a>t){m("起始日期不能晚于结束日期","error");return}let s=0,i=0,_=0,$=0;const f=new Date(a);for(;f<=t;)s++,V(f)?_++:g.value&&j(f)?$++:i++,f.setDate(f.getDate()+1);r.value={totalDays:s,workdays:i,weekendDays:_,holidays:$,details:{startDate:b(a),endDate:b(t),workdayPercentage:(i/s*100).toFixed(1)}},m("计算完成","success")},V=a=>{const t=a.getDay();return D.value.includes(t)},j=a=>{if(!g.value)return!1;const t=b(a);return["2024-01-01","2024-01-02","2024-01-03","2024-02-10","2024-02-11","2024-02-12","2024-02-13","2024-02-14","2024-02-15","2024-02-16","2024-02-17","2024-04-04","2024-04-05","2024-04-06","2024-05-01","2024-05-02","2024-05-03","2024-05-04","2024-05-05","2024-06-08","2024-06-09","2024-06-10","2024-09-15","2024-09-16","2024-09-17","2024-10-01","2024-10-02","2024-10-03","2024-10-04","2024-10-05","2024-10-06","2024-10-07"].includes(t)},b=a=>{const t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");return`${t}-${s}-${i}`},E=a=>["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a.getDay()],k=a=>{l.value="add";const t=new Date;x.value=b(t),c.value=a,M()},m=(a,t)=>{w.value=a,C.value=t,setTimeout(()=>{w.value=""},3e3)};return(a,t)=>(d(),N(A,{title:"工作日计算",description:"计算工作日、周末和节假日"},{default:P(()=>[e("div",L,[e("div",R,[e("div",Y,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-text-primary"},"计算模式",-1)),e("div",G,[e("label",I,[p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),type:"radio",value:"add",class:"w-4 h-4 text-primary border-gray-300 focus:ring-primary"},null,512),[[U,l.value]]),t[11]||(t[11]=e("span",{class:"text-sm text-text-primary"},"计算未来/过去的工作日",-1))]),e("label",J,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),type:"radio",value:"count",class:"w-4 h-4 text-primary border-gray-300 focus:ring-primary"},null,512),[[U,l.value]]),t[12]||(t[12]=e("span",{class:"text-sm text-text-primary"},"计算日期范围内的工作日",-1))])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"起始日期",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[h,x.value]])]),l.value==="count"?(d(),n("div",K,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"结束日期",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value=s),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[h,v.value]])])):y("",!0),l.value==="add"?(d(),n("div",O,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"工作日数量",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value=s),type:"number",min:"-1000",max:"1000",placeholder:"正数表示未来，负数表示过去",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[h,c.value,void 0,{number:!0}]])])):y("",!0),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"周末定义",-1)),e("div",Q,[(d(),n(S,null,B(F,(s,i)=>e("label",{key:i,class:"flex flex-col items-center gap-1 cursor-pointer"},[p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=_=>D.value=_),type:"checkbox",value:i,class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,8,X),[[H,D.value]]),e("span",Z,o(s),1)])),64))])]),e("div",tt,[p(e("input",{id:"includeHolidays","onUpdate:modelValue":t[6]||(t[6]=s=>g.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[H,g.value]]),t[17]||(t[17]=e("label",{for:"includeHolidays",class:"text-sm text-text-secondary"},"排除法定节假日",-1))]),e("button",{onClick:M,disabled:!x.value||l.value==="count"&&!v.value||l.value==="add"&&!c.value,class:"w-full py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"}," 计算 ",8,et)]),e("div",st,[t[28]||(t[28]=e("h3",{class:"text-lg font-semibold text-text-primary"},"计算结果",-1)),r.value?(d(),n("div",at,[l.value==="add"?(d(),n("div",ot,[e("p",lt,o(c.value>0?"未来":"过去")+" "+o(Math.abs(c.value))+" 个工作日后的日期",1),e("p",rt,o(r.value.targetDate),1),e("p",dt,o(r.value.weekday),1)])):y("",!0),l.value==="count"?(d(),n("div",nt,[e("div",it,[e("div",ut,[t[19]||(t[19]=e("span",{class:"text-sm text-text-secondary"},"总天数",-1)),e("span",ct,o(r.value.totalDays),1)])]),e("div",xt,[e("div",yt,[t[20]||(t[20]=e("span",{class:"text-sm text-text-secondary"},"工作日",-1)),e("span",pt,o(r.value.workdays),1)])]),e("div",mt,[e("div",vt,[t[21]||(t[21]=e("span",{class:"text-sm text-text-secondary"},"周末天数",-1)),e("span",gt,o(r.value.weekendDays),1)])]),g.value?(d(),n("div",bt,[e("div",ft,[t[22]||(t[22]=e("span",{class:"text-sm text-text-secondary"},"节假日",-1)),e("span",wt,o(r.value.holidays),1)])])):y("",!0)])):y("",!0),r.value.details?(d(),n("div",kt,[t[26]||(t[26]=e("h4",{class:"font-medium text-text-primary mb-2"},"详细信息",-1)),e("div",_t,[e("div",Dt,[t[23]||(t[23]=e("span",{class:"text-text-secondary"},"起始日期:",-1)),e("span",ht,o(r.value.details.startDate),1)]),e("div",Ct,[t[24]||(t[24]=e("span",{class:"text-text-secondary"},"结束日期:",-1)),e("span",Mt,o(r.value.details.endDate),1)]),e("div",Vt,[t[25]||(t[25]=e("span",{class:"text-text-secondary"},"工作日占比:",-1)),e("span",jt,o(r.value.details.workdayPercentage)+"%",1)])])])):y("",!0)])):(d(),n("div",$t,[...t[27]||(t[27]=[e("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-secondary"},'输入日期并点击"计算"查看结果',-1)])]))])]),e("div",Ut,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-text-primary"},"法定节假日 (2024)",-1)),e("div",St,[(d(!0),n(S,null,B(z.value,s=>(d(),n("div",{key:s.name,class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary transition-colors"},[e("div",Bt,[e("span",Ht,o(s.name),1),e("span",Ft,o(s.days)+"天",1)]),e("p",zt,o(s.date),1)]))),128))])]),e("div",Tt,[t[34]||(t[34]=e("h3",{class:"text-lg font-semibold text-text-primary"},"快速计算",-1)),e("div",qt,[e("button",{onClick:t[7]||(t[7]=s=>k(7)),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[30]||(t[30]=[e("p",{class:"text-2xl font-bold text-primary"},"7天",-1),e("p",{class:"text-sm text-text-secondary"},"一周",-1)])]),e("button",{onClick:t[8]||(t[8]=s=>k(14)),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[31]||(t[31]=[e("p",{class:"text-2xl font-bold text-primary"},"14天",-1),e("p",{class:"text-sm text-text-secondary"},"两周",-1)])]),e("button",{onClick:t[9]||(t[9]=s=>k(30)),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[32]||(t[32]=[e("p",{class:"text-2xl font-bold text-primary"},"30天",-1),e("p",{class:"text-sm text-text-secondary"},"一个月",-1)])]),e("button",{onClick:t[10]||(t[10]=s=>k(90)),class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-all"},[...t[33]||(t[33]=[e("p",{class:"text-2xl font-bold text-primary"},"90天",-1),e("p",{class:"text-sm text-text-secondary"},"三个月",-1)])])])]),w.value?(d(),n("div",{key:0,class:W(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",C.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},o(w.value),3)):y("",!0)])]),_:1}))}};export{Lt as default};
