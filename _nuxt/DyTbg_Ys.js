import{_ as L,r,c as n,a as s,g as A,m as C,y as F,t as i,F as f,l as g,n as p,A as P,d as M,z as U,o as d,p as D,B as I}from"./CXV6dDrr.js";const J={class:"image-compressor-page"},T={class:"compressor-container"},W={class:"upload-section"},$={key:0,class:"file-list"},O={class:"file-items"},K=["src"],X={class:"file-info"},q={class:"file-name"},H={class:"file-size"},Q=["onClick"],Y={class:"options-section"},Z={class:"option-group"},ss={class:"slider-container"},es={class:"slider-value"},ts={class:"option-group"},ls={class:"format-options"},os=["value"],as={class:"format-icon"},ns={class:"format-name"},is={class:"option-group"},ds={class:"option-group"},rs={class:"option-label"},us={class:"option-group"},cs={class:"option-label"},ps={class:"action-section"},vs=["disabled"],ms={key:0},_s={key:1},bs=["disabled"],fs={key:0,class:"results-section"},gs={class:"result-items"},hs=["src"],ks={class:"result-info"},ys={class:"result-name"},ws={class:"result-stats"},Cs={class:"stat-item"},Fs={class:"stat-value"},Ps={class:"stat-item"},Ms={class:"stat-value"},Us={class:"stat-item"},Bs={class:"stat-value success"},zs=["onClick"],xs={__name:"image-compressor",setup(Ns){const h=r(null),a=r([]),v=r(50),m=r("jpg"),k=r(null),y=r(!0),w=r(!1),u=r(!1),c=r([]),B=[{value:"jpg",name:"JPG",icon:"🖼️"},{value:"png",name:"PNG",icon:"🖼️"},{value:"webp",name:"WEBP",icon:"🖼️"}],z=()=>{h.value.click()},x=l=>{const e=Array.from(l.target.files);a.value=[...a.value,...e]},N=l=>{const t=Array.from(l.dataTransfer.files).filter(o=>o.type.startsWith("image/"));a.value=[...a.value,...t]},G=l=>{a.value.splice(l,1)},V=l=>URL.createObjectURL(l),_=l=>{if(l===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],o=Math.floor(Math.log(l)/Math.log(e));return Math.round(l/Math.pow(e,o)*100)/100+" "+t[o]},E=async()=>{if(a.value.length!==0){u.value=!0,c.value=[];for(const l of a.value){await new Promise(b=>setTimeout(b,500));const e=l.size,t=Math.round(e*(1-v.value/200)),o=Math.round((1-t/e)*100);c.value.push({fileName:l.name,originalSize:e,compressedSize:t,compressionRate:o,previewUrl:URL.createObjectURL(l),file:l})}u.value=!1}},R=l=>{const e=document.createElement("a");e.href=l.previewUrl,e.download=`compressed-${l.fileName.replace(/\.[^/.]+$/,"")}.${m.value}`,e.click()},S=()=>{alert("打包下载功能需要后端支持")},j=()=>{a.value=[],c.value=[]};return(l,e)=>(d(),n("div",J,[e[20]||(e[20]=s("h1",{class:"page-title"},"图像压缩工具",-1)),s("div",T,[s("div",W,[s("div",{class:"upload-area",onClick:z,onDragover:e[0]||(e[0]=F(()=>{},["prevent"])),onDrop:F(N,["prevent"])},[e[6]||(e[6]=s("div",{class:"upload-icon"},"📦",-1)),e[7]||(e[7]=s("div",{class:"upload-text"},[s("p",null,"拖拽图片到此处或点击上传"),s("p",{class:"upload-hint"},"支持 JPG, PNG, WEBP 格式")],-1)),s("input",{type:"file",ref_key:"fileInput",ref:h,onChange:x,accept:".jpg,.jpeg,.png,.webp",multiple:"",style:{display:"none"}},null,544)],32),a.value.length>0?(d(),n("div",$,[s("h3",null,"已选择文件 ("+i(a.value.length)+")",1),s("div",O,[(d(!0),n(f,null,g(a.value,(t,o)=>(d(),n("div",{key:o,class:"file-item"},[s("img",{src:V(t),alt:"预览",class:"file-preview"},null,8,K),s("div",X,[s("span",q,i(t.name),1),s("span",H,i(_(t.size)),1)]),s("button",{class:"remove-button",onClick:b=>G(o)},"✕",8,Q)]))),128))])])):C("",!0)]),s("div",Y,[e[15]||(e[15]=s("h3",null,"压缩选项",-1)),s("div",Z,[e[8]||(e[8]=s("label",{class:"option-label"},"压缩质量",-1)),s("div",ss,[p(s("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),min:"1",max:"100",class:"slider"},null,512),[[P,v.value,void 0,{number:!0}]]),s("span",es,i(v.value)+"%",1)]),e[9]||(e[9]=s("p",{class:"option-hint"},"数值越高，压缩率越大，但可能损失画质",-1))]),s("div",ts,[e[10]||(e[10]=s("label",{class:"option-label"},"输出格式",-1)),s("div",ls,[(d(),n(f,null,g(B,t=>s("label",{key:t.value,class:D(["format-option",{active:m.value===t.value}])},[p(s("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),value:t.value,name:"outputFormat"},null,8,os),[[I,m.value]]),s("span",as,i(t.icon),1),s("span",ns,i(t.name),1)],2)),64))])]),s("div",is,[e[11]||(e[11]=s("label",{class:"option-label"},"最大宽度",-1)),p(s("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>k.value=t),placeholder:"不限制",min:"1",class:"option-input"},null,512),[[P,k.value,void 0,{number:!0}]]),e[12]||(e[12]=s("p",{class:"option-hint"},"设置图片最大宽度，高度会自动按比例调整",-1))]),s("div",ds,[s("label",rs,[p(s("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>y.value=t)},null,512),[[U,y.value]]),e[13]||(e[13]=M(" 移除元数据（EXIF等） ",-1))])]),s("div",us,[s("label",cs,[p(s("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>w.value=t)},null,512),[[U,w.value]]),e[14]||(e[14]=M(" 转换为渐进式JPEG ",-1))])])]),s("div",ps,[s("button",{class:"compress-button",onClick:E,disabled:a.value.length===0||u.value},[u.value?(d(),n("span",_s,"⏳ 压缩中...")):(d(),n("span",ms,"📦 开始压缩"))],8,vs),s("button",{class:"clear-button",onClick:j,disabled:u.value}," 🗑️ 清空 ",8,bs)]),c.value.length>0?(d(),n("div",fs,[e[19]||(e[19]=s("h3",null,"压缩结果",-1)),s("div",gs,[(d(!0),n(f,null,g(c.value,(t,o)=>(d(),n("div",{key:o,class:"result-item"},[s("img",{src:t.previewUrl,alt:"压缩后预览",class:"result-preview"},null,8,hs),s("div",ks,[s("span",ys,i(t.fileName),1),s("div",ws,[s("div",Cs,[e[16]||(e[16]=s("span",{class:"stat-label"},"原始大小:",-1)),s("span",Fs,i(_(t.originalSize)),1)]),s("div",Ps,[e[17]||(e[17]=s("span",{class:"stat-label"},"压缩后:",-1)),s("span",Ms,i(_(t.compressedSize)),1)]),s("div",Us,[e[18]||(e[18]=s("span",{class:"stat-label"},"压缩率:",-1)),s("span",Bs,i(t.compressionRate)+"%",1)])]),s("button",{class:"download-button",onClick:b=>R(t)}," ⬇️ 下载 ",8,zs)])]))),128))]),s("div",{class:"download-all-section"},[s("button",{class:"download-all-button",onClick:S}," 📦 打包下载全部 ")])])):C("",!0)]),e[21]||(e[21]=A('<div class="info-section" data-v-d8b96ae6><h2 data-v-d8b96ae6>功能说明</h2><p data-v-d8b96ae6>这是一个功能强大的图像压缩工具，可以有效减小图片文件大小。</p><ul data-v-d8b96ae6><li data-v-d8b96ae6>支持批量压缩多个图片</li><li data-v-d8b96ae6>可自定义压缩质量，平衡文件大小和画质</li><li data-v-d8b96ae6>支持多种输出格式（JPG, PNG, WEBP）</li><li data-v-d8b96ae6>可设置最大宽度，自动调整高度</li><li data-v-d8b96ae6>支持移除元数据，保护隐私</li><li data-v-d8b96ae6>支持渐进式JPEG，提升加载体验</li><li data-v-d8b96ae6>实时显示压缩率和文件大小对比</li><li data-v-d8b96ae6>支持拖拽上传，操作简便</li></ul></div>',1))]))}},Vs=L(xs,[["__scopeId","data-v-d8b96ae6"]]);export{Vs as default};
