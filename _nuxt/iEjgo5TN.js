import{h as oe,w as se,o as n,a as e,c as d,i as j,y as H,j as l,k as c,m as $,v as T,p as v,q as F,t as r,x as E,F as R,r as N}from"./Bbp9ol3F.js";import{_ as le}from"./DcxfYlri.js";import"./DxtqSkkZ.js";import"./CymrFrSx.js";const re={class:"space-y-6"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ne={class:"space-y-4"},ae={key:0},de={key:1,class:"relative"},ue=["src"],ge={key:0,class:"space-y-4"},me={key:0,class:"grid grid-cols-2 gap-4"},ce={class:"grid grid-cols-4 gap-3"},pe={class:"flex items-center gap-2"},ve={class:"flex items-center gap-2"},he=["disabled"],xe={class:"space-y-4"},ye={key:0,class:"space-y-4"},be={class:"p-4 bg-gray-50 rounded-lg"},fe={class:"flex items-center justify-between mb-4"},we={class:"text-sm text-text-secondary"},ke={class:"flex justify-center"},_e=["src"],Ce={class:"grid grid-cols-2 gap-4"},Be={class:"p-4 bg-blue-50 rounded-lg"},Me={class:"text-lg font-bold text-primary"},De={class:"p-4 bg-green-50 rounded-lg"},je={class:"text-lg font-bold text-primary"},He={class:"p-4 bg-yellow-50 rounded-lg"},Se={class:"grid grid-cols-4 gap-2"},Ie=["src"],Ve={key:1,class:"p-6 bg-gray-50 rounded-lg text-center"},We={class:"space-y-4"},ze={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Le={class:"font-medium text-text-primary mb-2"},Pe={class:"space-y-1 text-sm"},Ue={class:"text-text-secondary"},$e={class:"text-text-secondary"},Te={class:"text-text-secondary"},Ge={__name:"id-photo-processor",setup(Fe){const S=l(null),g=l(null),a=l(null),p=l("id"),b=l(25),f=l(35),i=l("white"),I=l("high"),V=l(!1),W=l(!1),h=l(!1),x=l(""),z=l("success"),L=l([{type:"id",name:"一寸",width:25,height:35,pixelWidth:295,pixelHeight:413,usage:"身份证、学生证等"},{type:"id2",name:"二寸",width:35,height:49,pixelWidth:413,pixelHeight:579,usage:"护照、签证等"},{type:"small",name:"小二寸",width:35,height:45,pixelWidth:413,pixelHeight:531,usage:"驾照、部分签证"},{type:"passport",name:"护照",width:33,height:48,pixelWidth:390,pixelHeight:567,usage:"中国护照"},{type:"visa",name:"签证",width:35,height:45,pixelWidth:413,pixelHeight:531,usage:"美国、申根签证"}]),m=E(()=>{const s=L.value.find(t=>t.type===p.value);return p.value==="custom"?{width:b.value,height:f.value}:s?{width:s.width,height:s.height}:{width:25,height:35}}),P=E(()=>({width:127,height:89})),q=()=>{S.value.click()},G=s=>{const t=s.target.files[0];t&&U(t)},A=s=>{const t=s.dataTransfer.files[0];t&&t.type.startsWith("image/")&&U(t)},U=s=>{const t=new FileReader;t.onload=o=>{g.value=o.target.result},t.readAsDataURL(s)},J=()=>{g.value=null,a.value=null},K=()=>{a.value=null},O=()=>{if(!g.value){y("请先上传照片","error");return}h.value=!0,setTimeout(()=>{a.value=g.value,h.value=!1,y("照片处理完成","success")},1500)},Q=()=>{if(!a.value)return;const s=document.createElement("a");s.href=a.value,s.download=`id-photo-${Date.now()}.jpg`,s.click(),y("已下载单张照片","success")},X=()=>{if(!a.value)return;const s=document.createElement("canvas"),t=s.getContext("2d"),o=1524,w=1068;s.width=o,s.height=w,t.fillStyle=i.value==="white"?"#ffffff":i.value==="blue"?"#3b82f6":i.value==="red"?"#ef4444":"#d1d5db",t.fillRect(0,0,o,w);const k=new Image;k.onload=()=>{const _=m.value.width*12,C=m.value.height*12,u=20,Y=Math.floor((o-u)/(_+u)),Z=Math.floor((w-u)/(C+u));for(let M=0;M<Z;M++)for(let D=0;D<Y;D++){const ee=u+D*(_+u),te=u+M*(C+u);t.drawImage(k,ee,te,_,C)}const B=document.createElement("a");B.href=s.toDataURL("image/jpeg",.9),B.download=`id-photo-layout-${Date.now()}.jpg`,B.click(),y("已下载排版照片","success")},k.src=a.value},y=(s,t)=>{x.value=s,z.value=t,setTimeout(()=>{x.value=""},3e3)};return(s,t)=>(n(),oe(le,{title:"证件照处理",description:"制作和编辑证件照"},{default:se(()=>[e("div",re,[e("div",ie,[e("div",ne,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-text-primary"},"上传照片",-1)),e("div",{onClick:q,onDragover:t[0]||(t[0]=H(()=>{},["prevent"])),onDrop:H(A,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer"},[e("input",{ref_key:"fileInput",ref:S,type:"file",accept:"image/*",onChange:G,class:"hidden"},null,544),g.value?(n(),d("div",de,[e("img",{src:g.value,alt:"预览",class:"max-w-full max-h-[400px] mx-auto rounded-lg"},null,8,ue),e("button",{onClick:H(J,["stop"]),class:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(n(),d("div",ae,[...t[11]||(t[11]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-primary mb-2"},"点击或拖拽照片到此处",-1),e("p",{class:"text-sm text-text-secondary"},"支持 JPG, PNG 格式",-1)])]))],32),g.value?(n(),d("div",ge,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-text-primary"},"照片设置",-1)),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"证件照类型",-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>p.value=o),onChange:K,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[13]||(t[13]=[e("option",{value:"id"},"一寸 (25mm × 35mm)",-1),e("option",{value:"id2"},"二寸 (35mm × 49mm)",-1),e("option",{value:"small"},"小二寸 (35mm × 45mm)",-1),e("option",{value:"passport"},"护照 (33mm × 48mm)",-1),e("option",{value:"visa"},"签证 (35mm × 45mm)",-1),e("option",{value:"custom"},"自定义尺寸",-1)])],544),[[$,p.value]])]),p.value==="custom"?(n(),d("div",me,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (mm)",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>b.value=o),type:"number",min:"10",max:"100",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[T,b.value,void 0,{number:!0}]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (mm)",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>f.value=o),type:"number",min:"10",max:"100",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[T,f.value,void 0,{number:!0}]])])])):j("",!0),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"背景颜色",-1)),e("div",ce,[e("button",{onClick:t[4]||(t[4]=o=>i.value="white"),class:v([i.value==="white"?"ring-2 ring-primary ring-offset-2":"","h-12 bg-white border-2 border-gray-300 rounded-lg hover:border-primary transition-colors"]),title:"白色"},null,2),e("button",{onClick:t[5]||(t[5]=o=>i.value="blue"),class:v([i.value==="blue"?"ring-2 ring-primary ring-offset-2":"","h-12 bg-blue-500 rounded-lg hover:ring-2 hover:ring-primary hover:ring-offset-2 transition-colors"]),title:"蓝色"},null,2),e("button",{onClick:t[6]||(t[6]=o=>i.value="red"),class:v([i.value==="red"?"ring-2 ring-primary ring-offset-2":"","h-12 bg-red-500 rounded-lg hover:ring-2 hover:ring-primary hover:ring-offset-2 transition-colors"]),title:"红色"},null,2),e("button",{onClick:t[7]||(t[7]=o=>i.value="gray"),class:v([i.value==="gray"?"ring-2 ring-primary ring-offset-2":"","h-12 bg-gray-300 rounded-lg hover:ring-2 hover:ring-primary hover:ring-offset-2 transition-colors"]),title:"灰色"},null,2)])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"输出质量",-1)),c(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>I.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[18]||(t[18]=[e("option",{value:"high"},"高质量 (300 DPI)",-1),e("option",{value:"medium"},"中等质量 (150 DPI)",-1),e("option",{value:"low"},"低质量 (72 DPI)",-1)])],512),[[$,I.value]])]),e("div",pe,[c(e("input",{id:"removeBackground","onUpdate:modelValue":t[9]||(t[9]=o=>V.value=o),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[F,V.value]]),t[20]||(t[20]=e("label",{for:"removeBackground",class:"text-sm text-text-secondary"},"智能去背景",-1))]),e("div",ve,[c(e("input",{id:"addBorder","onUpdate:modelValue":t[10]||(t[10]=o=>W.value=o),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[F,W.value]]),t[21]||(t[21]=e("label",{for:"addBorder",class:"text-sm text-text-secondary"},"添加边框",-1))]),e("button",{onClick:O,disabled:h.value,class:"w-full py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},r(h.value?"处理中...":"处理照片"),9,he)])):j("",!0)]),e("div",xe,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-text-primary"},"处理结果",-1)),a.value?(n(),d("div",ye,[e("div",be,[e("div",fe,[t[24]||(t[24]=e("h4",{class:"font-medium text-text-primary"},"预览",-1)),e("span",we,r(m.value.width)+"mm × "+r(m.value.height)+"mm",1)]),e("div",ke,[e("img",{src:a.value,alt:"处理后的照片",class:"max-w-full rounded-lg shadow-lg"},null,8,_e)])]),e("div",Ce,[e("div",Be,[t[25]||(t[25]=e("p",{class:"text-sm text-text-secondary mb-1"},"单张照片",-1)),e("p",Me,r(m.value.width)+"×"+r(m.value.height)+"mm",1)]),e("div",De,[t[26]||(t[26]=e("p",{class:"text-sm text-text-secondary mb-1"},"排版尺寸",-1)),e("p",je,r(P.value.width)+"×"+r(P.value.height)+"mm",1)])]),e("div",He,[t[27]||(t[27]=e("h4",{class:"font-medium text-text-primary mb-2"},"排版预览",-1)),e("div",Se,[(n(),d(R,null,N(8,o=>e("div",{key:o,class:"aspect-[photoSize.width/photoSize.height] bg-white border border-gray-200 rounded flex items-center justify-center"},[e("img",{src:a.value,alt:"",class:"w-full h-full object-cover rounded"},null,8,Ie)])),64))])]),e("div",{class:"grid grid-cols-2 gap-4"},[e("button",{onClick:Q,class:"py-3 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," 下载单张 "),e("button",{onClick:X,class:"py-3 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," 下载排版 ")])])):(n(),d("div",Ve,[...t[28]||(t[28]=[e("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-secondary"},'上传照片并点击"处理照片"查看结果',-1)])]))])]),e("div",We,[t[30]||(t[30]=e("h3",{class:"text-lg font-semibold text-text-primary"},"证件照规格说明",-1)),e("div",ze,[(n(!0),d(R,null,N(L.value,o=>(n(),d("div",{key:o.type,class:"p-4 bg-white rounded-lg border border-gray-200 hover:border-primary transition-colors"},[e("h4",Le,r(o.name),1),e("div",Pe,[e("p",Ue,"尺寸: "+r(o.width)+"mm × "+r(o.height)+"mm",1),e("p",$e,"像素: "+r(o.pixelWidth)+" × "+r(o.pixelHeight),1),e("p",Te,"用途: "+r(o.usage),1)])]))),128))])]),x.value?(n(),d("div",{key:0,class:v(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",z.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},r(x.value),3)):j("",!0)])]),_:1}))}};export{Ge as default};
