import{h as X,w as Y,o as a,a as e,c as n,i as p,j as r,z as P,k as d,m as F,v as g,q as M,t as u,F as $,r as E,y as V,p as Z}from"./DGDBYtXz.js";import{_ as ee}from"./CnVvrBe4.js";import"./B9icYigy.js";import"./H-TvWAPN.js";const te={class:"space-y-6"},se={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors"},le={class:"space-y-4"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re=["disabled"],ae=["disabled"],de={key:0,class:"grid grid-cols-2 gap-4"},ne=["disabled"],ie={key:1,class:"grid grid-cols-2 gap-4"},ue=["disabled"],ce={key:2,class:"grid grid-cols-2 gap-4"},pe=["disabled"],ge={key:3,class:"grid grid-cols-2 gap-4"},be=["disabled"],ve=["disabled"],me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe=["disabled"],ye=["disabled"],fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},he={class:"flex items-center gap-2"},we=["disabled"],ke={class:"flex items-center gap-2"},_e=["disabled"],Fe={class:"flex items-center gap-2"},Me=["disabled"],Ve={key:4,class:"space-y-2"},Ue=["disabled"],ze=["disabled"],Ce={key:0,class:"space-y-4"},Be={class:"flex items-center justify-between"},je={class:"text-lg font-semibold text-text-primary"},Te={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[300px] overflow-y-auto"},We=["src"],Ae=["onClick"],Ge={key:1,class:"space-y-4"},Le={class:"flex items-center justify-between"},Se={class:"text-lg font-semibold text-text-primary"},De={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[300px] overflow-y-auto"},Pe=["src"],$e={class:"absolute bottom-0 left-0 right-0 bg-green-500 text-white text-xs p-1 rounded-b-lg"},Ee={class:"p-4 bg-green-50 rounded-lg"},He={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center"},Ie={class:"text-2xl font-bold text-primary"},Ne={class:"text-2xl font-bold text-green-500"},Oe={class:"text-2xl font-bold text-green-500"},Re={class:"text-2xl font-bold text-blue-500"},Ze={__name:"image-batch-processor",setup(qe){const U=r(null),l=r([]),c=r([]),b=r("none"),f=r(80),z=r(50),C=r(800),B=r(600),j=r(800),T=r(600),v=r("original"),h=r(""),W=r(!0),w=r(!1),A=r(""),G=r(!1),m=r(!1),x=r(""),L=r("success"),k=V(()=>l.value.reduce((o,t)=>o+t.size,0)),S=V(()=>c.value.reduce((o,t)=>o+t.size,0)),H=V(()=>k.value===0?0:((1-S.value/k.value)*100).toFixed(1)),I=()=>{U.value.click()},N=o=>{const t=Array.from(o.target.files);l.value=[...l.value,...t]},O=o=>{const s=Array.from(o.dataTransfer.files).filter(i=>i.type.startsWith("image/"));if(s.length===0){y("请选择图片文件","error");return}l.value=[...l.value,...s]},R=o=>{l.value.splice(o,1)},q=()=>{l.value=[],c.value=[]},D=o=>URL.createObjectURL(o),J=()=>{if(l.value.length===0){y("请先选择图片","error");return}m.value=!0,setTimeout(()=>{c.value=l.value.map(o=>{const t={name:h.value+o.name,size:Math.round(o.size*(f.value/100)),preview:D(o),originalFile:o};if(v.value!=="original"){const s=v.value;t.name=t.name.replace(/\.[^.]+$/,`.${s}`)}return t}),m.value=!1,y(`成功处理 ${l.value.length} 张图片`,"success")},2e3)},K=()=>{c.value.forEach(o=>{Q(o)}),y("已开始下载所有文件","success")},Q=o=>{const t=document.createElement("a");t.href=o.preview,t.download=o.name,t.click()},_=o=>{if(o===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,i)*100)/100+" "+s[i]},y=(o,t)=>{x.value=o,L.value=t,setTimeout(()=>{x.value=""},3e3)};return(o,t)=>(a(),X(ee,{title:"图片批量处理",description:"批量处理多张图片"},{default:Y(()=>[e("div",te,[e("div",se,[e("input",{ref_key:"fileInput",ref:U,type:"file",accept:"image/*",multiple:"",onChange:N,class:"hidden"},null,544),e("div",{onClick:I,onDragover:t[0]||(t[0]=P(()=>{},["prevent"])),onDrop:P(O,["prevent"]),class:"cursor-pointer"},[...t[14]||(t[14]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-text-primary mb-2"},"点击或拖拽图片到此处",-1),e("p",{class:"text-sm text-text-secondary"},"支持多个文件上传",-1)])],32)]),e("div",le,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-text-primary"},"处理选项",-1)),e("div",oe,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"调整尺寸",-1)),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},[...t[15]||(t[15]=[e("option",{value:"none"},"不调整",-1),e("option",{value:"percentage"},"按百分比",-1),e("option",{value:"width"},"按宽度",-1),e("option",{value:"height"},"按高度",-1),e("option",{value:"custom"},"自定义尺寸",-1)])],8,re),[[F,b.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"压缩质量",-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},[...t[17]||(t[17]=[e("option",{value:"100"},"最高质量 (100%)",-1),e("option",{value:"90"},"高质量 (90%)",-1),e("option",{value:"80"},"中高质量 (80%)",-1),e("option",{value:"70"},"中等质量 (70%)",-1),e("option",{value:"60"},"中低质量 (60%)",-1),e("option",{value:"50"},"低质量 (50%)",-1)])],8,ae),[[F,f.value]])])]),b.value==="percentage"?(a(),n("div",de,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"百分比",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>z.value=s),type:"number",min:"1",max:"200",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,ne),[[g,z.value,void 0,{number:!0}]])])])):p("",!0),b.value==="width"?(a(),n("div",ie,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (px)",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>C.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,ue),[[g,C.value,void 0,{number:!0}]])])])):p("",!0),b.value==="height"?(a(),n("div",ce,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (px)",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>B.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,pe),[[g,B.value,void 0,{number:!0}]])])])):p("",!0),b.value==="custom"?(a(),n("div",ge,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"宽度 (px)",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>j.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,be),[[g,j.value,void 0,{number:!0}]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"高度 (px)",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>T.value=s),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,ve),[[g,T.value,void 0,{number:!0}]])])])):p("",!0),e("div",me,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"输出格式",-1)),d(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>v.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},[...t[24]||(t[24]=[e("option",{value:"original"},"保持原格式",-1),e("option",{value:"jpg"},"JPG",-1),e("option",{value:"png"},"PNG",-1),e("option",{value:"webp"},"WebP",-1)])],8,xe),[[F,v.value]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"文件名前缀",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>h.value=s),type:"text",placeholder:"例如：processed_",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,ye),[[g,h.value]])])]),e("div",fe,[e("div",he,[d(e("input",{id:"maintainAspect","onUpdate:modelValue":t[10]||(t[10]=s=>W.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,we),[[M,W.value]]),t[27]||(t[27]=e("label",{for:"maintainAspect",class:"text-sm text-text-secondary"},"保持宽高比",-1))]),e("div",ke,[d(e("input",{id:"addWatermark","onUpdate:modelValue":t[11]||(t[11]=s=>w.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,_e),[[M,w.value]]),t[28]||(t[28]=e("label",{for:"addWatermark",class:"text-sm text-text-secondary"},"添加水印",-1))]),e("div",Fe,[d(e("input",{id:"convertToGrayscale","onUpdate:modelValue":t[12]||(t[12]=s=>G.value=s),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,Me),[[M,G.value]]),t[29]||(t[29]=e("label",{for:"convertToGrayscale",class:"text-sm text-text-secondary"},"转为灰度",-1))])]),w.value?(a(),n("div",Ve,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-text-secondary mb-2"},"水印文字",-1)),d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>A.value=s),type:"text",placeholder:"例如：© 2024",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:l.value.length===0},null,8,Ue),[[g,A.value]])])):p("",!0),e("button",{onClick:J,disabled:m.value||l.value.length===0,class:"w-full py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},u(m.value?"处理中...":l.value.length===0?"请先选择图片":"批量处理"),9,ze)]),l.value.length>0?(a(),n("div",Ce,[e("div",Be,[e("h3",je,"已选择的文件 ("+u(l.value.length)+")",1),e("button",{onClick:q,class:"px-3 py-1.5 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600 transition-colors"}," 清除全部 ")]),e("div",Te,[(a(!0),n($,null,E(l.value,(s,i)=>(a(),n("div",{key:i,class:"relative group"},[e("img",{src:D(s),alt:"",class:"w-full h-24 object-cover rounded-lg border border-gray-200"},null,8,We),e("button",{onClick:Je=>R(i),class:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...t[32]||(t[32]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ae)]))),128))])])):p("",!0),c.value.length>0?(a(),n("div",Ge,[e("div",Le,[e("h3",Se,"处理结果 ("+u(c.value.length)+")",1),e("button",{onClick:K,class:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors"}," 下载全部 ")]),e("div",De,[(a(!0),n($,null,E(c.value,(s,i)=>(a(),n("div",{key:i,class:"relative group"},[e("img",{src:s.preview,alt:"",class:"w-full h-24 object-cover rounded-lg border border-green-200"},null,8,Pe),e("div",$e,u(_(s.size)),1)]))),128))]),e("div",Ee,[e("div",He,[e("div",null,[e("p",Ie,u(c.value.length),1),t[33]||(t[33]=e("p",{class:"text-sm text-text-secondary"},"处理文件数",-1))]),e("div",null,[e("p",Ne,u(_(k.value)),1),t[34]||(t[34]=e("p",{class:"text-sm text-text-secondary"},"原始大小",-1))]),e("div",null,[e("p",Oe,u(_(S.value)),1),t[35]||(t[35]=e("p",{class:"text-sm text-text-secondary"},"处理后大小",-1))]),e("div",null,[e("p",Re,u(H.value)+"%",1),t[36]||(t[36]=e("p",{class:"text-sm text-text-secondary"},"压缩率",-1))])])])])):p("",!0),x.value?(a(),n("div",{key:2,class:Z(["fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50",L.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},u(x.value),3)):p("",!0)])]),_:1}))}};export{Ze as default};
