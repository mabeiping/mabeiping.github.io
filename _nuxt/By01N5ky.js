import{i as O,w as $,o as n,a as t,b as U,q as _,c as u,j as m,p as D,y,f as d,d as z,t as f,l as o}from"./-R7zUpUx.js";import{_ as B}from"./1SagYtif.js";import{P as j,a as I}from"./CPH4GR76.js";import{G as H}from"./zseaTYbb.js";import{_ as L}from"./DlAUqK2U.js";import"./C_FLJhYl.js";import"./Cu7bTl1K.js";import"./Dh5_xY7C.js";const R={class:"space-y-6"},J={class:"bg-white p-4 rounded-lg shadow"},M={class:"space-y-3"},T={class:"grid grid-cols-2 gap-2"},q={key:0,class:"bg-gray-50 p-3 rounded-md border border-gray-200"},A={class:"space-y-2"},K={class:"space-y-1"},Q={class:"flex items-center"},W={class:"flex items-center"},X={key:1,class:"bg-gray-50 p-3 rounded-md border border-gray-200"},Y={class:"space-y-2"},Z={class:"space-y-1"},ee={class:"flex items-center"},te={class:"flex items-center"},le={key:0,class:"mt-6"},se=["disabled"],ae={key:0,class:"mr-2 animate-spin"},oe={key:1,class:"mt-4"},re={key:2,class:"mt-6 bg-green-50 p-4 rounded-lg border border-green-200"},ne={class:"space-y-2 text-sm text-green-700"},ue={key:0},de={key:1},ie={__name:"extract",setup(me){const w=o([]),c=o(null),a=o("image"),v=o("png"),p=o("xlsx"),r=o({includeHiddenImages:!1,preserveOriginalSize:!0,mergedCells:!0,headerDetection:!0}),i=o(!1),b=o(0),g=o(null),k=o(null),C=o(0),E=s=>{c.value=s.length>0?s[0]:null,g.value=""},S=s=>{g.value=s,c.value=null},N=()=>{console.log("处理开始")},P=s=>{console.log("处理结束:",s)},V=s=>{a.value=s},h=async()=>{if(c.value){i.value=!0,b.value=0,g.value=null,k.value=null,C.value=0,N();try{const s={file:c.value,extractFeature:a.value,imageFormat:a.value==="image"?v.value:"",tableFormat:a.value==="table"?p.value:"",extractOptions:r.value};b.value=30;const e=await I.pdfExtract(s);b.value=100,setTimeout(()=>{i.value=!1;const l=e,F=URL.createObjectURL(l);k.value=F;const G=`extracted_${Date.now()}.${a.value==="image"?v.value:p.value}`,x=document.createElement("a");x.href=F,x.download=G,document.body.appendChild(x),x.click(),document.body.removeChild(x),P({success:!0,url:F}),C.value=a.value==="image"?5:2},500)}catch(s){i.value=!1,g.value=s.message,P({success:!1,error:s.message})}}};return(s,e)=>(n(),O(B,{title:"PDF提取",description:"从PDF文档中提取图片和表格数据","download-button":!1,tips:["1. 点击'选择文件'按钮或拖拽PDF文件到上传区域","2. 等待文件上传完成","3. 选择提取功能类型：","   • 图片提取：从PDF中提取所有图片，保持原始质量","   • 表格提取：从PDF中识别并提取表格数据","4. 选择提取选项：","   • 图片提取：选择图片格式（PNG/JPG）","   • 表格提取：选择导出格式（Excel/CSV）","5. 点击'开始提取'按钮","6. 等待处理完成后，文件会自动开始下载","7. 查看提取结果信息，包括成功提取的文件数量","⚠️ 重要警告：请勿上传包含重要秘密、敏感信息或机密数据的文件，以防信息泄露风险。"]},{default:$(()=>[t("div",R,[U(H,{multiple:!1,accept:".pdf",maxSize:100*1024*1024,modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),onFilesChanged:E,onError:S},null,8,["modelValue"]),t("div",J,[e[22]||(e[22]=t("h3",{class:"font-semibold mb-3"},"提取设置",-1)),t("div",M,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"提取功能",-1)),t("div",T,[t("button",{onClick:e[1]||(e[1]=l=>V("image")),class:_(["py-2 px-4 rounded-md transition-all duration-300 text-sm font-medium",a.value==="image"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"])}," 图片提取 ",2),t("button",{onClick:e[2]||(e[2]=l=>V("table")),class:_(["py-2 px-4 rounded-md transition-all duration-300 text-sm font-medium",a.value==="table"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"])}," 表格提取 ",2)])]),a.value==="image"?(n(),u("div",q,[e[15]||(e[15]=t("h4",{class:"font-medium text-sm mb-2"},"图片提取设置",-1)),t("div",A,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"图片格式",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>v.value=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[10]||(e[10]=[t("option",{value:"png"},"PNG（无损压缩，质量最佳）",-1),t("option",{value:"jpg"},"JPG（有损压缩，文件较小）",-1)])],512),[[D,v.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"提取选项",-1)),t("div",K,[t("label",Q,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>r.value.includeHiddenImages=l),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[y,r.value.includeHiddenImages]]),e[12]||(e[12]=t("span",{class:"ml-2 text-xs text-gray-700"},"包含隐藏图片",-1))]),t("label",W,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>r.value.preserveOriginalSize=l),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[y,r.value.preserveOriginalSize]]),e[13]||(e[13]=t("span",{class:"ml-2 text-xs text-gray-700"},"保持原始尺寸",-1))])])])])])):d("",!0),a.value==="table"?(n(),u("div",X,[e[21]||(e[21]=t("h4",{class:"font-medium text-sm mb-2"},"表格提取设置",-1)),t("div",Y,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"导出格式",-1)),m(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>p.value=l),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[16]||(e[16]=[t("option",{value:"xlsx"},"Excel (.xlsx)",-1),t("option",{value:"csv"},"CSV (.csv)",-1)])],512),[[D,p.value]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"提取选项",-1)),t("div",Z,[t("label",ee,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>r.value.mergedCells=l),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[y,r.value.mergedCells]]),e[18]||(e[18]=t("span",{class:"ml-2 text-xs text-gray-700"},"保留合并单元格",-1))]),t("label",te,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=l=>r.value.headerDetection=l),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[y,r.value.headerDetection]]),e[19]||(e[19]=t("span",{class:"ml-2 text-xs text-gray-700"},"自动检测表头",-1))])])])])])):d("",!0)])]),c.value?(n(),u("div",le,[t("button",{onClick:h,disabled:i.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[i.value?(n(),u("span",ae,"⏳")):d("",!0),z(" "+f(i.value?"处理中...":"开始提取"),1)],8,se)])):d("",!0),i.value?(n(),u("div",oe,[U(j,{progress:b.value,label:`处理进度: ${b.value}%`,error:g.value},null,8,["progress","label","error"])])):d("",!0),k.value?(n(),u("div",re,[e[24]||(e[24]=t("h3",{class:"font-semibold text-green-700 mb-2"},"提取成功",-1)),t("div",ne,[t("p",null,"成功提取："+f(C.value)+" 个文件",1),t("p",null,"提取类型："+f(a.value==="image"?"图片提取":"表格提取"),1),a.value==="image"?(n(),u("p",ue,"图片格式："+f(v.value.toUpperCase()),1)):d("",!0),a.value==="table"?(n(),u("p",de,"导出格式："+f(p.value.toUpperCase()),1)):d("",!0),e[23]||(e[23]=t("p",null,"文件已自动开始下载",-1))])])):d("",!0)])]),_:1}))}},ke=L(ie,[["__scopeId","data-v-8e007acd"]]);export{ke as default};
