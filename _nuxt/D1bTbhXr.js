import{j as e,w as l,o as a,a as t,c as o,F as s,p as r,q as u,v as n,t as d,y as i,s as c,C as v,l as g,b as p,d as m,B as b,r as f,x}from"./DH083wp6.js";import{_ as y}from"./CAtw_IK7.js";import{G as h}from"./rVeU8pxj.js";import{s as w}from"./C7-50Fh1.js";import"./DfP8px5f.js";import"./DySTNCTN.js";import"./Cn6QgdFK.js";import"./COX2iPvM.js";import"./BCo6x5W8.js";const k={class:"space-y-6"},j={class:"bg-gray-50 p-4 rounded-lg"},C={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},L=["value"],z={class:"font-medium"},U={class:"text-sm text-gray-500"},V={key:0,class:"space-y-4"},F={class:"bg-gray-50 p-4 rounded-lg"},B={class:"space-y-3"},O={class:"text-right text-sm text-gray-500 mt-1"},M={class:"bg-gray-50 p-4 rounded-lg"},$={class:"space-y-3"},_={class:"flex items-center space-x-2"},q={class:"grid grid-cols-2 gap-2"},G={class:"flex items-center space-x-2"},R={key:0},P={key:1,class:"space-y-4"},E={key:0,class:"bg-gray-50 p-4 rounded-lg"},D={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},A={class:"flex justify-center mb-3"},H=["src"],T={key:1,class:"w-16 h-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I={class:"text-center"},J={class:"font-medium truncate"},K={class:"text-sm text-gray-500"},N=["onClick"],S={class:"bg-gray-50 p-4 rounded-lg"},W={class:"space-y-3"},Y={class:"flex space-x-4"},Z=["disabled"],Q={key:0},X={key:1,class:"flex items-center justify-center"},ee={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},le={class:"flex items-center justify-between mb-2"},ae={class:"text-blue-700"},te={class:"w-full bg-gray-200 rounded-full h-2.5"},oe={class:"mt-2 text-sm text-blue-700"},se={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},re={class:"mt-2 text-green-700"},ue={class:"mt-3 space-y-2"},ne=["href","download"],de={key:4,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ie={class:"mt-2 text-red-700"},ce={key:0,class:"mt-2 text-sm text-gray-600"},ve={key:5,class:"bg-gray-50 p-4 rounded-lg"},ge={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},pe={class:"mb-2"},me={key:6,class:"bg-gray-50 p-4 rounded-lg"},be={class:"bg-white p-4 rounded-lg border max-h-96 overflow-auto"},fe={class:"whitespace-pre-wrap"},xe={__name:"index",setup(xe){const ye=[{value:"generate",label:"生成二维码/条形码",description:"批量生成二维码/条形码(自定义内容/尺寸/LOGO)"},{value:"recognize",label:"识别二维码/条形码",description:"批量识别图片/PDF内二维码/条形码"}],he=f(""),we=f({type:"qrcode",content:"https://example.com",size:200,foregroundColor:"#000000",backgroundColor:"#ffffff",addLogo:!1,logo:null}),ke=f({type:"both",outputFormat:"text"}),je=f([]),Ce=x(()=>je.value),Le=f(!1),ze=f(!1),Ue=f(!1),Ve=f(""),Fe=f(""),Be=f(""),Oe=f(0),Me=f(""),$e=f([]),_e=f([]),qe=f(""),Ge=["1. 选择功能：生成二维码/条形码或识别二维码/条形码","2. 对于生成功能：输入编码内容，设置样式参数","3. 对于识别功能：上传包含二维码/条形码的图片或PDF",'4. 点击"开始处理"按钮进行操作',"5. 等待处理完成，系统会自动下载处理后的文件","6. 查看处理结果，确保操作符合预期"],Re=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]},Pe=e=>{const l=e.toLowerCase();return[".png",".jpg",".jpeg",".webp",".gif"].some(e=>l.endsWith(e))},Ee=()=>!!he.value&&("generate"===he.value?we.value.content.trim().length>0:"recognize"===he.value&&Ce.length>0),De=e=>{const l=e.target.files[0];l&&(we.value.logo=l)},Ae=e=>{je.value=e,Fe.value="",ze.value=!1},He=e=>{Fe.value=e,Be.value=Te(e)},Te=e=>e.includes("文件大小")?"请尝试上传 smaller 文件，或分批上传多个文件":e.includes("文件类型")?"请确保上传的文件格式受支持":e.includes("网络")?"请检查网络连接，然后重试":"请检查文件是否损坏，或尝试使用其他文件",Ie=async()=>{if(Ee()){Le.value=!0,Fe.value="",Be.value="",ze.value=!1,Ue.value=!1,Oe.value=0,Me.value="准备处理...",$e.value=[],_e.value=[],qe.value="";try{await new Promise(e=>{let l=0;const a=w(()=>{l+=Math.floor(10*Math.random())+5,l>100&&(l=100),Oe.value=l,Me.value=l<30?"正在准备...":l<70?"generate"===he.value?"正在生成二维码/条形码...":"正在识别二维码/条形码...":"正在生成结果...",100===l&&(clearInterval(a),setTimeout(e,500))},500)});let e={feature:he.value};"generate"===he.value?e.options=we.value:"recognize"===he.value&&(e.files=Ce.value,e.options=ke.value);ye.find(e=>e.value===he.value);if("generate"===he.value){const e=we.value.content.split("\n").filter(e=>e.trim());Ve.value=`成功生成 ${e.length} 个${"qrcode"===we.value.type?"二维码":"条形码"}！`,e.forEach(e=>{_e.value.push({content:e})}),e.forEach((e,l)=>{const a=new Blob(["模拟生成的二维码/条形码内容"],{type:"image/png"}),t=URL.createObjectURL(a),o=`${we.value.type}_${l+1}.png`;$e.value.push({url:t,filename:o})})}else if("recognize"===he.value){Ve.value=`成功识别 ${Ce.length} 个文件中的二维码/条形码！`,qe.value="识别结果：\n\n文件1: https://example.com\n文件2: 123456789012\n文件3: https://test.org";const e=new Blob([qe.value],{type:"json"===ke.value.outputFormat?"application/json":"text/plain"}),l=URL.createObjectURL(e),a=`recognition_result.${ke.value.outputFormat}`;$e.value.push({url:l,filename:a})}ze.value=!0,Ue.value=!0,$e.value.length>0&&setTimeout(()=>{const e=document.createElement("a");e.href=$e.value[0].url,e.download=$e.value[0].filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},1e3)}catch(e){Fe.value=`处理失败：${e.message||"未知错误"}`,Be.value=Te(Fe.value)}finally{Le.value=!1}}else he.value?"generate"!==he.value||we.value.content.trim()?"recognize"===he.value&&0===Ce.length&&(Fe.value="请选择文件"):Fe.value="请输入编码内容":Fe.value="请选择功能"},Je=()=>{he.value="",we.value={type:"qrcode",content:"https://example.com",size:200,foregroundColor:"#000000",backgroundColor:"#ffffff",addLogo:!1,logo:null},ke.value={type:"both",outputFormat:"text"},je.value=[],Fe.value="",Be.value="",ze.value=!1,Ue.value=!1,Ve.value="",Oe.value=0,Me.value="",$e.value=[],_e.value=[],qe.value=""};return(f,x)=>(a(),e(y,{title:"二维码/条形码工具",description:"支持批量生成二维码/条形码(自定义内容/尺寸/LOGO)、批量识别图片/PDF内二维码/条形码、二维码内容解析/导出为文本",tips:Ge},{default:l(()=>[t("div",k,[t("div",j,[x[10]||(x[10]=t("h3",{class:"text-lg font-semibold mb-4"},"选择功能",-1)),t("div",C,[(a(),o(s,null,r(ye,e=>t("label",{key:e.value,class:"flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-100"},[u(t("input",{type:"radio","onUpdate:modelValue":x[0]||(x[0]=e=>he.value=e),value:e.value,class:"w-4 h-4 text-blue-600"},null,8,L),[[n,he.value]]),t("div",null,[t("div",z,d(e.label),1),t("div",U,d(e.description),1)])])),64))])]),"generate"===he.value?(a(),o("div",V,[t("div",F,[x[14]||(x[14]=t("h3",{class:"text-lg font-semibold mb-3"},"内容设置",-1)),t("div",B,[t("div",null,[x[12]||(x[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"编码类型",-1)),u(t("select",{"onUpdate:modelValue":x[1]||(x[1]=e=>we.value.type=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[11]||(x[11]=[t("option",{value:"qrcode"},"二维码",-1),t("option",{value:"barcode"},"条形码",-1)])],512),[[i,we.value.type]])]),t("div",null,[x[13]||(x[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"编码内容",-1)),u(t("textarea",{"onUpdate:modelValue":x[2]||(x[2]=e=>we.value.content=e),placeholder:"请输入要编码的内容，多个内容请换行分隔",rows:"4",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,we.value.content]]),t("div",O,d(we.value.content.split("\n").filter(e=>e.trim()).length)+" 个内容",1)])])]),t("div",M,[x[22]||(x[22]=t("h3",{class:"text-lg font-semibold mb-3"},"样式设置",-1)),t("div",$,[t("div",null,[x[16]||(x[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"尺寸",-1)),t("div",_,[u(t("input",{"onUpdate:modelValue":x[3]||(x[3]=e=>we.value.size=e),type:"number",min:"100",max:"1000",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,we.value.size,void 0,{number:!0}]]),x[15]||(x[15]=t("span",{class:"text-gray-500"},"像素",-1))])]),t("div",null,[x[19]||(x[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"颜色",-1)),t("div",q,[t("div",null,[x[17]||(x[17]=t("label",{class:"block text-xs text-gray-500 mb-1"},"前景色",-1)),u(t("input",{"onUpdate:modelValue":x[4]||(x[4]=e=>we.value.foregroundColor=e),type:"color",class:"w-full h-10 border border-gray-300 rounded-md"},null,512),[[c,we.value.foregroundColor]])]),t("div",null,[x[18]||(x[18]=t("label",{class:"block text-xs text-gray-500 mb-1"},"背景色",-1)),u(t("input",{"onUpdate:modelValue":x[5]||(x[5]=e=>we.value.backgroundColor=e),type:"color",class:"w-full h-10 border border-gray-300 rounded-md"},null,512),[[c,we.value.backgroundColor]])])])]),t("div",null,[t("label",G,[u(t("input",{type:"checkbox","onUpdate:modelValue":x[6]||(x[6]=e=>we.value.addLogo=e),class:"w-4 h-4 text-blue-600"},null,512),[[v,we.value.addLogo]]),x[20]||(x[20]=t("span",null,"添加LOGO",-1))])]),we.value.addLogo?(a(),o("div",R,[x[21]||(x[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"上传LOGO",-1)),t("input",{onChange:De,type:"file",accept:".png,.jpg,.jpeg",class:"w-full border border-gray-300 rounded-md px-3 py-2"},null,32)])):g("",!0)])])])):g("",!0),"recognize"===he.value?(a(),o("div",P,[p(h,{multiple:!0,accept:[".png",".jpg",".jpeg",".pdf"],"max-size":104857600,modelValue:je.value,"onUpdate:modelValue":x[7]||(x[7]=e=>je.value=e),onFilesChanged:Ae,onError:He},null,8,["modelValue"]),Ce.value.length>0?(a(),o("div",E,[x[24]||(x[24]=t("h3",{class:"text-lg font-semibold mb-2"},"源文件信息",-1)),t("div",D,[(a(!0),o(s,null,r(Ce.value,(e,l)=>{return a(),o("div",{key:l,class:"bg-white rounded border p-3"},[t("div",A,[Pe(e.name)?(a(),o("img",{key:0,src:f.URL.createObjectURL(e),class:"max-h-32 object-contain",alt:"Preview"},null,8,H)):(a(),o("svg",T,[...x[23]||(x[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),t("div",I,[t("div",J,d(e.name),1),t("div",K,d((s=e.name,s.split(".").pop().toLowerCase()))+" • "+d(Re(e.size)),1)]),t("button",{onClick:e=>(e=>{je.value.splice(e,1),0===je.value.length&&Je()})(l),class:"mt-2 w-full py-1 text-red-500 hover:text-red-700 text-sm"}," 删除 ",8,N)]);var s}),128))])])):g("",!0),t("div",S,[x[29]||(x[29]=t("h3",{class:"text-lg font-semibold mb-3"},"识别选项",-1)),t("div",W,[t("div",null,[x[26]||(x[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"识别类型",-1)),u(t("select",{"onUpdate:modelValue":x[8]||(x[8]=e=>ke.value.type=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[25]||(x[25]=[t("option",{value:"both"},"二维码和条形码",-1),t("option",{value:"qrcode"},"仅二维码",-1),t("option",{value:"barcode"},"仅条形码",-1)])],512),[[i,ke.value.type]])]),t("div",null,[x[28]||(x[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"输出格式",-1)),u(t("select",{"onUpdate:modelValue":x[9]||(x[9]=e=>ke.value.outputFormat=e),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...x[27]||(x[27]=[t("option",{value:"text"},"纯文本",-1),t("option",{value:"json"},"JSON格式",-1)])],512),[[i,ke.value.outputFormat]])])])])])):g("",!0),t("div",Y,[t("button",{onClick:Ie,disabled:!Ee()||Le.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[Le.value?(a(),o("span",X,[x[30]||(x[30]=t("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" 处理中... "+d(Oe.value)+"% ",1)])):(a(),o("span",Q,"开始处理"))],8,Z),t("button",{onClick:Je,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"}," 重置 ")]),Le.value?(a(),o("div",ee,[t("div",le,[x[31]||(x[31]=t("h4",{class:"font-semibold text-blue-800"},"处理进度",-1)),t("span",ae,d(Oe.value)+"%",1)]),t("div",te,[t("div",{class:"bg-blue-600 h-2.5 rounded-full",style:b({width:Oe.value+"%"})},null,4)]),t("p",oe,d(Me.value),1)])):g("",!0),ze.value?(a(),o("div",se,[x[32]||(x[32]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("h4",{class:"font-semibold text-green-800"},"处理成功")],-1)),t("p",re,d(Ve.value),1),t("div",ue,[(a(!0),o(s,null,r($e.value,(e,l)=>(a(),o("a",{key:l,href:e.url,download:e.filename,class:"block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," 下载处理结果 "+d(l+1),9,ne))),128))])])):g("",!0),Fe.value?(a(),o("div",de,[x[33]||(x[33]=t("div",{class:"flex items-center"},[t("svg",{class:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-2.694-.77-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("h4",{class:"font-semibold text-red-800"},"处理失败")],-1)),t("p",ie,d(Fe.value),1),Be.value?(a(),o("p",ce,"建议："+d(Be.value),1)):g("",!0)])):g("",!0),Ue.value&&_e.value.length>0?(a(),o("div",ve,[x[35]||(x[35]=t("h3",{class:"text-lg font-semibold mb-3"},"生成结果预览",-1)),t("div",ge,[(a(!0),o(s,null,r(_e.value,(e,l)=>(a(),o("div",{key:l,class:"bg-white p-3 rounded-lg border text-center"},[t("div",pe,d(e.content),1),x[34]||(x[34]=t("div",{class:"flex justify-center"},[t("div",{class:"border border-gray-200 p-2"},[t("svg",{width:"128",height:"128",class:"border border-gray-200"},[t("rect",{width:"128",height:"128",fill:"#ffffff"}),t("text",{x:"64",y:"64","text-anchor":"middle","dominant-baseline":"middle","font-size":"12",fill:"#000000"},"二维码预览")])])],-1))]))),128))])])):g("",!0),Ue.value&&qe.value?(a(),o("div",me,[x[36]||(x[36]=t("h3",{class:"text-lg font-semibold mb-3"},"识别结果预览",-1)),t("div",be,[t("pre",fe,d(qe.value),1)])])):g("",!0)])]),_:1}))}};export{xe as default};
